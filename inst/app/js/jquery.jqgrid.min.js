/**
 * @license jqGrid 4.14.0 - free jqGrid: https://github.com/free-jqgrid/jqGrid
 * Copyright (c) 2008-2014, Tony Tomov, tony@trirand.com
 * Copyright (c) 2014-2017, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2017-02-26
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a.document)}):"object"==typeof module&&module.exports?module.exports=function(a,c){return a||(a=window),void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(c,a.document),c}:b(jQuery,a.document)}("undefined"!=typeof window?window:this,function($,document){"use strict";function Aggregation(a,b,c){return this instanceof Aggregation?(this.aggregator=a,this.finilized=!1,this.context=b,void(this.pivotOptions=c)):new Aggregation(a)}function ArrayOfFieldsets(a,b,c,d,e){var f,g,h=d.length,i=this,j=function(a,b){var c=a,d=b;if(null==c&&(c=""),null==d&&(d=""),c=String(c),d=String(d),this.caseSensitive||(c=c.toUpperCase(),d=d.toUpperCase()),c===d){if(a===b)return 0;if(void 0===a)return-1;if(void 0===b)return 1;if(null===a)return-1;if(null===b)return 1}return c<d?-1:1},k=function(a,b){return a=Number(a),b=Number(b),a===b?0:a<b?-1:1},l=function(a,b){return a=Math.floor(Number(a)),b=Math.floor(Number(b)),a===b?0:a<b?-1:1};for(i.items=[],i.indexesOfSourceData=[],i.trimByCollect=a,i.caseSensitive=b,i.skipSort=c,i.fieldLength=h,i.fieldNames=new Array(h),i.fieldSortDirection=new Array(h),i.fieldCompare=new Array(h),f=0;f<h;f++){switch(g=d[f],i.fieldNames[f]=g[e||"dataName"],g.sorttype){case"integer":case"int":i.fieldCompare[f]=l;break;case"number":case"currency":case"float":i.fieldCompare[f]=k;break;default:i.fieldCompare[f]=$.isFunction(g.compare)?g.compare:j}i.fieldSortDirection[f]="desc"===g.sortorder?-1:1}}var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(a){var b=["st","nd","rd","th"];return a<11||a>13?b[Math.min((a-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{};var jgrid=$.jgrid;jgrid.locales=jgrid.locales||{};var locales=jgrid.locales,COMPONENT_NAMES={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};(null==jgrid.defaults||$.isEmptyObject(locales)||void 0===locales["en-US"])&&(void 0===locales["en-US"]&&$.extend(!0,jgrid,{locales:{"en-US":englishLanguageDefaults}}),jgrid.defaults=jgrid.defaults||{},void 0===jgrid.defaults.locale&&(jgrid.defaults.locale="en-US")),jgrid.defaults=jgrid.defaults||{};var defaults=jgrid.defaults;$.extend(!0,jgrid,{version:"4.14.0",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-carat-1-sw",openRtl:"ui-icon-carat-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-secondary",fmButton:"btn btn-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-secondary",actionsDiv:"",actionsButton:"btn btn-xs btn-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-secondary",deleteRuleButton:"btn btn-xs btn-secondary",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-secondary",deleteGroupButton:"btn btn-xs btn-secondary"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-secondary",clearButton:"btn btn-xs btn-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},oldEncodePostedData:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},oldDecodePostedData:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},clearArray:function(a){for(;a.length>0;)a.pop()},format:function(a){var b=$.makeArray(arguments).slice(1);return null==a&&(a=""),a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})},template:function(a){var b,c=$.makeArray(arguments).slice(1),d=c.length;return null==a&&(a=""),a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(a,e){var f,g;if(!isNaN(parseInt(e,10)))return c[parseInt(e,10)];for(b=0;b<d;b++)if($.isArray(c[b]))for(f=c[b],g=f.length;g--;)if(e===f[g].nm)return f[g].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var a=-1,b=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);return null!=b&&3===b.length&&(a=parseFloat(b[2]||-1)),a},fixMaxHeightOfDiv:function(a){return"Microsoft Internet Explorer"===navigator.appName?Math.min(a,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(a,17895696):a},getRelativeRect:function(a){var b,c,d=a instanceof $&&a.length>0?a[0]:a,e=$(d).outerHeight(),f=$(this).closest(".ui-jqgrid")[0];return f?(b=null!=d.getBoundingClientRect?d.getBoundingClientRect():$(d).offset(),c=null!=f.getBoundingClientRect?f.getBoundingClientRect():$(f).offset(),{top:b.top+e-c.top,left:b.left-c.left}):{top:0,left:0}},getCellIndex:function(a){var b=$(a);return b.is("tr")?-1:(b=(b.is("td")||b.is("th")?b:b.closest("td,th"))[0],null==b?-1:jgrid.msie?$.inArray(b,b.parentNode.cells):b.cellIndex)},stripHtml:function(a){return a=String(a),a?(a=a.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),a&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):""):a},stripPref:function(a,b){var c=$.type(a);return"string"!==c&&"number"!==c||(a=String(a),b=""!==a?String(b).replace(String(a),""):b),b},getRes:function(a,b){var c,d=b.split("."),e=d.length;if(null!=a){for(c=0;c<e;c++){if(!d[c])return null;if(a=a[d[c]],void 0===a)break;if("string"==typeof a)return a}return a}},parseDate:function(a,b,c,d){var e,f,g,h=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,i=0,j=0,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,l=/[^\-+\dA-Z]/g,m="string"==typeof b?b.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,n=function(a,b){for(a=String(a),b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},o={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},p=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b},q=function(a,b){var c,d,e=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],f=b||{},g=(jgrid.formatter||{}).date||{},h=null==a||null==a.locale?{}:((locales[a.locale]||{}).formatter||{}).date,i=e.length,j={};for(c=0;c<i;c++)d=e[c],void 0!==f[d]?j[d]=f[d]:void 0!==g[d]?j[d]=g[d]:void 0!==h[d]&&(j[d]=h[d]);return j};if(d=q(this.p,d),void 0===d.parseRe&&(d.parseRe=/[#%\\\/:_;.,\t\s\-]/),d.masks.hasOwnProperty(a)&&(a=d.masks[a]),b&&null!=b)if(isNaN(b)||"u"!==String(a).toLowerCase())if(isNaN(b)||"u1000"!==String(a).toLowerCase())if(b.constructor===Date)i=b;else if(null!==m)i=new Date(parseInt(m[1],10)),m[3]&&(j=60*Number(m[5])+Number(m[6]),j*="-"===m[4]?1:-1,j-=i.getTimezoneOffset(),i.setTime(Number(Number(i)+60*j*1e3)));else{for("ISO8601Long"===d.srcformat&&"Z"===b.charAt(b.length-1)&&(j-=(new Date).getTimezoneOffset()),b=String(b).replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe),a=a.replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe),f=0,g=Math.min(a.length,b.length);f<g;f++){switch(a[f]){case"M":e=$.inArray(b[f],d.monthNames),e!==-1&&e<12&&(b[f]=e+1,o.m=b[f]);break;case"F":e=$.inArray(b[f],d.monthNames,12),e!==-1&&e>11&&(b[f]=e+1-12,o.m=b[f]);break;case"n":o.m=parseInt(b[f],10);break;case"j":o.d=parseInt(b[f],10);break;case"g":o.h=parseInt(b[f],10);break;case"a":e=$.inArray(b[f],d.AmPm),e!==-1&&e<2&&b[f]===d.AmPm[e]&&(b[f]=e,o.h=p(b[f],o.h));break;case"A":e=$.inArray(b[f],d.AmPm),e!==-1&&e>1&&b[f]===d.AmPm[e]&&(b[f]=e-2,o.h=p(b[f],o.h))}void 0!==b[f]&&(o[a[f].toLowerCase()]=parseInt(b[f],10))}if(o.f&&(o.m=o.f),0===o.m&&0===o.y&&0===o.d)return"&#160;";o.m=parseInt(o.m,10)-1;var r=o.y;r>=70&&r<=99?o.y=1900+o.y:r>=0&&r<=69&&(o.y=2e3+o.y),i=new Date(o.y,o.m,o.d,o.h,o.i,o.s,o.u),j>0&&i.setTime(Number(Number(i)+60*j*1e3))}else i=new Date(parseFloat(b));else i=new Date(1e3*parseFloat(b));else i=new Date(o.y,o.m,o.d,o.h,o.i,o.s,o.u);if(d.userLocalTime&&0===j&&(j-=(new Date).getTimezoneOffset(),j>0&&i.setTime(Number(Number(i)+60*j*1e3))),void 0===c)return i;d.masks.hasOwnProperty(c)?c=d.masks[c]:c||(c="Y-m-d");var s=i.getHours(),t=i.getMinutes(),u=i.getDate(),v=i.getMonth()+1,w=i.getTimezoneOffset(),x=i.getSeconds(),y=i.getMilliseconds(),z=i.getDay(),A=i.getFullYear(),B=(z+6)%7+1,C=(new Date(A,v-1,u)-new Date(A,0,1))/864e5,D=B<5?Math.floor((C+B-1)/7)+1:Math.floor((C+B-1)/7)||((new Date(A-1,0,1).getDay()+6)%7<4?53:52),E={d:n(u),D:d.dayNames[z],j:u,l:d.dayNames[z+7],N:B,S:d.S(u),w:z,z:C,W:D,F:d.monthNames[v-1+12],m:n(v),M:d.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:A,y:String(A).substring(2),a:s<12?d.AmPm[0]:d.AmPm[1],A:s<12?d.AmPm[2]:d.AmPm[3],B:"?",g:s%12||12,G:s,h:n(s%12||12),H:n(s),i:n(t),s:n(x),u:y,e:"?",I:"?",O:(w>0?"-":"+")+n(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),P:"?",T:(String(i).match(k)||[""]).pop().replace(l,""),Z:"?",c:"?",r:"?",U:Math.floor(i/1e3)};return c.replace(h,function(a){return E.hasOwnProperty(a)?E[a]:a.substring(1)})},parseDateToNumber:function(a,b){var c=jgrid.parseDate.call(this,a,b);return c instanceof Date?c.getTime():0},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(a){var b=this;if(null==b.p||!b.p.id)return"";var c=b.p.id;switch(a){case COMPONENT_NAMES.GRID:return c;case COMPONENT_NAMES.GRID_BOX_DIV:return"gbox_"+c;case COMPONENT_NAMES.GRID_VIEW_DIV:return"gview_"+c;case COMPONENT_NAMES.DIALOG_ALERT_DIV:return"alertmod_"+c;case COMPONENT_NAMES.COLUMN_RESIZER_DIV:return"rs_m"+c;case COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+c;case COMPONENT_NAMES.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(a){var b=jgrid.getGridComponentId.call(this,a);return b?"#"+jgrid.jqID(b):""},isHTMLElement:function(a){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?a instanceof HTMLElement:null!=a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},getGridComponent:function(a,b){var c;if(b instanceof $||b.length>0)c=b[0];else{if(!jgrid.isHTMLElement(b))return $();c=b,b=$(c)}switch(a){case COMPONENT_NAMES.BODY_TABLE:return b.hasClass("ui-jqgrid-bdiv")?b.children("div").children(".ui-jqgrid-btable"):$();case COMPONENT_NAMES.HEADER_TABLE:return b.hasClass("ui-jqgrid-hdiv")?b.children("div").children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FOOTER_TABLE:return b.hasClass("ui-jqgrid-sdiv")?b.children("div").children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.FROZEN_HEADER_TABLE:return b.hasClass("ui-jqgrid-hdiv")?b.children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FROZEN_FOOTER_TABLE:return b.hasClass("ui-jqgrid-sdiv")?b.children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.BODY_DIV:return b.hasClass("ui-jqgrid-btable")&&null!=c.grid?$(c.grid.bDiv):$();case COMPONENT_NAMES.HEADER_DIV:return b.hasClass("ui-jqgrid-btable")&&null!=c.grid?$(c.grid.hDiv):$();case COMPONENT_NAMES.FOOTER_DIV:return b.hasClass("ui-jqgrid-btable")&&null!=c.grid?$(c.grid.sDiv):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var a=this,b=a.grid;if(b){var c=a.p,d=b.bDiv,e=function(a){var b=$(a).children("div").first();b.css(b.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",c.scrollOffset),a.scrollLeft=d.scrollLeft};$(d).width()>0&&(c.scrollOffset=d.offsetWidth-d.clientWidth,e(b.hDiv),b.sDiv&&e(b.sDiv))}},mergeCssClasses:function(){var a,b,c,d,e=$.makeArray(arguments),f={},g=[];for(a=0;a<e.length;a++)for(c=String(e[a]).replace(/[\t\r\n\f]/g," ").split(" "),b=0;b<c.length;b++)d=c[b],""===d||f.hasOwnProperty(d)||(f[d]=!0,g.push(d));return g.join(" ")},hasOneFromClasses:function(a,b){var c,d=$(a),e=String(b).replace(/[\t\r\n\f]/g," ").split(" "),f=e.length;for(c=0;c<f;c++)if(d.hasClass(e[c]))return!0;return!1},hasAllClasses:function(a,b){var c,d=$(a),e=String(b).replace(/[\t\r\n\f]/g," ").split(" "),f=e.length;for(c=0;c<f;c++)if(!d.hasClass(e[c]))return!1;return!0},detectRowEditing:function(a){var b,c,d,e=this,f=e.rows,g=e.p,h=$.isFunction;if(!e.grid||null==f||null==g)return null;if(void 0===g.savedRow||0===g.savedRow.length)return null;for(b=0;b<g.savedRow.length;b++)if(c=g.savedRow[b],"number"==typeof c.id&&"number"==typeof c.ic&&void 0!==c.name&&void 0!==c.v&&null!=f[c.id]&&f[c.id].id===a&&h($.fn.jqGrid.restoreCell)){if(d=f[c.id],null!=d&&d.id===a)return{mode:"cellEditing",savedRow:c}}else if(c.id===a&&h($.fn.jqGrid.restoreRow))return{mode:"inlineEditing",savedRow:c};return null},getCell:function(a,b){var c,d,e=this.grid,f=this.p;return e&&f?((a instanceof $||a.length>0)&&(a=a[0]),("object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&a instanceof HTMLTableRowElement&&null!=a.cells?(d=$(a.cells[b]),c=e.fbRows,null!=c&&b<c[0].cells.length?d.add(c[a.rowIndex].cells[b]):d):$()):$()},getDataFieldOfCell:function(a,b){var c,d=this.p,e=jgrid.getCell.call(this,a,b);return d.treeGrid&&e.children("div.tree-wrap").length>0&&(e=e.children("span.cell-wrapperleaf,span.cell-wrapper")),d.colModel[b].autoResizable?(c=e.children("span."+d.autoResizing.wrapperClassName),0===c.length&&(c=e)):c=e,c},enumEditableCells:function(a,b,c){var d=this,e=d.grid,f=d.rows,g=d.p;if(null==e||null==f||null==g||null==a||null==a.rowIndex||!a.id||!$.isFunction(c))return null;var h,i,j,k,l,m,n,o,p,q,r,s=g.colModel,t=s.length,u=a.rowIndex,v=e.fbRows,w=null!=v,x=w?v[u]:null;for(w&&(a=d.rows[u]),h=0;h<t&&(i=s[h],j=i.name,"cb"===j||"subgrid"===j||"rn"===j||(w&&!i.frozen&&(w=!1),p=(w?x:a).cells[h],q=$(p),q.hasClass("not-editable-cell")||(r=q.width(),g.treeGrid===!0&&j===g.ExpandColumn?(r-=q.children("div.tree-wrap").outerWidth(),q=q.children("span.cell-wrapperleaf,span.cell-wrapper").first()):r=0,l=stripPref(g.idPrefix,a.id),k={rowid:a.id,id:l,iCol:h,iRow:u,cmName:j,cm:i,mode:b,td:p,tr:a,trFrozen:x,dataElement:q[0],dataWidth:r},"local"===g.datatype&&(m=g._index[l],n=null!=m?g.data[m]:void 0,n&&(k.item=n)),i.edittype||(i.edittype="text"),o=i.editable,o=$.isFunction(o)?o.call(d,k):o,o!==!0&&"hidden"!==o||(k.editable=o,c.call(d,k)!==!1))));h++);},getEditedValue:function(a,b,c,d){var e,f,g,h,i,j,k=b.formatoptions||{},l=b.editoptions||{},m=l.custom_value,n="[name="+jgrid.jqID(b.name)+"]",o=this,p=$(o);if("hidden"===d||"readonly"===d)return $(o).jqGrid("getCell",a.closest("tr.jqgrow").attr("id"),b.name);switch(b.edittype){case"checkbox":f=["Yes","No"],"string"==typeof l.value&&(f=l.value.split(":")),e=a.find("input[type=checkbox]").is(":checked")?f[0]:f[1];break;case"text":case"password":case"textarea":case"button":h=a.find("input"+n+",textarea"+n),e=h.val(),"date"===h.prop("type")&&3===String(e).split("-").length&&(g=k.newformat||p.jqGrid("getGridRes","formatter.date.newformat"),e=jgrid.parseDate.call(o,"Y-m-d",e,g));break;case"select":h=a.find("select option:selected"),l.multiple?(i=[],j=[],h.each(function(){i.push($(this).val()),j.push($(this).text())}),e=i.join(","),c.text=j.join(",")):(e=h.val(),c.text=h.text()),c.value=e;break;case"custom":try{if(!$.isFunction(m))throw"e1";if(e=m.call(o,a.find(".customelement"),"get"),void 0===e)throw"e2"}catch(a){var q,r=jgrid.info_dialog,s=function(a){p.jqGrid("getGridRes",a)};switch(String(a)){case"e1":q="function 'custom_value' "+s("edit.msg.nodefined");break;case"e2":break;default:q=a.message}r&&$.isFunction(r)?r.call(o,s("errors.errcap"),q,s("edit.bClose")):($.isFunction(defaults.fatalError)?defaults.fatalError:alert)(q)}break;default:e=a.find("*"+n).text()}return e},guid:1,uidPref:"jqg",randId:function(a){return(a||jgrid.uidPref)+jgrid.guid++},getAccessor:function(a,b){var c,d,e,f=[];if($.isFunction(b))return b(a);if(null!=a&&a.hasOwnProperty(b))return a[b];try{if("string"==typeof b&&(f=b.split(".")),e=f.length)for(c=a;null!=c&&e--;)d=f.shift(),c=c[d]}catch(a){}return c},getXmlData:function(a,b,c){var d="string"==typeof b?b.match(/^(.*)\[(\w+)\]$/):null;if($.isFunction(b))return b(a);if(d&&d[2])return d[1]?$(d[1],a).attr(d[2]):$(a).attr(d[2]);if(void 0!==a){var e=$(a).find(b);return c?e:e.length>0?$(e).text():void 0}},cellWidth:function(){var a=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),b=a.appendTo("body").find("td").width();return a.remove(),Math.abs(b-5)>.1},isCellClassHidden:function(a){var b=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(a||"")+"'></td></tr></table></div></div></div>"),c=b.appendTo("body").find("td").is(":hidden");return b.remove(),c},cell_width:!0,ajaxOptions:{},from:function(source){var context=this,QueryObject=function(d,q){var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],toString=Object.prototype.toString;if("object"!=typeof d||!d.push)throw"data provides is not an array";if(d.length>0&&"object"!=typeof d[0])throw"data items are not objects";return this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(a){var b=[];return _trim&&b.push("jQuery.trim("),b.push("String("+a+" || '')"),_trim&&b.push(")"),_usecase||b.push(".toUpperCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return _trim&&(a=$.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?a:a.toUpperCase()},this._funcLoop=function(a){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b},this._append=function(a){var b;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,b=0;b<_orDepth;b++)_query+="(";_negate&&(_query+="!"),_query+="("+a+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(a,b){_lastCommand=a,_lastField=b},this._resetNegate=function(){
_negate=!1},this._repeatCommand=function(a,b){return null===_lastCommand?self:null!==a&&null!==b?_lastCommand(a,b):null===_lastField?_lastCommand(a):_lastCommand(_lastField,a)},this._equals=function(a,b){return 0===self._compare(a,b,1)},this._compare=function(a,b,c){return void 0===c&&(c=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===toString.call(a)&&"[object Date]"===toString.call(b)?a<b?-c:a>b?c:0:(_usecase||"number"==typeof a||"number"==typeof b||(a=String(a),b=String(b)),a<b?-c:a>b?c:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(a,b){var c=_sorting[b].by,d=_sorting[b].dir,e=_sorting[b].type,f=_sorting[b].datefmt,g=_sorting[b].sfunc;if(b===_sorting.length-1)return self._getOrder(a,c,d,e,f,g);b++;var h,i,j,k=self._getGroup(a,c,d,e,f),l=[];for(h=0;h<k.length;h++)for(j=self._doSort(k[h].items,b),i=0;i<j.length;i++)l.push(j[i]);return l},this._getOrder=function(a,b,c,d,e,f){var g,h,i,j=[],k=[],l="a"===c?1:-1;void 0===d&&(d="text"),i="float"===d||"number"===d||"currency"===d||"numeric"===d?function(a){var b=parseFloat(String(a).replace(_stripNum,""));return isNaN(b)?Number.NEGATIVE_INFINITY:b}:"int"===d||"integer"===d?function(a){return null!=a?parseFloat(String(a).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===d||"datetime"===d?function(a){return jgrid.parseDateToNumber.call(context,e,a)}:$.isFunction(d)?d:function(a){return a=null!=a?$.trim(String(a)):"",_usecase?a:a.toUpperCase()},$.each(a,function(a,c){h=""!==b?jgrid.getAccessor(c,b):c,void 0===h&&(h=""),h=i(h,c),k.push({vSort:h,data:c,index:a})}),$.isFunction(f)?k.sort(function(a,b){return f.call(context,a.vSort,b.vSort,l,a.data,b.data)}):k.sort(function(a,b){return self._compare(a.vSort,b.vSort,l)});for(var m=0,n=a.length;m<n;)g=k[m].index,j.push(a[g]),m++;return j},this._getGroup=function(a,b,c,d,e){var f=[],g=null,h=null;return $.each(self._getOrder(a,b,c,d,e),function(a,c){var d=jgrid.getAccessor(c,b);null==d&&(d=""),self._equals(h,d)||(h=d,null!==g&&f.push(g),g=self._group(b,d)),g.items.push(c)}),null!==g&&f.push(g),f},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){(function(){var localMath='(function (context) {\nvar yesObject = { 1: 1, x: 1, "true": 1, yes: 1, y: 1, on: 1 },noObject = { 0: 1, "false": 1, no: 1, n: 1, off: 1 },normilizeBoolean = function (v) {\nif (typeof v === "string") {\nif (noObject[v.toLowerCase()]) { return false; } else if (yesObject[v.toLowerCase()]) { return true; } }\nreturn !!v;\n},intFunc = function (jQuery, self) { return '+match+"; }; return intFunc.call(context.item, context.jQuery, context.context); }(this))";eval(localMath)&&results.push(this.item)}).call({item:this,jQuery:$,context:context})}),_data=results,self)},this.data=function(){return _data},this.select=function(a){if(self.execute(),$.isFunction(a)){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b}return self._hasData()?(self._performSort(),_data):[]},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),_data.length>0)},this.andNot=function(a,b,c){return _negate=!_negate,self.and(a,b,c)},this.orNot=function(a,b,c){return _negate=!_negate,self.or(a,b,c)},this.not=function(a,b,c){return self.andNot(a,b,c)},this.and=function(a,b,c){return _queuedOperator=" && ",void 0===a?self:self._repeatCommand(a,b,c)},this.or=function(a,b,c){return _queuedOperator=" || ",void 0===a?self:self._repeatCommand(a,b,c)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(a){return _negate=!_negate,self.is(a)},this.is=function(a){return self._append("this."+a),self._resetNegate(),self},this._compareValues=function(a,b,c,d,e){var f=b;void 0===c&&(c=null);var g=c,h=void 0===e.stype?"text":e.stype;if(null!==c)switch(h){case"int":case"integer":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||""===g?"0":Number(g),f="parseInt("+f+"||0,10)",g=String(parseInt(g,10));break;case"boolean":f="normilizeBoolean("+f+")",g="normilizeBoolean("+String(g)+")";break;case"float":case"number":case"currency":case"numeric":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||""===g?"0":Number(g),f="parseFloat("+f+"||0)",g=String(g);break;case"date":case"datetime":g=String(jgrid.parseDateToNumber.call(context,e.newfmt||"Y-m-d",g)),f='jQuery.jgrid.parseDateToNumber.call(self,"'+e.srcfmt+'",'+f+")";break;default:f=self._getStr(f),g=self._getStr('"'+self._toStr(g)+'"')}return self._append(f+" "+d+" "+g),self._setCommand(a,b),self._resetNegate(),self},this.equals=function(a,b,c){return self._compareValues(self.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return self._compareValues(self.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return self._compareValues(self.equals,a,null,"===",c)},this.greater=function(a,b,c){return self._compareValues(self.greater,a,b,">",c)},this.less=function(a,b,c){return self._compareValues(self.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return self._compareValues(self.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return self._compareValues(self.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return self._append(self._getStr(a)+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(b)+'"')),self._setCommand(self.startsWith,a),self._resetNegate(),self},this.endsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return self._append(self._getStr(a)+".substr("+self._getStr(a)+".length-"+d+","+d+') == "'+self._toStr(b)+'"'),self._setCommand(self.endsWith,a),self._resetNegate(),self},this.contains=function(a,b){return self._append(self._getStr(a)+'.indexOf("'+self._toStr(b)+'",0) > -1'),self._setCommand(self.contains,a),self._resetNegate(),self},this.groupBy=function(a,b,c,d){return self._hasData()?self._getGroup(_data,a,b,c,d):null},this.orderBy=function(a,b,c,d,e){return b=null==b?"a":$.trim(b.toString().toLowerCase()),null==c&&(c="text"),null==d&&(d="Y-m-d"),null==e&&(e=!1),"desc"!==b&&"descending"!==b||(b="d"),"asc"!==b&&"ascending"!==b||(b="a"),_sorting.push({by:a,dir:b,type:c,datefmt:d,sfunc:e}),self},this.inSet=function(a,b,c){var d=void 0===b?null:b,e=void 0===c.stype?"text":c.stype;return d=self._getStr('"'+self._toStr(d)+'"'),"text"!==e?self._compareValues(self.equals,a,b,"==",c):(self._append("jQuery.inArray("+self._getStr(a)+","+d+".split('"+(context.p.inFilterSeparator||",")+"')) >= 0"),self._setCommand(self.inSet,a),self._resetNegate(),self)},this.custom=function(a,b,c){return self._append("self.p.customSortOperations."+a+'.filter.call(self,{item:this,cmName:"'+b+'",searchValue:"'+c+'"})'),self._setCommand(self.custom,b),self._resetNegate(),self},self};return new QueryObject(source,null)},serializeFeedback:function(a,b,c){var d,e=this;return e instanceof $&&e.length>0&&(e=e[0]),"string"==typeof c?c:(d=$(e).triggerHandler(b,c),"string"==typeof d?d:(null!=d&&"object"==typeof d||(d=c),$.isFunction(a)?a.call(e,d):d))},fullBoolFeedback:function(a,b){var c=this,d=$.makeArray(arguments).slice(2),e=$(c).triggerHandler(b,d);if(e=e!==!1&&"stop"!==e,$.isFunction(a)){var f=a.apply(c,d);f!==!1&&"stop"!==f||(e=!1)}return e},feedback:function(a,b,c,d){var e=this;if(e instanceof $&&e.length>0&&(e=e[0]),null==a||"string"!=typeof d||d.length<2)return null;var f="on"===d.substring(0,2)?"jqGrid"+b+d.charAt(2).toUpperCase()+d.substring(3):"jqGrid"+b+d.charAt(0).toUpperCase()+d.substring(1),g=$.makeArray(arguments).slice(4),h=a[d+c];return g.unshift(f),g.unshift(h),jgrid.fullBoolFeedback.apply(e,g)},builderSortIcons:function(a){var b=this,c=b.p,d=$(b),e=d.jqGrid("getGuiStyles","states.disabled"),f=function(f){var g=c.colModel[a],h=null!=g&&$.isFunction(g.sortIconName)?g.sortIconName:c.sortIconName,i=$.isFunction(h)?h.call(b,{order:f,iCol:a,cm:g}):d.jqGrid("getIconRes","sort."+f);return jgrid.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+f,"horizontal"===c.viewsortcols[1]?"ui-i-"+f:"",e,i,"ui-sort-"+c.direction)};return"<span class='s-ico"+(c.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+f("asc")+"'></span><span class='"+f("desc")+"'></span></span>"},builderFmButon:function(a,b,c,d,e){var f=this.p,g=$(this),h=function(a){return g.jqGrid("getGuiStyles","dialog."+a)};return null==f?"":"<a id='"+a+"' class='"+jgrid.mergeCssClasses("fm-button",h("fmButton"),h("right"===e?"rightCorner":"left"===e?"leftCorner":"defaultCorner"),"right"===d?"fm-button-icon-right":"left"===d?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(c?"<span class='fm-button-icon "+(g.jqGrid("getIconRes",c)||c)+"'></span>":"")+(b?"<span class='fm-button-text'>"+b+"</span>":"")+"</a>"},convertOnSaveLocally:function(a,b,c,d,e,f){var g=this,h=g.p;if(null==h)return a;if($.isFunction(b.convertOnSave))return b.convertOnSave.call(this,{newValue:a,cm:b,oldValue:c,id:d,item:e,iCol:f});if("boolean"!=typeof c&&"number"!=typeof c)return a;if("boolean"!=typeof c||"checkbox"!==b.edittype&&"checkbox"!==b.formatter)"number"!=typeof c||isNaN(a)||("number"===b.formatter||"currency"===b.formatter?a=parseFloat(a):"integer"===b.formatter&&(a=parseInt(a,10)));else{var i=String(a).toLowerCase(),j=null!=b.editoptions&&"string"==typeof b.editoptions.value?b.editoptions.value.split(":"):["yes","no"];$.inArray(i,["1","true",j[0].toLowerCase()])>=0?a=!0:$.inArray(i,["0","false",j[1].toLowerCase()])>=0&&(a=!1)}return a},parseDataToHtml:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r=this,s=r.p,t=$(r),u=!1,v=[],w=[],x=s.altRows!==!0||t.jqGrid("isBootstrapGuiStyle")?"":s.altclass,y=!!s.grouping&&s.groupingView.groupCollapse===!0,z=parseInt(s.rowNum,10),A=$.fn.jqGrid,B=s.treeGrid===!0&&s.treeANode>-1?r.rows[s.treeANode].rowIndex+1:r.rows.length,C=r.formatCol,D=function(a,b,c,d,e,f){var g=r.formatter(a,b,c,e,"add",f);return"<td role='gridcell' "+C(c,d,g,e,a,f)+">"+g+"</td>"},E=function(a,b,c,d,e){var f="&nbsp;",g=!0,h={rowid:a,iRow:c,iCol:b,data:e,checked:d};return $.isFunction(s.hasMultiselectCheckBox)&&(g=s.hasMultiselectCheckBox.call(r,h)),g&&(f=$.isFunction(s.checkboxHtml)?s.checkboxHtml.call(r,h):"<input type='checkbox' id='jqg_"+s.id+"_"+a+"' class='cbox' name='jqg_"+s.id+"_"+a+"'"+(d?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+C(b,c,"",null,a,!0)+">"+f+"</td>"},F=function(a,b,c,d){var e=(parseInt(c,10)-1)*parseInt(d,10)+1+b;return"<td role='gridcell' class='"+A.getGuiStyles.call(t,"rowNum","jqgrid-rownum")+"' "+C(a,b,e,null,b,!0)+">"+e+"</td>"};for(B<=1&&(s.rowIndexes={}),("local"===s.datatype&&!s.deselectAfterSort||s.multiPageSelection)&&(u=!0),f&&(z*=f+1),h=0;h<Math.min(a,z);h++){for(m=b[h],n=c[h],o=null!=d?d[h]:n,j=1===e?0:e,k=(j+h)%2===1?x:"",u?s.multiselect?(l=$.inArray(m,s.selarrrow)!==-1,l&&null===s.selrow&&(s.selrow=m)):l=m===s.selrow:l=!1,p=v.length,v.push(""),i=0;i<s.colModel.length;i++)switch(q=s.colModel[i].name){case"rn":v.push(F(i,h,s.page,s.rowNum));break;case"cb":v.push(E(m,i,h,l,n));break;case"subgrid":v.push(A.addSubGridCell.call(t,i,h+e,m,n));break;default:v.push(D(m,n[q],i,h+e,o,n))}s.grouping&&A.groupingPrepare&&!s.groupingView._locgr&&(A.groupingPrepare.call(t,n,h),$.isFunction(s.groupingView.groupCollapse)&&(y=s.groupingView.groupCollapse.call(r,{group:s.groupingView.groups[s.groupingView.groups.length-1],rowid:m,data:n}))),v[p]=r.constructTr(m,y,k,n,o,l),v.push("</tr>"),s.rowIndexes[m]=B,B++,s.grouping&&(w.push(v),v=[]),v.length>s.maxItemsToJoin&&(v=[v.join("")])}return s.grouping&&A.groupingRender&&(g&&(s.groupingView._locgr=!0),v=[A.groupingRender.call(t,w,z)],jgrid.clearArray(w)),v},fillSelectOptions:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o=[],p=!1,q=function(a,b){if(b>0)return a};if(b){if("function"==typeof b&&(b=b()),"string"==typeof b)for(h=b.split(d),g=0;g<h.length;g++)i=h[g].split(c),i.length>2&&(i[1]=$.map(i,q).join(c)),o.push({value:i[0],innerHtml:i[1],selectValue:$.trim(i[0]),selectText:$.trim(i[1]),selected:!1}),""===i[0]&&(p=!0);else if("object"==typeof b)for(m in b)b.hasOwnProperty(m)&&o.push({value:m,innerHtml:b[m],selectValue:$.trim(m),selectText:$.trim(b[m]),selected:!1}),""===m&&(p=!0);if("string"==typeof f){for(n=e?$.map(f.split(","),function(a){return $.trim(a)}):[$.trim(f)],f=$.trim(f),g=0;g<o.length;g++)k=o[g],e||k.selectValue!==f||(k.selected=!0,l=!0),e&&$.inArray(k.selectValue,n)>-1&&(k.selected=!0,l=!0);if(!l)for(g=0;g<o.length;g++)k=o[g],e||k.selectText!==f||(k.selected=!0),e&&$.inArray(k.selectText,n)>-1&&(k.selected=!0)}for(g=0;g<o.length;g++)k=o[g],j=document.createElement("option"),j.value=k.value,j.innerHTML=k.innerHtml,k.selected&&(j.selected=!0),a.appendChild(j);return p}},getMethod:function(a){return this.getAccessor($.fn.jqGrid,a)},extend:function(a){$.extend($.fn.jqGrid,a),this.no_legacy_api||$.fn.extend(a)}});var clearArray=jgrid.clearArray,jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,mergeCssClasses=jgrid.mergeCssClasses,hasOneFromClasses=jgrid.hasOneFromClasses,feedback=function(){var a=$.makeArray(arguments);return a.unshift(""),a.unshift(""),a.unshift(this.p),jgrid.feedback.apply(this,a)};$.fn.jqGrid=function(a){var b,c=$.fn.jqGrid;if("string"==typeof a){if(b=c[a],!b)throw"jqGrid - No such method: "+a;return b.apply(this,$.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var b,d,e=this,f=$(e),g=$.isFunction,h=$.isArray,i=$.extend,j=$.inArray,k=$.trim,l=$.each,m=c.setSelection,n=c.getGridRes,o=g(defaults.fatalError)?defaults.fatalError:alert,p=a.locale||defaults.locale||"en-US",q=null!=locales[p]&&"boolean"==typeof locales[p].isRTL&&locales[p].isRTL?"rtl":"ltr",r=a.iconSet||defaults.iconSet||("bootstrap"===(a.guiStyle||defaults.guiStyle)||"bootstrapPrimary"===(a.guiStyle||defaults.guiStyle)?"glyph":"jQueryUI"),s=a.guiStyle||defaults.guiStyle||"jQueryUI",t=function(a){return c.getIconRes.call(e,a)},u=function(a,b){return f.jqGrid("getGuiStyles",a,b)},v=function(a,b,c){if("abort"!==b&&"abort"!==c){var d=a.getResponseHeader("Content-Type"),e=a.responseText||"",g=function(a){var b,c,d,e=document.createElement("div");for(d=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(a),e.innerHTML=null!=d&&2===d.length?d[1]:a,b=e.getElementsByTagName("script"),c=b.length;c--;)b[c].parentNode.removeChild(b[c]);a=e.innerHTML;try{""===$.trim($(a).text())&&(a="")}catch(a){}return a},h=function(a){try{var b,c=$.parseJSON(a),d=[];for(b in c)c.hasOwnProperty(b)&&"StackTrace"!==b&&d.push(b+": "+c[b]);a=d.join("<br />")}catch(a){}return a};"text/html"===d?e=g(e):"application/json"===d?e=h(e):"text/plain"===d&&(e=h(e)),500!==a.status&&0!==a.status&&(e=(b||c)+(c&&c!==b?": "+c:"")+" "+a.status+" "+a.statusText+(""!==e?"<hr />":"")+e),f.jqGrid("displayErrorMessage",e||b||c)}};null==a&&(a={datatype:"local"}),void 0!==a.datastr&&h(a.datastr)&&(d=a.datastr,a.datastr=[]),void 0!==a.data&&(b=a.data,a.data=[]),null!=jgrid.formatter&&null!=jgrid.formatter.unused||o("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===a.datatype&&void 0!==a.dataType&&(a.datatype=a.dataType,delete a.dataType),void 0===a.mtype&&void 0!==a.type&&(a.mtype=a.type,delete a.type),e.p={iconSet:r};var w=i(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:v,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,multiPageSelection:!1,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:q,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:t("grouping.common"),plusicon:t("grouping.plus"),minusicon:t("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:r,guiStyle:s,locale:p,multiSort:!1,treeIcons:{commonIconClass:t("treeGrid.common"),plusLtr:t("treeGrid.plusLtr"),plusRtl:t("treeGrid.plusRtl"),minus:t("treeGrid.minus"),leaf:t("treeGrid.leaf")}},defaults,{navOptions:i(!0,{commonIconClass:t("nav.common"),editicon:t("nav.edit"),addicon:t("nav.add"),delicon:t("nav.del"),searchicon:t("nav.search"),refreshicon:t("nav.refresh"),viewicon:t("nav.view"),saveicon:t("nav.save"),cancelicon:t("nav.cancel"),buttonicon:t("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:i(!0,{commonIconClass:t("actions.common"),editicon:t("actions.edit"),delicon:t("actions.del"),saveicon:t("actions.save"),cancelicon:t("actions.cancel")},jgrid.actionsNav||{}),formEditing:i(!0,{commonIconClass:t("form.common"),prevIcon:t("form.prev"),nextIcon:t("form.next"),saveicon:[!0,"left",t("form.save")],closeicon:[!0,"left",t("form.undo")]},jgrid.edit||{}),searching:i(!0,{commonIconClass:t("search.common"),findDialogIcon:t("search.search"),resetDialogIcon:t("search.reset"),queryDialogIcon:t("search.query")},jgrid.search||{}),formViewing:i(!0,{commonIconClass:t("form.common"),prevIcon:t("form.prev"),nextIcon:t("form.next"),closeicon:[!0,"left",t("form.cancel")]},jgrid.view||{}),formDeleting:i(!0,{commonIconClass:t("form.common"),delicon:[!0,"left",t("form.del")],cancelicon:[!0,"left",t("form.cancel")]},jgrid.del||{})},a||{}),x=function(a){return n.call(f,a)},y=function(a){var b=jgrid.getRes(w,a);return void 0!==b?b:n.call(f,"defaults."+a)};if(w.recordpos=w.recordpos||("rtl"===w.direction?"left":"right"),w.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==w.autoResizing.widthOfVisiblePartOfSortIcon?w.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===w.iconSet?13:12,w.datatype=void 0!==w.datatype?w.datatype:void 0!==b||null==w.url?"local":null!=w.jsonReader&&"object"==typeof w.jsonReader?"json":"xml",w.jsonReader=w.jsonReader||{},w.url=w.url||"",w.cellsubmit=void 0!==w.cellsubmit?w.cellsubmit:void 0===w.cellurl?"clientArray":"remote",w.gridview=void 0!==w.gridview?w.gridview:null==w.afterInsertRow,void 0!==b&&(w.data=b,a.data=b),void 0!==d&&(w.datastr=d,a.datastr=d),"TABLE"!==e.tagName.toUpperCase())return void o("Element is not a table!");if(""===e.id&&f.attr("id",randId()),void 0!==document.documentMode&&document.documentMode<=5)return void o("Grid can not be used in this ('quirks') mode!");f.empty().attr("tabindex","0"),e.p=w,w.id=e.id,w.idSel="#"+jqID(e.id),w.gBoxId=getGridComponentId.call(e,COMPONENT_NAMES.GRID_BOX_DIV),w.gBox=getGridComponentIdSelector.call(e,COMPONENT_NAMES.GRID_BOX_DIV),w.gViewId=getGridComponentId.call(e,COMPONENT_NAMES.GRID_VIEW_DIV),w.gView=getGridComponentIdSelector.call(e,COMPONENT_NAMES.GRID_VIEW_DIV),w.rsId=getGridComponentId.call(e,COMPONENT_NAMES.COLUMN_RESIZER_DIV),w.rs=getGridComponentIdSelector.call(e,COMPONENT_NAMES.COLUMN_RESIZER_DIV),w.cbId=getGridComponentId.call(e,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX),w.cb=getGridComponentIdSelector.call(e,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);var z=jgrid.fixScrollOffsetAndhBoxPadding,A=function(a){var b,c={},d=a.length;for(b=0;b<d;b++)c[a[b].name]=b;return c},B=function(){var a,b,c={},d=w.colModel,e=d.length;for(a=0;a<e;a++)b=d[a],(b.createColumnIndex||w.createColumnIndex&&b.createColumnIndex!==!1||"select"===b.stype&&(b.searchoptions||{}).generateValue||"select"===b.edittype&&(b.editoptions||{}).generateValue)&&(c[d[a].name]={});return c},C=function(a){var b,c,d={},e=a.length;for(b=0;b<e;b++)c=a[b],d["string"==typeof c?c:c.name]=b;return d},D=function(){var a,b,c={};for(this.p.rowIndexes=c,b=0;b<this.rows.length;b++)a=this.rows[b],$(a).hasClass("jqgrow")&&(c[a.id]=a.rowIndex)},E=function(){var a,b,c,d,e,f=w.colModel,g=w.cmNamesInputOrder,h=w.additionalProperties,i=g.length;for(w.arrayReaderInfos={},b=w.arrayReaderInfos,e=0;e<i;e++)c=g[e],j(c,w.reservedColumnNames)<0&&!b.hasOwnProperty(c)&&(d=w.iColByName[c],void 0!==d?b[c]={name:f[d].name,index:d,order:e,type:0}:(d=w.iPropByName[c],void 0!==d?b[c]={name:f[d].name,index:d,order:e,type:1}:c===(w.prmNames.rowidName||"rowid")&&(b[c]={index:d,type:2})));for(i=f.length,a=0;a<i;a++)c=f[a].name,j(c,w.reservedColumnNames)<0&&!b.hasOwnProperty(c)&&(b[c]={name:c,index:a,order:e,type:0},e++);for(i=h.length,a=0;a<i;a++)c=h[a],null==c||b.hasOwnProperty(c)||("object"==typeof c&&"string"===$.type(c.name)&&(c=c.name),b[c]={name:c,index:a,order:e,type:1},e++)},F=function(a){var b=$(this).data("pageX");b?(b=String(b).split(";"),b=b[b.length-1],$(this).data("pageX",b+";"+a.pageX)):$(this).data("pageX",a.pageX)},G=function(a,b){return a=parseInt(a,10),isNaN(a)?b||0:a},H={headers:[],cols:[],footers:[],dragStart:function(a,b,c,d){var e=this,f=$(e.bDiv),g=f.closest(w.gBox).offset(),h=d.offset().left+("rtl"===w.direction?0:e.headers[a].width+(jgrid.cell_width?0:G(w.cellLayout,0))-2);e.resizing={idx:a,startX:h,sOL:h,moved:!1,delta:h-b.pageX},e.curGbox=$(w.rs),e.curGbox.prependTo("body"),e.curGbox.css({display:"block",left:h,top:c[1]+g.top+1,height:c[2]}),e.curGbox.css("height",c[2]-(e.curGbox.outerHeight()-e.curGbox.height())+"px"),e.curGbox.data("idx",a),e.curGbox.data("delta",h-b.pageX),F.call(this.curGbox,b),feedback.call(getGridComponent(COMPONENT_NAMES.BODY_TABLE,f)[0],"resizeStart",b,a),document.onselectstart=function(){return!1},$(document).on("mousemove.jqGrid",function(a){if(H.resizing)return H.dragMove(a),!1}).on("mouseup.jqGrid"+w.id,function(){if(H.resizing)return H.dragEnd(),!1})},dragMove:function(a){var b=this,c=b.resizing;if(c){var d,e,f=a.pageX+c.delta-c.startX,g=b.headers,h=g[c.idx],i="ltr"===w.direction?h.width+f:h.width-f,j=((w.colModel[c.idx]||{}).autoResizing||{}).minColWidth||w.minResizingWidth;c.moved=!0,i>j&&(null==b.curGbox&&(b.curGbox=$(w.rs)),b.curGbox.css({left:c.sOL+f}),w.forceFit===!0?(d=g[c.idx+w.nv],e="ltr"===w.direction?d.width-f:d.width+f,e>w.autoResizing.minColWidth&&(h.newWidth=i,d.newWidth=e)):(b.newWidth="ltr"===w.direction?w.tblwidth+f:w.tblwidth-f,h.newWidth=i))}},resizeColumn:function(a,b,d){var e,f=this,g=f.headers,h=f.footers,i=g[a],j=i.newWidth||i.width,k=getGridComponent(COMPONENT_NAMES.BODY_TABLE,f.bDiv),l=getGridComponent(COMPONENT_NAMES.HEADER_TABLE,f.hDiv),m=l.children("thead").children("tr").first()[0].cells;j=parseInt(j,10),w.colModel[a].width=j,i.width=j,m[a].style.width=j+"px",f.cols[a].style.width=j+"px",f.fbRows&&($(f.fbRows[0].cells[a]).css("width",j),$(getGridComponent(COMPONENT_NAMES.FROZEN_HEADER_TABLE,f.fhDiv)[0].rows[0].cells[a]).css("width",j),w.footerrow&&$(getGridComponent(COMPONENT_NAMES.FROZEN_FOOTER_TABLE,f.fsDiv)[0].rows[0].cells[a]).css("width",j)),h.length>0&&(h[a].style.width=j+"px"),d!==!0&&z.call(k[0]),w.forceFit===!0?(e=g[a+w.nv],j=e.newWidth||e.width,e.width=j,m[a+w.nv].style.width=j+"px",f.cols[a+w.nv].style.width=j+"px",h.length>0&&(h[a+w.nv].style.width=j+"px"),w.colModel[a+w.nv].width=j):(w.tblwidth=f.newWidth||w.tblwidth,d!==!0&&(f.hDiv.scrollLeft=f.bDiv.scrollLeft,w.footerrow&&(f.sDiv.scrollLeft=f.bDiv.scrollLeft))),w.autowidth||void 0!==w.widthOrg&&"auto"!==w.widthOrg&&"100%"!==w.widthOrg||d===!0||c.setGridWidth.call(k,f.newWidth+w.scrollOffset,!1),b||feedback.call(k[0],"resizeStop",j,a)},dragEnd:function(){var a=this;a.hDiv.style.cursor="default",a.resizing&&(null!==a.resizing&&a.resizing.moved===!0&&($(a.headers[a.resizing.idx].el).removeData("autoResized"),a.resizeColumn(a.resizing.idx,!1)),$(w.rs).removeData("pageX"),a.resizing=!1,setTimeout(function(){$(w.rs).css("display","none").prependTo(w.gBox)},w.doubleClickSensitivity)),a.curGbox=null,document.onselectstart=function(){return!0},$(document).off("mousemove.jqGrid mouseup.jqGrid"+w.id)},populateVisible:function(){var a=this,b=$(a),c=a.grid,d=c.bDiv,e=$(d);c.timer&&clearTimeout(c.timer),c.timer=null;var f=e.height();if(f){var g,h;if(a.rows.length)try{g=a.rows[1],h=g?$(g).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(a){h=c.prevRowHeight}if(h){c.prevRowHeight=h;var i=w.rowNum;c.scrollTop=d.scrollTop;var j,k,l,m=c.scrollTop,n=Math.round(b.position().top)-m,o=n+b.height(),p=h*i;if(o<f&&n<=0&&(void 0===w.lastpage||(parseInt((o+m+p-1)/p,10)||0)<=w.lastpage)&&(k=parseInt((f-o+p-1)/p,10)||1,o>=0||k<2||w.scroll===!0?(j=(Math.round((o+m)/p)||0)+1,n=-1):n=1),n>0&&(j=(parseInt(m/p,10)||0)+1,k=(parseInt((m+f)/p,10)||0)+2-j,l=!0),k){if(w.lastpage&&(j>w.lastpage||1===w.lastpage||j===w.page&&j===w.lastpage))return;c.hDiv.loading?c.timer=setTimeout(function(){c.populateVisible.call(a)},w.scrollTimeout):(w.page=j,l&&(c.selectionPreserver.call(a),c.emptyRows.call(a,!1,!1)),c.populate.call(a,k))}}}},scrollGrid:function(){if(w.scroll){var a=this.scrollTop;void 0===H.scrollTop&&(H.scrollTop=0),a!==H.scrollTop&&(H.scrollTop=a,H.timer&&clearTimeout(H.timer),H.timer=setTimeout(function(){H.populateVisible.call(e)},w.scrollTimeout))}return H.hDiv.scrollLeft=this.scrollLeft,w.footerrow&&(H.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var a=this,b=$(a),c=w.selrow,d=w.selarrrow?$.makeArray(w.selarrrow):null,e=a.grid.bDiv,f=e.scrollLeft,g=function(){var a;if(w.selrow=null,!w.multiPageSelection){if(clearArray(w.selarrrow),w.multiselect&&d&&d.length>0)for(a=0;a<d.length;a++)d[a]!==c&&m.call(b,d[a],!1,null);c&&m.call(b,c,!1,null)}e.scrollLeft=f,b.off(".selectionPreserver",g)};b.on("jqGridGridComplete.selectionPreserver",g)}};e.grid=H,feedback.call(e,"beforeInitGrid"),w.iColByName=A(w.colModel),w.iPropByName=C(w.additionalProperties);var I,J=$("<div class='"+u("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!w.multiselect+"'></div>"),K=jgrid.msie;w.direction=k(w.direction.toLowerCase()),j(w.direction,["ltr","rtl"])===-1&&(w.direction="ltr"),I=w.direction,$(J).insertBefore(e),f.removeClass("scroll").appendTo(J);var L=$("<div class='"+u("gBox","ui-jqgrid")+"'></div>");$(L).attr({id:w.gBoxId,dir:I}).insertBefore(J),$(J).attr("id",w.gViewId).appendTo(L),$("<div class='"+u("overlay","jqgrid-overlay")+"' id='lui_"+w.id+"'></div>").insertBefore(J),$("<div class='"+u("loading","loading")+"' id='load_"+w.id+"'>"+y("loadtext")+"</div>").insertBefore(J),f.attr({role:"presentation","aria-labelledby":"gbox_"+e.id});var M,N=["shiftKey","altKey","ctrlKey"],O=function(){var a,b,c,d=w.remapColumns,e=w.colModel,f=e.length,g=[];for(a=0;a<f;a++)c=e[a].name,j(c,w.reservedColumnNames)<0&&g.push(c);if(null!=d)for(b=g.slice(),a=0;a<d.length;a++)g[a]=b[d[a]];w.cmNamesInputOrder=g},P=function(a){return stripPref(w.idPrefix,a)},Q=function(a,b,c,d,f,h){var i,j,k,l,m,n,o,p=w.colModel[a],q=c,r=p.classes,s=p.align?"text-align:"+p.align+";":"",t=function(a){return"string"==typeof a?a.replace(/\'/g,"&#39;"):a},u=" aria-describedby='"+w.id+"_"+p.name+"'";if(p.hidden===!0&&(s+="display:none;"),0===b)s+="width: "+H.headers[a].width+"px;";else if((g(p.cellattr)||"string"==typeof p.cellattr&&null!=jgrid.cellattr&&g(jgrid.cellattr[p.cellattr]))&&(i=g(p.cellattr)?p.cellattr:jgrid.cellattr[p.cellattr],w.useUnformattedDataForCellAttr&&null!=h?q=h[p.name]:p.autoResizable&&(j="<span class='"+w.autoResizing.wrapperClassName+"'>",q=c.substring(j.length,c.length-"</span>".length)),l=i.call(e,f,q,d,p,h),"string"==typeof l))for(l=l.replace(/\n/g,"&#xA;");;){if(m=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(l),null===m||m.length<5)return!o&&p.title&&(o=q),u+" style='"+t(s)+"'"+(r?" class='"+t(r)+"'":"")+(o?" title='"+t(o)+"'":"");switch(n=m[3],l=m[4],m[1].toLowerCase()){case"class":r?r+=" "+n:r=n;break;case"title":o=n;break;case"style":s+=n;break;default:u+=" "+m[1]+"="+m[2]+n+m[2]}}return k=""!==s?"style='"+s+"'":"",k+=(void 0!==r?" class='"+r+"'":"")+(p.title&&q?" title='"+stripHtml(c).replace(/\'/g,"&apos;")+"'":""),k+=u},R=function(a){return null==a||""===a?"&#160;":w.autoencode?htmlEncode(a):String(a)},S=function(a){var b=w.treeReader,c=b.loaded,d=b.leaf_field,e=b.expanded_field,f=function(a){return a===!0||"true"===a||"1"===a};if("nested"===w.treeGridModel&&!a[d]){var g=parseInt(a[b.left_field],10),h=parseInt(a[b.right_field],10);a[d]=h===g+1}void 0!==a[c]&&(a[c]=f(a[c])),a[d]=f(a[d]),a[e]=f(a[e])},T=function(a,b,c,d,f,h){var i,j=w.colModel[c];if(void 0!==j.formatter){a=""!==String(w.idPrefix)?P(a):a;var k={rowId:a,colModel:j,gid:w.id,pos:c,rowData:h||d};i=g(j.cellBuilder)?j.cellBuilder.call(e,b,k,d,f):g(j.formatter)?j.formatter.call(e,b,k,d,f):$.fmatter?$.fn.fmatter.call(e,j.formatter,b,k,d,f):R(b)}else i=R(b);if(i=j.autoResizable&&"actions"!==j.formatter?"<span class='"+w.autoResizing.wrapperClassName+"'>"+i+"</span>":i,w.treeGrid&&"edit"!==f&&(null==w.ExpandColumn&&0===c||w.ExpandColumn===j.name)){null==h&&(h=w.data[w._index[a]]);var l=parseInt(h[w.treeReader.level_field]||0,10),m=18,n=parseInt(w.tree_root_level,10),o=0===n?l:l-1,p=h[w.treeReader.leaf_field],q=h[w.treeReader.expanded_field],r=h[w.treeReader.icon_field],s=p?(null!=r&&""!==r?r:w.treeIcons.leaf)+" tree-leaf":q?w.treeIcons.minus+" tree-minus":w.treeIcons.plus+" tree-plus";i="<div class='tree-wrap' style='width:"+(o+1)*m+"px;'><div class='"+mergeCssClasses(w.treeIcons.commonIconClass,s,"treeclick")+"' style='"+(w.ExpandColClick===!0?"cursor:pointer;":"")+("rtl"===w.direction?"margin-right:":"margin-left:")+o*m+"px;'></div></div><span class='cell-wrapper"+(p?"leaf":"")+"'"+(w.ExpandColClick?" style='cursor:pointer;'":"")+">"+i+"</span>";
}return i},U=function(a,b){var c=this,d=H.bDiv,e=null!=H.fbDiv?H.fbDiv.children(".ui-jqgrid-btable")[0]:null,f=function(a){if(a){var b=a.rows,c=b[0];if(w.deepempty)b&&$(b).slice(1).remove();else if(w.quickEmpty)if("quickest"===w.quickEmpty)a.replaceChild(document.createElement("tbody"),a.tBodies[0]),a.firstChild.appendChild(c);else for(;b.length>1;)a.deleteRow(b.length-1);else $(a.firstChild).empty().append(c)}};$(c).off(".jqGridFormatter"),f(c),f(e),a&&w.scroll&&($(d.firstChild).css({height:"auto"}),$(d.firstChild.firstChild).css({height:0,display:"none"}),0!==d.scrollTop&&(d.scrollTop=0)),b===!0&&w.treeGrid&&(clearArray(w.data),clearArray(w.lastSelectedData),w._index={},w.dataIndexById={},w.indexByColumnData={}),w.rowIndexes={},w.iRow=-1,w.iCol=-1},V=function(a,b){var c,d;for(c in w.indexByColumnData)w.indexByColumnData.hasOwnProperty(c)&&(d=a[c],a.hasOwnProperty(c)&&void 0!==d&&""!==d&&(w.ignoreCase&&(d=String(d).toLowerCase()),void 0===w.indexByColumnData[c][d]&&(w.indexByColumnData[c][d]={}),w.indexByColumnData[c][d][b]=a[c],void 0===w.dataIndexById[b]&&(w.dataIndexById[b]={}),void 0===w.dataIndexById[b][c]&&(w.dataIndexById[b][c]={}),w.dataIndexById[b][c][d]=w.indexByColumnData[c][d]))},W=function(a){var b,c,d,e=w.dataIndexById[a];if(null!=e){for(b in e)if(e.hasOwnProperty(b)){c=e[b];for(d in c)c.hasOwnProperty(d)&&(delete w.indexByColumnData[b][d][a],$.isEmptyObject(w.indexByColumnData[b][d])&&delete w.indexByColumnData[b][d])}delete w.dataIndexById[a]}},X=function(){var a,b,c,d,f,j,k,l,m,n,o,p,q=w.data,r=q.length,s=w.localReader,t=w.additionalProperties,u=s.cell,v=w.arrayReaderInfos;if("local"===w.datatype&&s.repeatitems===!0)for(d=w.keyName===!1?g(s.id)?s.id.call(e,q):s.id:w.keyName,isNaN(d)?g(d)||null!=w.arrayReaderInfos[d]&&(f=w.arrayReaderInfos[d].order):f=Number(d),a=0;a<r;a++){b=q[a],c=u?getAccessor(b,u)||b:b,n=h(c),k={};for(m in v)v.hasOwnProperty(m)&&(p=v[m],j=getAccessor(c,n?p.order:p.name),1===p.type&&(o=t[p.index],null!=o&&g(o.convert)&&(j=o.convert(j,c))),void 0!==j&&(k[m]=j));void 0!==k[d]?l=void 0!==k[d]?k[d]:randId():(l=getAccessor(b,h(b)?f:d),void 0===l&&(l=getAccessor(c,h(c)?f:d)),void 0===l&&(l=randId())),l=String(l),k[s.id]=l,w.treeGrid&&S(k),i(q[a],k)}else if(w.treeGrid)for(a=0;a<r;a++)S(q[a])},Y=function(){var a,b,c,d,e=w.data.length;for(a=w.keyName===!1||w.loadonce?w.localReader.id:w.keyName,w._index={},w.dataIndexById={},w.indexByColumnData=B(),b=0;b<e;b++)d=w.data[b],c=getAccessor(d,a),void 0===c&&(c=String(randId()),void 0===d[a]&&(d[a]=c)),w._index[c]=b,V.call(this,d,c)},Z=function(a,b,d,e,f,h){var i,j="-1",k="",l=b?"display:none;":"",m=this,n=u("gridRow","jqgrow ui-row-"+w.direction)+(d?" "+d:"")+(h?" "+u("states.select"):""),o=$(m).triggerHandler("jqGridRowAttr",[e,f,a]);if("object"!=typeof o&&(o=g(w.rowattr)?w.rowattr.call(m,e,f,a):"string"==typeof w.rowattr&&null!=jgrid.rowattr&&g(jgrid.rowattr[w.rowattr])?jgrid.rowattr[w.rowattr].call(m,e,f,a):{}),null!=o&&!$.isEmptyObject(o)){o.hasOwnProperty("id")&&(a=o.id,delete o.id),o.hasOwnProperty("tabindex")&&(j=o.tabindex,delete o.tabindex),o.hasOwnProperty("style")&&(l+=o.style,delete o.style),o.hasOwnProperty("class")&&(n+=" "+o.class,delete o.class);try{delete o.role}catch(a){}for(i in o)o.hasOwnProperty(i)&&(k+=" "+i+"="+o[i])}if(w.treeGrid&&parseInt(e[w.treeReader.level_field],10)!==parseInt(w.tree_root_level,10)){var p=c.getNodeParent.call($(this),e),q=!p||!p.hasOwnProperty(w.treeReader.expanded_field)||p[w.treeReader.expanded_field];q||b||(l+="display:none;")}return"<tr role='row' id='"+a+"' tabindex='"+j+"' class='"+n+"'"+(""===l?"":" style='"+l+"'")+k+">"},_=function(){var a,b,c=$.fn.fmatter;for(a=0;a<w.colModel.length;a++)b=w.colModel[a].formatter,"string"==typeof b&&null!=c&&g(c[b])&&g(c[b].pageFinalization)&&c[b].pageFinalization.call(this,a)},aa=function(a,b){var c,d,f,h=w.colModel,i=h.length,j=function(a){return null==a||""===a?"&#160;":htmlEncode(a)},k=function(a){return null==a||""===a?"&#160;":String(a)};for(c=0;c<i;c++)d=h[c],d.cellBuilder=null,a||(f={colModel:d,gid:w.id,pos:c},void 0===d.formatter?d.cellBuilder=w.autoencode?j:k:"string"==typeof d.formatter&&null!=$.fn.fmatter&&g($.fn.fmatter.getCellBuilder)?d.cellBuilder=$.fn.fmatter.getCellBuilder.call(e,d.formatter,f,b||"add"):g(d.getCellBuilder)&&(d.cellBuilder=d.getCellBuilder.call(e,f,b||"add")))},ba=function(a,b,d,e){var f=this,i=$(f),j=new Date,k=w.datatype,l="local"!==k&&w.loadonce||"xmlstring"===k||"jsonstring"===k,m=("xmlstring"===k||"xml"===k)&&$.isXMLDoc(a),n="_id_",o=w.localReader,p=getAccessor;if(a&&("xml"!==k||m)){switch(w.treeANode!==-1||w.scroll?b=b>1?b:1:(H.emptyRows.call(f,!1,!0),b=1),l&&(clearArray(w.data),clearArray(w.lastSelectedData),w._index={},w.grouping&&null!=w.groupingView&&(w.groupingView.groups=[],w.groupingView._locgr=!1),w.localReader.id=n),w.reccount=0,k){case"xml":case"xmlstring":o=w.xmlReader,p=jgrid.getXmlData;break;case"json":case"jsonp":case"jsonstring":o=w.jsonReader}var q,r,s,t,u,v,x,y,z,A,B,C,E,F={},I=w.colModel,J=I.length,K=w.arrayReaderInfos,L={},M=function(a){return function(b){var c=null!=b&&g(b.getAttribute)?b.getAttribute(a):null;return null!==c?c:void 0}},N=function(a){return function(){var b,c=L[a];if(null!=c)return b=c.childNodes,b.length>0?b[0].nodeValue:void 0}};w.page=G(p(a,o.page),w.page),w.lastpage=G(p(a,o.total),1),w.records=G(p(a,o.records)),g(o.userdata)?w.userData=o.userdata.call(f,a)||{}:m?p(a,o.userdata,!0).each(function(){w.userData[this.getAttribute("name")]=$(this).text()}):w.userData=p(a,o.userdata)||{},aa();var O,P,Q,R,T={},U=w.additionalProperties,W=function(a,b){m&&"string"==typeof b&&(/^\w+$/.test(b)?T[a]=N(b):/^\[\w+\]$/.test(b)&&(T[a]=M(b.substring(1,b.length-1))))},X=function(a){var b=a.name,c=m?a.xmlmap||b:"local"===k&&!w.dataTypeOrg||"jsonstring"===k||"json"===k||"jsonp"===k?a.jsonmap||b:b;w.keyName!==!1&&a.key===!0&&(w.keyName=b),("string"==typeof c||g(c))&&(T[b]=c),g(c)||W(b,c)};for(q=0;q<J;q++)X(I[q]);for(J=U.length,q=0;q<J;q++)Q=U[q],"object"==typeof Q&&null!=Q?X(Q):W(Q,Q);if(u=w.keyName===!1?g(o.id)?o.id.call(f,a):o.id:w.keyName,isNaN(u)?g(u)||(K[u]&&(v=K[u].order),m&&("string"==typeof u&&/^\[\w+\]$/.test(u)?u=M(u.substring(1,u.length-1)):"string"==typeof u&&/^\w+$/.test(u)&&(u=N(u)))):v=Number(u),t=p(a,o.root,!0),o.row)if(1===t.length&&"string"==typeof o.row&&/^\w+$/.test(o.row)){for(R=[],A=t[0].childNodes,B=A.length,z=0;z<B;z++)C=A[z],1===C.nodeType&&C.nodeName===o.row&&R.push(C);t=R}else t=p(t,o.row,!0);null==t&&h(a)&&(t=a),t||(t=[]),s=t.length,s>0&&w.page<=0&&(w.page=1);var Y=parseInt(w.rowNum,10);e&&(Y*=e+1);var Z,ba,ca=[],da=[];for(R=[],q=0;q<s;q++){if(ba=t[q],r=o.repeatitems&&o.cell?p(ba,o.cell,!0)||ba:ba,O=o.repeatitems&&(m||h(r)),F={},L={},m&&!O&&null!=r)for(A=r.childNodes,B=A.length,z=0;z<B;z++)C=A[z],1===C.nodeType&&(L[C.nodeName]=C);for(y in K)K.hasOwnProperty(y)&&(E=K[y],O?(P=r[E.order],m&&null!=P&&(P=P.textContent||P.text)):P=null!=T[y]&&"string"!=typeof T[y]?T[y](r):p(r,"string"==typeof T[y]?T[y]:E.name),1===E.type&&(Q=U[E.index],null!=Q&&g(Q.convert)&&(P=Q.convert(P,r))),void 0!==P&&(F[y]=P));if(void 0!==F[u]?Z=void 0!==F[u]?F[u]:randId():(Z=p(ba,h(ba)?v:u),void 0===Z&&(Z=p(r,h(r)?v:u)),void 0===Z&&(Z=randId())),void 0===F[u]&&(F[u]=Z),Z=String(Z),x=w.idPrefix+Z,w.treeGrid&&S(F),q<Y)da.push(x),ca.push(r),R.push(F);else if(!l)break;(l||w.treeGrid===!0)&&(F[n]=Z,w.data.push(F),V(F,Z),w._index[F[n]]=w.data.length-1)}if(l&&w.treeGrid!==!0){if(w.forceClientSorting)return;w.lastSelectedData=w.data.slice()}var ea=jgrid.parseDataToHtml.call(f,s,da,R,ca,b,e,l);aa(!0);var fa=w.treeANode>-1?w.treeANode:0,ga=$(f.tBodies[0]);if(w.treeGrid===!0&&fa>0?$(f.rows[fa]).after(ea.join("")):w.scroll?ga.append(ea.join("")):null==f.firstElementChild||void 0!==document.documentMode&&document.documentMode<=9?(ga.html(ga.html()+ea.join("")),f.grid.cols=f.rows[0].cells):(f.firstElementChild.innerHTML+=ea.join(""),f.grid.cols=f.rows[0].cells),w.grouping&&D.call(f),w.subGrid===!0)try{c.addSubGrid.call(i,w.iColByName.subgrid)}catch(a){}if(w.gridview===!1||g(w.afterInsertRow))for(q=0;q<Math.min(s,Y);q++)feedback.call(f,"afterInsertRow",da[q],R[q],ca[q]);if(w.totaltime=new Date-j,q>0&&0===w.records&&(w.records=s),clearArray(ea),w.treeGrid===!0)try{c.setTreeNode.call(i,fa+1,q+fa+1)}catch(a){}w.reccount=Math.min(s,Y),w.treeANode=-1,w.userDataOnFooter&&c.footerData.call(i,"set",w.userData,!0),l&&(w.records=s,w.lastpage=Math.ceil(s/Y)),d||f.updatepager(!1,!0),_.call(f)}},ca=function(){function a(b){var c,d,e,f,h,j,k,l=0;if(null!=b.groups){for(d=b.groups.length&&"OR"===b.groupOp.toString().toUpperCase(),d&&u.orBegin(),c=0;c<b.groups.length;c++){l>0&&d&&u.or();try{a(b.groups[c])}catch(a){o(a)}l++}d&&u.orEnd()}if(null!=b.rules)try{for(e=b.rules.length&&"OR"===b.groupOp.toString().toUpperCase(),e&&u.orBegin(),c=0;c<b.rules.length;c++)h=b.rules[c],f=b.groupOp.toString().toUpperCase(),t[h.op]&&h.field?(l>0&&f&&"OR"===f&&(u=u.or()),k=i[h.field],null!=k&&(j=k.reader,u=t[h.op](u,f)(g(j)?'jQuery.jgrid.getAccessor(this,jQuery("'+w.idSel+'")[0].p.colModel['+k.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+j+"')",h.data,i[h.field]))):null!=w.customSortOperations&&null!=w.customSortOperations[h.op]&&g(w.customSortOperations[h.op].filter)&&(u=u.custom(h.op,h.field,h.data)),l++;e&&u.orEnd()}catch(a){o(a)}}var b=$(this),d=w.multiSort?[]:"",e={},f=!1,i={},j=[],k=[],m=x("formatter.date.srcformat"),n=x("formatter.date.newformat");if(!h(w.data))return{};w.multiSort&&ka(d,e);var p,q,r=!!w.grouping&&w.groupingView,s=function(a,b,c){var e,g,h=a.index||a.name,l=a.sorttype||"text";if(i[a.name]={reader:w.dataTypeOrg?a.name:a.jsonmap||a.name,iCol:b,stype:l,srcfmt:"",newfmt:"",sfunc:a.sortfunc||null,isAddProp:c===!0},"date"!==l&&"datetime"!==l||(a.formatter&&"string"==typeof a.formatter&&"date"===a.formatter?(e=a.formatoptions&&a.formatoptions.srcformat?a.formatoptions.srcformat:m,g=a.formatoptions&&a.formatoptions.newformat?a.formatoptions.newformat:n):e=g=a.datefmt||"Y-m-d",i[a.name].srcfmt=e,i[a.name].newfmt=g),w.grouping)for(q=0,p=r.groupField.length;q<p;q++)a.name===r.groupField[q]&&(j[q]=i[h],k[q]=h);w.multiSort||f||a.index!==w.sortname&&a.name!==w.sortname||(d=a.name,f=!0)};if(l(w.colModel,function(a){s(this,a)}),l(w.additionalProperties,function(a){s("string"==typeof this?{name:this}:this,a,!0)}),w.treeGrid)return c.SortTree.call(b,d,w.sortorder,null!=i[d]&&i[d].stype?i[d].stype:"text",null!=i[d]&&i[d].srcfmt?i[d].srcfmt:""),!1;var t={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().inSet:a.andNot().inSet},in:function(a){return a.inSet},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},u=jgrid.from.call(this,w.data);if(w.ignoreCase&&(u=u.ignoreCase()),w.search===!0){var v=w.postData.filters;if(v)"string"==typeof v&&(v=$.parseJSON(v)),a(v);else try{var y=i[w.postData.searchField];u=t[w.postData.searchOper](u)(g(y.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+w.idSel+'")[0].p.colModel['+y.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+y.reader+"')",w.postData.searchString,i[w.postData.searchField])}catch(a){}}if(w.grouping)for(q=0;q<p;q++)u.orderBy(k[q],r.groupOrder[q],j[q].stype,j[q].srcfmt);w.multiSort?l(d,function(){u.orderBy(this,e[this],i[this].stype,i[this].srcfmt,i[this].sfunc)}):d&&w.sortorder&&f&&u.orderBy(w.sortname,"DESC"===w.sortorder.toUpperCase()?"d":"a",i[d].stype,i[d].srcfmt,i[d].sfunc),w.lastSelectedData=u.select();var z=parseInt(w.rowNum,10),A=w.lastSelectedData.length,B=parseInt(w.page,10),C=Math.ceil(A/z),D={};if(w.grouping&&w.groupingView._locgr){w.groupingView.groups=[];var E,F,G;if(w.footerrow&&w.userDataOnFooter){for(F in w.userData)w.userData.hasOwnProperty(F)&&(w.userData[F]=0);G=!0}for(E=0;E<A;E++){if(G)for(F in w.userData)w.userData.hasOwnProperty(F)&&(w.userData[F]+=parseFloat(w.lastSelectedData[E][F]||0));c.groupingPrepare.call(b,w.lastSelectedData[E],E,z)}}u=null,i=null;var H=w.localReader;return D[H.total]=C,D[H.page]=B,D[H.records]=A,D[H.root]=w.lastSelectedData.slice((B-1)*z,B*z),D[H.userdata]=w.userData,D},da=function(a){var b,c=this,d=a.outerWidth();return d<=0&&(b=$(c).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='"+u("gBox","ui-jqgrid")+"' style='font-size:"+b+";visibility:hidden;margin:0;padding:0;' ></div>"),$(a).clone().appendTo("#testpg"),d=$("#testpg>.ui-pg-table").width(),$("#testpg").remove()),d>0&&a.parent().width(d),d},ea=function(a,b){var c,d,e,f,g,h,i,j,k=this,l=$(k),m=k.grid,n=w.pager||"",o=w.pager?"_"+w.pager.substr(1):"",p=m.bDiv,q=$.fmatter?$.fmatter.NumberFormat:null,r=w.toppager?"_"+w.toppager.substr(1):"",s=u("states.hover"),t=u("states.disabled");if(e=parseInt(w.page,10)-1,e<0&&(e=0),e*=parseInt(w.rowNum,10),g=e+w.reccount,w.scroll){var v=$(getGridComponent(COMPONENT_NAMES.BODY_TABLE,p)[0].rows).slice(1);e=g-v.length,w.reccount=v.length;var z=v.outerHeight()||m.prevRowHeight;if(z){var A=e*z,B=jgrid.fixMaxHeightOfDiv.call(k,parseInt(w.records,10)*z);$(p).children("div").first().css({height:B+"px"}).children("div").first().css({height:A+"px",display:""}),0===p.scrollTop&&w.page>1&&(p.scrollTop=w.rowNum*(w.page-1)*z)}p.scrollLeft=m.hDiv.scrollLeft}if(n+=w.toppager?(n?",":"")+w.toppager:""){if(i=x("formatter.integer")||{},c=G(w.page),d=G(w.lastpage),$(".selbox",n).prop("disabled",!1),w.pginput===!0){var C=$(".ui-pg-input",n),D=String(w.page).length;C.val(w.page),C.each(function(){var a=parseInt($(this).attr("size"),10);a>0&&a<D&&$(this).attr("size",D)}),j=w.toppager?"#sp_1"+o+",#sp_1"+r:"#sp_1"+o,$(j).html($.fmatter?q(w.lastpage,i):w.lastpage).closest(".ui-pg-table").each(function(){da.call(k,$(this))})}w.viewrecords&&(0===w.reccount?$(".ui-paging-info",n).html(y("emptyrecords")):(f=e+1,h=w.records,$.fmatter&&(f=q(f,i),g=q(g,i),h=q(h,i)),$(".ui-paging-info",n).html(jgrid.format(y("recordtext"),f,g,h)))),w.pgbuttons===!0&&(d<=0&&(c=0),c<=0&&(c=d=0),1===c||0===c?($("#first"+o+", #prev"+o).addClass(t).removeClass(s),w.toppager&&$("#first_t"+r+", #prev_t"+r).addClass(t).removeClass(s)):($("#first"+o+", #prev"+o).removeClass(t),w.toppager&&$("#first_t"+r+", #prev_t"+r).removeClass(t)),c===d||0===c?($("#next"+o+", #last"+o).addClass(t).removeClass(s),w.toppager&&$("#next_t"+r+", #last_t"+r).addClass(t).removeClass(s)):($("#next"+o+", #last"+o).removeClass(t),w.toppager&&$("#next_t"+r+", #last_t"+r).removeClass(t)))}a===!0&&w.rownumbers===!0&&$(">td.jqgrid-rownum",k.rows).each(function(a){$(this).html(e+1+a)}),b&&w.jqgdnd&&l.jqGrid("gridDnD","updateDnD"),feedback.call(k,"gridComplete"),l.triggerHandler("jqGridAfterGridComplete")},fa=function(){var a=this;a.grid.hDiv.loading=!0,w.hiddengrid||c.progressBar.call($(a),{method:"show",loadtype:w.loadui,htmlcontent:y("loadtext")})},ga=function(){var a=this;a.grid.hDiv.loading=!1,c.progressBar.call($(a),{method:"hide",loadtype:w.loadui})},ha=function(a){var b=this,d=$(b),f=b.grid;if(!f.hDiv.loading){var h,j,k=w.scroll&&a===!1,l={},m=w.prmNames;w.page<=0&&(w.page=Math.min(1,w.lastpage)),null!==m.search&&(l[m.search]=w.search),null!==m.nd&&(l[m.nd]=(new Date).getTime()),(isNaN(parseInt(w.rowNum,10))||parseInt(w.rowNum,10)<=0)&&(w.rowNum=w.maxRowNum),null!==m.rows&&(l[m.rows]=w.rowNum),null!==m.page&&(l[m.page]=w.page),null!==m.sort&&(l[m.sort]=w.sortname),null!==m.order&&(l[m.order]=w.sortorder),null!==w.rowTotal&&null!==m.totalrows&&(l[m.totalrows]=w.rowTotal);var n=g(w.loadComplete),o=n?w.loadComplete:null,p=0;if(a=a||1,a>1?null!==m.npage?(l[m.npage]=a,p=a-1,a=1):o=function(c){w.page++,f.hDiv.loading=!1,n&&w.loadComplete.call(b,c),ha.call(b,a-1)}:null!==m.npage&&delete w.postData[m.npage],w.grouping&&c.groupingSetup){c.groupingSetup.call(d);var q,r,s,t,u=w.groupingView,v="";for(q=0;q<u.groupField.length;q++){for(r=u.groupField[q],s=0;s<w.colModel.length;s++)t=w.colModel[s],t.name===r&&t.index&&(r=t.index);v+=r+" "+u.groupOrder[q]+", "}l[m.sort]=v+l[m.sort]}i(w.postData,l);var x=w.scroll?b.rows.length-1:1,y=function(){z.call(b),w.autowidth||void 0!==w.widthOrg&&"auto"!==w.widthOrg&&"100%"!==w.widthOrg||c.setGridWidth.call(d,w.tblwidth+w.scrollOffset,!1)},A=function(){var a;if(w.autoresizeOnLoad)c.autoResizeAllColumns.call(d),clearArray(w.columnsToReResizing),w.autowidth&&c.setGridWidth.call(d,d.closest(".ui-jqgrid").parent().width(),!0);else{for(a=0;a<w.columnsToReResizing.length;a++)c.autoResizeColumn.call(d,w.columnsToReResizing[a]);clearArray(w.columnsToReResizing)}},B=function(){feedback.call(b,"loadComplete",j),A(),d.triggerHandler("jqGridAfterLoadComplete",[j]),ga.call(b),w.datatype="local",w.datastr=null,y()},C=function(c){d.triggerHandler("jqGridLoadComplete",[c]),o&&o.call(b,c),A(),d.triggerHandler("jqGridAfterLoadComplete",[c]),k&&f.populateVisible.call(b),1===a&&ga.call(b),y()},D=function(){var c=ca.call(b);ba.call(b,c,x,a>1,p),C(c)};if(!feedback.call(b,"beforeRequest"))return;if(g(w.datatype))return void w.datatype.call(b,w.postData,"load_"+w.id,x,a,p);switch(h=w.datatype.toLowerCase(),$(H.eDiv).hide(),h){case"json":case"jsonp":case"xml":case"script":$.ajax(i({url:w.url,type:w.mtype,dataType:h,data:jgrid.serializeFeedback.call(e,w.serializeGridData,"jqGridSerializeGridData",w.postData),success:function(c,d,e){return w.jqXhr=null,$(H.eDiv).hide(),g(w.beforeProcessing)&&w.beforeProcessing.call(b,c,d,e)===!1?void ga.call(b):(ba.call(b,c,x,a>1,p),C(c),void((w.loadonce||w.treeGrid)&&(w.dataTypeOrg=w.datatype,w.datatype="local",w.forceClientSorting&&D())))},error:function(c,d,e){w.jqXhr=null,g(w.loadError)&&w.loadError.call(b,c,d,e),1===a&&ga.call(b)},beforeSend:function(a,c){var d=!0;return g(w.loadBeforeSend)&&(d=w.loadBeforeSend.call(b,a,c)),void 0===d&&(d=!0),d!==!1&&(w.jqXhr=a,void fa.call(b))}},jgrid.ajaxOptions,w.ajaxGridOptions));break;case"xmlstring":fa.call(b),j="string"==typeof w.datastr?$.parseXML(w.datastr):w.datastr,ba.call(b,j),B(),w.forceClientSorting&&D();break;case"jsonstring":fa.call(b),j=w.datastr&&"string"==typeof w.datastr?$.parseJSON(w.datastr):w.datastr,ba.call(b,j),B(),w.forceClientSorting&&D();break;case"local":case"clientside":fa.call(b),w.datatype="local",D()}}},ia=function(a){var b=this,c=b.grid;$(w.cb,c.hDiv).prop("checked",a),w.frozenColumns&&$(w.cb,c.fhDiv).prop("checked",a)},ja=function(a,b){var c,d,f,g,h,i,j=u("states.hover"),k=u("states.disabled"),l="<td class='ui-pg-button "+k+"'><span class='ui-separator'></span></td>",m="",n="left"===w.pagerpos?"margin-right:auto;":"right"===w.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;",o="<table style='table-layout:auto;white-space: pre;"+n+"' class='ui-pg-table'><tbody><tr>",p="",q=function(a,b,c){return!!feedback.call(e,"onPaging",a,{newPage:b,currentPage:G(w.page,1),lastPage:G(w.lastpage,1),currentRowNum:G(w.rowNum,10),newRowNum:c})&&(w.selrow=null,w.multiselect&&(w.multiPageSelection||clearArray(w.selarrrow),ia.call(e,!1)),clearArray(w.savedRow),!0)};if(b+="_"+a,c="pg_"+a,d=a+"_left",f=a+"_center",g=a+"_right",$("#"+jqID(a)).append("<div id='"+c+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+d+"' class='ui-jqgrid-pg-left'"+(void 0!==w.pagerLeftWidth?" style='width:"+w.pagerLeftWidth+"px;'":"")+"></td><td id='"+f+"' class='ui-jqgrid-pg-center'"+(void 0!==w.pagerCenterWidth?" style='width:"+w.pagerCenterWidth+"px;'":"")+"></td><td id='"+g+"' class='ui-jqgrid-pg-right'"+(void 0!==w.pagerRightWidth?" style='width:"+w.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),c="#"+jqID(c),w.rowList.length>0){p="<td dir='"+I+"'>";var r=y("pgrecs");p+="<select class='"+u("pager.pagerSelect","ui-pg-selbox")+"' "+(r?"title='"+r+"'":"")+">";var s;for(i=0;i<w.rowList.length;i++)s=w.rowList[i].toString().split(":"),1===s.length&&(s[1]=s[0]),p+="<option value='"+s[0]+"'"+(G(w.rowNum,0)===G(s[0],0)?" selected='selected'":"")+">"+s[1]+"</option>";p+="</select></td>"}if("rtl"===I&&(o+=p),w.pginput===!0&&(m="<td dir='"+I+"'>"+jgrid.format(y("pgtext")||"","<input aria-label='Page No.' class='"+u("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+a+"'>0</span>")+"</td>"),a="#"+jqID(a),w.pgbuttons===!0){var v=["first","prev","next","last"],x=v.slice(),z=u("pager.pagerButton","ui-pg-button"),A=function(a,c){var d=y("pg"+a);return"<td role='button' tabindex='0' id='"+a+b+"' class='"+z+"' "+(d?"title='"+d+"'":"")+"><span class='"+t("pager."+c)+"'></span></td>"};for("rtl"===I&&v.reverse(),i=0;i<v.length;i++)o+=A(v[i],x[i]),1===i&&(o+=""!==m?l+m+l:"")}else""!==m&&(o+=m);"ltr"===I&&(o+=p),o+="</tr></tbody></table>",w.viewrecords===!0&&$("td"+a+"_"+w.recordpos,c).append("<span dir='"+I+"' style='text-align:"+w.recordpos+"' class='ui-paging-info'></span>");var B=$("td"+a+"_"+w.pagerpos,c);B.append(o),h=da.call(this,B.children(".ui-pg-table")),w._nvtd=[],w._nvtd[0]=h?Math.floor((w.width-h)/2):Math.floor(w.width/3),w._nvtd[1]=0,o=null,$(".ui-pg-selbox",c).on("change",function(){var a=G(this.value,10),b=Math.round(w.rowNum*(w.page-1)/a-.5)+1;return!!q("records",b,a)&&(w.page=b,w.rowNum=a,w.pager&&$(".ui-pg-selbox",w.pager).val(a),w.toppager&&$(".ui-pg-selbox",w.toppager).val(a),ha.call(e),!1)}),w.pgbuttons===!0&&($(".ui-pg-button",c).hover(function(){hasOneFromClasses(this,k)?this.style.cursor="default":($(this).addClass(j),this.style.cursor="pointer")},function(){hasOneFromClasses(this,k)||($(this).removeClass(j),this.style.cursor="default")}),$("#first"+jqID(b)+", #prev"+jqID(b)+", #next"+jqID(b)+", #last"+jqID(b)).click(function(){if(hasOneFromClasses(this,k))return!1;var a=G(w.page,1),c=a,d=this.id,f=G(w.lastpage,1),g=!1,h=!0,i=!0,j=!0,l=!0;return 0===f||1===f?(a<=1&&(h=!1,i=!1),j=!1,l=!1):f>1&&a>=1?1===a?(h=!1,i=!1):a===f&&(j=!1,l=!1):f>1&&0===a&&(j=!1,l=!1,a=f-1),this.id==="first"+b&&h&&(d="first",c=1,g=!0),this.id==="prev"+b&&i&&(d="prev",c=a-1,g=!0),this.id==="next"+b&&j&&(d="next",c=a+1,g=!0),this.id==="last"+b&&l&&(d="last",c=f,g=!0),!!q(d,c,G(w.rowNum,10))&&(w.page=c,g&&ha.call(e),!1)})),w.pginput===!0&&$("input.ui-pg-input",c).on("keypress.jqGrid",function(a){var b=a.charCode||a.keyCode||0,c=G($(this).val(),1);return 13===b?!!q("user",c,G(w.rowNum,10))&&($(this).val(c),w.page=$(this).val()>0?$(this).val():w.page,ha.call(e),!1):this}),B.children(".ui-pg-table").on("keydown.jqGrid",function(a){var b;13===a.which&&(b=B.find(":focus"),b.length>0&&b.trigger("click"))})},ka=function(a,b,c){if(l((w.sortname+" "+w.sortorder).split(","),function(){var b=$.trim(this).split(" ");2===b.length&&a.push(b[0])}),null!=c){var d=$.inArray(c.index||c.name,a);""!==c.lso&&d<0?a.push(c.index||c.name):""===c.lso&&d>=0&&a.splice(d,1)}l(w.colModel,function(){var c,d=this.index||this.name;this.lso&&(c=this.lso.split("-"),$.inArray(d,a)<0&&a.push(d),b[d]=c[c.length-1])})},la=function(a,b){var c,d="",f=w.colModel[a],g=u("states.disabled"),h=$(w.frozenColumns?b:e.grid.headers[a].el),i=h.find("span.s-ico"),j=i.children("span.ui-icon-asc"),k=i.children("span.ui-icon-desc"),m=j,n=k,o=[],p={};h.find("span.ui-grid-ico-sort").addClass(g),h.attr("aria-selected","false"),f.lso?(i.show(),c=f.lso.split("-"),c=c[c.length-1],"desc"===c&&(m=k,n=j),m.removeClass(g).css("display",""),w.showOneSortIcon&&n.hide(),h.attr("aria-selected","true")):w.viewsortcols[0]||i.hide(),ka(o,p,f),l(o,function(){d.length>0&&(d+=", "),d+=this+" "+p[this],w.sortorder=p[this]}),w.sortname=d.substring(0,d.length-w.sortorder.length-1)},ma=function(a,b,d,e,f){var g=this,h=g.grid,i=w.colModel[b],j=u("states.disabled");if(null!=i&&i.sortable&&!(w.savedRow.length>0)){if(d||(w.lastsort===b&&""!==w.sortname?("asc"===w.sortorder?w.sortorder="desc":"desc"===w.sortorder?w.sortorder="asc":w.sortorder=i.firstsortorder||"asc",i.lso?"asc"===i.lso?i.lso+="-desc":"desc"===i.lso?i.lso+="-asc":"asc-desc"!==i.lso&&"desc-asc"!==i.lso||!w.threeStateSort&&!w.multiSort||(i.lso=""):i.lso=i.firstsortorder||"asc"):i.lso=w.sortorder=i.firstsortorder||"asc",w.page=1),w.multiSort)la(b,f);else{if(e){if(w.lastsort===b&&w.sortorder===e&&!d)return;w.sortorder=e}var k=h.headers,l=h.fhDiv,m=k[w.lastsort]?$(k[w.lastsort].el):$(),n=$(w.frozenColumns?f:k[b].el),o=n.find("span.s-ico"),p=o.children("span.ui-icon-"+w.sortorder),q=o.children("span.ui-icon-"+("asc"===w.sortorder?"desc":"asc"));i=w.colModel[w.lastsort],m.find("span.ui-grid-ico-sort").addClass(j),m.attr("aria-selected","false"),w.frozenColumns&&(l.find("span.ui-grid-ico-sort").addClass(j),l.find("th").attr("aria-selected","false")),w.viewsortcols[0]||(w.lastsort!==b?(w.frozenColumns&&l.find("span.s-ico").hide(),m.find("span.s-ico").hide(),o.show()):""===w.sortname&&o.show()),w.lastsort!==b&&"true"===m.data("autoResized")&&(null!=i&&null!=i.autoResizing&&i.autoResizing.compact||w.autoResizing.compact)&&w.columnsToReResizing.push(w.lastsort),i=w.colModel[b],o.css("display",""),""!==i.lso?(p.removeClass(j).css("display",""),w.showOneSortIcon&&q.removeClass(j).hide(),n.attr("aria-selected","true")):(n.attr("aria-selected","false"),w.threeStateSort&&(w.sortorder="",w.viewsortcols[0]||o.hide())),w.lastsort!==b&&"true"===n.data("autoResized")&&(null!=i&&null!=i.autoResizing&&i.autoResizing.compact||w.autoResizing.compact)&&w.columnsToReResizing.push(b),a=a.substring(5+w.id.length+1),w.sortname=i.index||a}if(!feedback.call(g,"onSortCol",w.sortname,b,w.sortorder))return void(w.lastsort=b);if("local"===w.datatype?w.deselectAfterSort&&!w.multiPageSelection&&c.resetSelection.call($(g)):w.multiPageSelection||(w.selrow=null,w.multiselect&&(ia.call(g,!1),clearArray(w.selarrrow))),clearArray(w.savedRow),w.scroll){var r=h.bDiv.scrollLeft;H.emptyRows.call(g,!0,!1),h.hDiv.scrollLeft=r}w.subGrid&&"local"===w.datatype&&$("td.sgexpanded","#"+jqID(w.id)).each(function(){$(this).trigger("click")}),ha.call(g),w.lastsort=b,w.sortname!==a&&b&&(w.lastsort=b)}},na=function(){var a,b,c,d,e=0,f=jgrid.cell_width?0:G(w.cellLayout,0),g=0,h=G(w.scrollOffset,0),i=!1,k=0,m=jgrid.isCellClassHidden;l(w.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),w.grouping&&w.autowidth){var a=j(this.name,w.groupingView.groupField);a>=0&&w.groupingView.groupColumnShow.length>a&&(this.hidden=!w.groupingView.groupColumnShow[a])}this.widthOrg=b=G(this.width,0),this.hidden!==!1||m(this.classes)||(e+=b+f,this.fixed?k+=b+f:g++)}),isNaN(w.width)&&(w.width=e+(w.shrinkToFit!==!1||isNaN(w.height)?0:h)),H.width=w.width,w.tblwidth=e,w.shrinkToFit===!1&&w.forceFit===!0&&(w.forceFit=!1),w.shrinkToFit===!0&&g>0&&(c=H.width-f*g-k,isNaN(w.height)||(c-=h,i=!0),e=0,l(w.colModel,function(d){this.hidden!==!1||m(this.classes)||this.fixed||(b=Math.round(c*this.width/(w.tblwidth-f*g-k)),this.width=b,e+=b,a=d)}),d=0,i?H.width-k-(e+f*g)!==h&&(d=H.width-k-(e+f*g)-h):i||1===Math.abs(H.width-k-(e+f*g))||(d=H.width-k-(e+f*g)),w.colModel[a].width+=d,w.tblwidth=e+d+f*g+k,w.tblwidth>w.width&&(w.colModel[a].width-=w.tblwidth-parseInt(w.width,10),w.tblwidth=w.width))},oa=function(a){var b,c=a,d=a;for(b=a+1;b<w.colModel.length;b++)if(w.colModel[b].hidden!==!0){d=b;break}return d-c},pa=function(a){return w.iColByName[(a.id||"").substring(w.id.length+1)]};j(w.multikey,N)===-1&&(w.multikey=!1),w.keyName=!1,w.sortorder=w.sortorder.toLowerCase(),jgrid.cell_width=jgrid.cellWidth();var qa,ra,sa=jgrid.cmTemplate;for(qa=0;qa<w.colModel.length;qa++)ra=w.colModel[qa],M="string"==typeof ra.template?null==sa||"object"!=typeof sa[ra.template]&&!$.isFunction(sa[ra.template])?{}:sa[ra.template]:ra.template,g(M)&&(M=M.call(e,{cm:ra,iCol:qa})),ra=i(!0,{},w.cmTemplate,M||{},ra),w.keyName===!1&&ra.key===!0&&(w.keyName=ra.name),w.colModel[qa]=ra;for(w.indexByColumnData=B(),qa=0;qa<w.additionalProperties.length;qa++)ra=w.additionalProperties[qa],w.keyName===!1&&ra.key===!0&&(w.keyName=ra.name);if(0===w.colNames.length)for(qa=0;qa<w.colModel.length;qa++)w.colNames[qa]=void 0!==w.colModel[qa].label?w.colModel[qa].label:w.colModel[qa].name;if(w.colNames.length!==w.colModel.length)return void o(x("errors.model"));if(w.grouping===!0&&(w.scroll=!1,w.rownumbers=!1,w.treeGrid=!1,w.gridview=!0),w.subGrid&&g(c.setSubGrid))try{c.setSubGrid.call(f)}catch(a){}if(w.multiselect&&("left"===w.multiselectPosition||"right"===w.multiselectPosition)){var ta="left"===w.multiselectPosition?"unshift":"push";w.colNames[ta]("<input id='"+w.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),w.colModel[ta]({name:"cb",width:jgrid.cell_width?w.multiselectWidth+w.cellLayout:w.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})}if(w.rownumbers&&(w.colNames.unshift(""),w.colModel.unshift({name:"rn",width:jgrid.cell_width?w.rownumWidth+w.cellLayout:w.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),w.iColByName=A(w.colModel),w.xmlReader=i(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},w.xmlReader),w.jsonReader=i(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},w.jsonReader),w.localReader=i(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},w.localReader),w.scroll&&(w.pgbuttons=!1,w.pginput=!1,w.rowList=[]),w.treeGrid===!0){try{c.setTreeGrid.call(f)}catch(a){}"local"!==w.datatype&&(w.localReader={id:"_id_"}),w.iPropByName=C(w.additionalProperties)}if(O(),E(),w.data.length&&(X.call(e),Y.call(e)),w.shrinkToFit===!0&&w.forceFit===!0)for(qa=w.colModel.length-1;qa>=0;qa--)if(w.colModel[qa].hidden!==!0){w.colModel[qa].resizable=!1;break}var ua,va,wa,xa,ya,za,Aa,Ba,Ca=[],Da=[],Ea=[],Fa="<thead><tr class='ui-jqgrid-labels' role='row'>",Ga="<tbody><tr style='display:none;'>",Ha=u("states.hover"),Ia=u("states.disabled");if(w.multiSort){Ca=w.sortname.split(",");var Ja;for(Ja=0;Ja<Ca.length;Ja++)Ea=k(Ca[Ja]).split(" "),Ca[Ja]=k(Ea[0]),Da[Ja]=Ea[1]?k(Ea[1]):w.sortorder||"asc"}for(qa=0;qa<w.colNames.length;qa++){switch(ra=w.colModel[qa],ya=w.headertitles||ra.headerTitle?" title='"+stripHtml("string"==typeof ra.headerTitle?ra.headerTitle:w.colNames[qa])+"'":"",Fa+="<th id='"+w.id+"_"+ra.name+"' class='"+u("colHeaders","ui-th-column ui-th-"+I+" "+(ra.labelClasses||""))+"'"+ya+">",ua=ra.index||ra.name,ra.labelAlign){case"left":za="text-align:left;";break;case"right":za="text-align:right;"+(ra.sortable===!1?"":"padding-right:"+w.autoResizing.widthOfVisiblePartOfSortIcon+"px;");break;case"likeData":za=void 0===ra.align||"left"===ra.align?"text-align:left;":"right"===ra.align?"text-align:right;"+(ra.sortable===!1?"":"padding-right:"+w.autoResizing.widthOfVisiblePartOfSortIcon+"px;"):"";break;default:za=""}Fa+="<div id='jqgh_"+w.id+"_"+ra.name+"'"+(K?" class='ui-th-div-ie'":"")+(""===za?"":" style='"+za+"'")+" role='columnheader'>",Ba=ra.autoResizable&&"actions"!==ra.formatter?"<span class='"+w.autoResizing.wrapperClassName+"'>"+w.colNames[qa]+"</span>":w.colNames[qa],w.sortIconsBeforeText?(Fa+=(w.builderSortIcons||jgrid.builderSortIcons).call(e,qa),Fa+=Ba):(Fa+=Ba,Fa+=(w.builderSortIcons||jgrid.builderSortIcons).call(e,qa)),Fa+="</div></th>",Ga+="<td></td>",ra.width=ra.width?parseInt(ra.width,10):150,"boolean"!=typeof ra.title&&(ra.title=!0),ra.lso="",ua===w.sortname&&(w.lastsort=qa,ra.lso=w.sortorder||ra.firstsortorder||"asc"),w.multiSort&&(Ea=j(ua,Ca),Ea!==-1&&(ra.lso=Da[Ea]));
}Fa+="</tr></thead>",Ga+="</tr></tbody>";var Ka=$("<table class='"+u("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+w.id+"'>"+Fa+Ga+"</table>");if($(Ka[0].tHead).children("tr").children("th").hover(function(){$(this).addClass(Ha)},function(){$(this).removeClass(Ha)}),w.multiselect&&$(w.cb,Ka).on("click",function(){var a,b,c=u("states.select"),d=[],f=w.iColByName.cb,g=function(a,b){$(a)[b?"addClass":"removeClass"](c).attr(b?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==f&&$(a.cells[f]).children("input.cbox").prop("checked",b)},h=H.fbRows,i=Ia+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",j=w._index;if(clearArray(w.selarrrow),this.checked){if(a=!0,w.selrow=e.rows.length>1?e.rows[e.rows.length-1].id:null,w.multiPageSelection&&("local"===w.datatype||w.treeGrid)&&null!=w.data&&w.data.length>0&&null!=j)for(b in j)j.hasOwnProperty(b)&&w.selarrrow.push(w.idPrefix+b)}else a=!1,w.selrow=null;var k=a?w.selarrrow:d;$(e.rows).each(function(b){hasOneFromClasses(this,i)||(g(this,a),$.inArray(this.id,k)<0&&k.push(this.id),h&&g(h[b],a))}),feedback.call(e,"onSelectAll",a?w.selarrrow:d,a)}),w.autowidth===!0){var La=Math.floor($(L).innerWidth());w.width=La>0?La:"nw"}isNaN(w.width)?isNaN(parseFloat(w.width))||(w.width=parseFloat(w.width)):w.width=Number(w.width),w.widthOrg=w.width,na(),$(L).css("width",H.width+"px").append("<div class='"+u("resizer","ui-jqgrid-resize-mark")+"' id='"+w.rsId+"'>&#160;</div>"),$(w.rs).on("selectstart",function(){return!1}).click(F).dblclick(function(a){var b=$(this).data("idx"),d=$(this).data("pageX"),g=w.colModel[b];if(null==d||null==g)return!1;var h=String(d).split(";"),i=parseFloat(h[0]),j=parseFloat(h[1]);return(2!==h.length||!(Math.abs(i-j)>5||Math.abs(a.pageX-i)>5||Math.abs(a.pageX-j)>5))&&(feedback.call(e,"resizeDblClick",b,g,a)&&g.autoResizable&&c.autoResizeColumn.call(f,b),feedback.call(e,"afterResizeDblClick",{iCol:b,cm:g,cmName:g.name}),!1)}),$(J).css("width",H.width+"px");var Ma="";w.footerrow&&(Ma+="<table role='presentation' style='width:1px' class='"+u("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+u("rowFooter","footrow footrow-"+I)+"'>");var Na="<tr class='"+u("gridRow","jqgfirstrow ui-row-"+w.direction)+"' role='row' style='height:auto'>";if(w.disableClick=!1,$("th",Ka[0].tHead.rows[0]).each(function(a){var b=w.colModel[a],c=b.name,d=$(this),e=d.children("div"),f=e.children("span.s-ico"),g=w.showOneSortIcon;va=b.width,void 0===b.resizable&&(b.resizable=!0),b.resizable?(wa=document.createElement("span"),$(wa).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+I).on("selectstart",function(){return!1}),d.addClass(w.resizeclass)):wa="",d.css("width",va+"px").prepend(wa),wa=null;var h="";if(b.hidden===!0&&(d.css("display","none"),h="display:none;"),Na+="<td role='gridcell' "+(b.classes?"class='"+b.classes+"' ":"")+"style='height:0;width:"+va+"px;"+h+"'></td>",H.headers[a]={width:va,el:this},xa=b.sortable,"boolean"!=typeof xa&&(b.sortable=!0,xa=!0),"cb"!==c&&"subgrid"!==c&&"rn"!==c&&xa&&w.viewsortcols[2]&&e.addClass("ui-jqgrid-sortable"),xa)if(w.multiSort){var i="desc"===b.lso?"asc":"desc";w.viewsortcols[0]?(f.css("display",""),b.lso&&(f.children("span.ui-icon-"+b.lso).removeClass(Ia),g&&f.children("span.ui-icon-"+i).hide())):b.lso&&(f.css("display",""),f.children("span.ui-icon-"+b.lso).removeClass(Ia),g&&f.children("span.ui-icon-"+i).hide())}else{var j="desc"===w.sortorder?"asc":"desc";w.viewsortcols[0]?(f.css("display",""),a===w.lastsort&&(f.children("span.ui-icon-"+w.sortorder).removeClass(Ia),g&&f.children("span.ui-icon-"+j).hide())):a===w.lastsort&&""!==b.lso&&(f.css("display",""),f.children("span.ui-icon-"+w.sortorder).removeClass(Ia),g&&f.children("span.ui-icon-"+j).hide())}w.footerrow&&(Ma+="<td role='gridcell' "+Q(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){var b,c=$(this),d=c.closest(".ui-jqgrid-hdiv").hasClass("frozen-div"),e=function(){var a=[c.position().left+c.outerWidth()];return"rtl"===w.direction&&(a[0]=w.width-a[0]),a[0]-=d?0:H.bDiv.scrollLeft,a.push($(H.hDiv).position().top),a.push($(H.bDiv).offset().top-$(H.hDiv).offset().top+$(H.bDiv).height()+(H.sDiv?$(H.sDiv).height():0)),a};if(1===$(a.target).closest("th>span.ui-jqgrid-resize").length)return b=pa(this),null!=b&&(w.forceFit===!0&&(w.nv=oa(b)),H.dragStart(b,a,e(),c)),!1}).click(function(a){if(w.disableClick)return w.disableClick=!1,!1;var b,c,d="th.ui-th-column>div";d+=w.viewsortcols[2]?".ui-jqgrid-sortable":">span.s-ico>span.ui-grid-ico-sort";var f=$(a.target).closest(d);if(1===f.length){w.viewsortcols[2]||(b=!0,c=f.hasClass("ui-icon-desc")?"desc":"asc");var g=pa(this);return null!=g&&ma.call(e,$("div",this)[0].id,g,b,c,this),!1}}),w.sortable&&g(c.sortableColumns))try{c.sortableColumns.call(f,$(Ka[0].tHead.rows[0]))}catch(a){}w.footerrow&&(Ma+="</tr></tbody></table>"),Na+="</tr>",f.html("<tbody>"+Na+"</tbody>"),f.addClass(u("grid","ui-jqgrid-btable"+(w.altRows===!0&&f.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var Oa=!(!w.caption||w.hiddengrid!==!0),Pa=$("<div class='ui-jqgrid-hbox"+("rtl"===I?"-rtl":"")+"'></div>"),Qa=u("top"),Ra=u("bottom");if(H.hDiv=document.createElement("div"),$(H.hDiv).css({width:H.width+"px"}).addClass(u("hDiv","ui-jqgrid-hdiv")).append(Pa).scroll(function(){var a=$(this).next(".ui-jqgrid-bdiv")[0];return a&&(a.scrollLeft=this.scrollLeft),!1}),$(Pa).append(Ka),Ka=null,Oa&&$(H.hDiv).hide(),w.rowNum=parseInt(w.rowNum,10),(isNaN(w.rowNum)||w.rowNum<=0)&&(w.rowNum=w.maxRowNum),w.pager){var Sa,Ta;"string"==typeof w.pager&&"#"!==w.pager.substr(0,1)?(Ta=w.pager,Sa=$("#"+jqID(w.pager))):w.pager===!0?(Ta=randId(),Sa=$("<div id='"+Ta+"'></div>"),Sa.appendTo("body"),w.pager="#"+jqID(Ta)):(Sa=$(w.pager),Ta=Sa.attr("id")),Sa.length>0?(Sa.css({width:H.width+"px"}).addClass(u("pager.pager","ui-jqgrid-pager "+Ra)).appendTo(L),Oa&&Sa.hide(),ja.call(e,Ta,""),w.pager="#"+jqID(Ta)):w.pager=""}w.cellEdit===!1&&w.hoverrows===!0&&f.on("mouseover.jqGrid",function(a){Aa=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(Aa).attr("class")&&$(Aa).addClass(Ha)}).on("mouseout.jqGrid",function(a){Aa=$(a.target).closest("tr.jqgrow"),$(Aa).removeClass(Ha)});var Ua,Va,Wa,Xa=function(a){var b,c,d;do if(b=$(a).closest("td"),b.length>0){if(c=b.parent(),d=c.parent().parent(),c.is(".jqgrow")&&(d[0]===this||d.is("table.ui-jqgrid-btable")&&(d[0].id||"").replace("_frozen","")===this.id))break;a=b.parent()}while(b.length>0);return b};f.before(H.hDiv).click(function(a){var b=u("states.select"),d=a.target,g=Xa.call(e,d),h=g.parent();if(0!==h.length&&!hasOneFromClasses(h,Ia)){Ua=h[0].id;var i=$(d).hasClass("cbox")&&$(d).is(":enabled")&&!hasOneFromClasses(d,Ia),j=feedback.call(e,"beforeSelectRow",Ua,a),k=jgrid.detectRowEditing.call(e,Ua),l=null!=k&&"cellEditing"!==k.mode;if("A"!==d.tagName&&(!l||i))if(Va=g[0].cellIndex,Wa=g.html(),feedback.call(e,"onCellSelect",Ua,Va,Wa,a),w.cellEdit!==!0){if(!j)return void(i&&$(d).prop("checked",!1));if(w.multikey)a[w.multikey]?m.call(f,Ua,!0,a):w.multiselect&&i&&(i=$("#jqg_"+jqID(w.id)+"_"+Ua).is(":checked"),$("#jqg_"+jqID(w.id)+"_"+Ua).prop("checked",!i));else if(w.multiselect&&w.multiboxonly)if(i)m.call(f,Ua,!0,a);else{var n=w.frozenColumns?w.id+"_frozen":"";$(w.selarrrow).each(function(a,d){var e=c.getGridRowById.call(f,d);e&&$(e).removeClass(b),$("#jqg_"+jqID(w.id)+"_"+jqID(d)).prop("checked",!1),n&&($("#"+jqID(d),"#"+jqID(n)).removeClass(b),$("#jqg_"+jqID(w.id)+"_"+jqID(d),"#"+jqID(n)).prop("checked",!1))}),clearArray(w.selarrrow),m.call(f,Ua,!0,a)}else{var o=w.selrow;m.call(f,Ua,!0,a),"toggle"!==w.singleSelectClickMode||w.multiselect||o!==Ua||(e.grid.fbRows&&(h=h.add(e.grid.fbRows[h[0].rowIndex]===h[0]?e.rows[h[0].rowIndex]:e.grid.fbRows[h[0].rowIndex])),h.removeClass(b).attr({"aria-selected":"false",tabindex:"-1"}),w.selrow=null)}}else if(w.multiselect&&i&&j)m.call(f,Ua,!0,a);else{Ua=h[0].rowIndex;try{c.editCell.call(f,Ua,Va,!0)}catch(a){}}}}).on("reloadGrid",function(a,b){var d=this,e=d.grid,f=$(this);if(w.treeGrid===!0&&(w.datatype=w.treedatatype),b=i({},defaults.reloadGridOptions||{},w.reloadGridOptions||{},b||{}),"local"===w.datatype&&w.dataTypeOrg&&w.loadonce&&b.fromServer&&(w.datatype=w.dataTypeOrg,delete w.dataTypeOrg),b.current&&e.selectionPreserver.call(d),"local"===w.datatype?(w.multiPageSelection||c.resetSelection.call(f),w.data.length&&(X.call(d),Y.call(d))):w.treeGrid||w.multiPageSelection||(w.selrow=null,w.multiselect&&(clearArray(w.selarrrow),ia.call(d,!1)),clearArray(w.savedRow)),w.iRow=-1,w.iCol=-1,w.scroll&&H.emptyRows.call(d,!0,!1),b.page){var g=parseInt(b.page,10);g>w.lastpage&&(g=w.lastpage),g<1&&(g=1),w.page=g,e.prevRowHeight?e.bDiv.scrollTop=(g-1)*e.prevRowHeight*w.rowNum:e.bDiv.scrollTop=0}return e.prevRowHeight&&w.scroll&&void 0===b.page?(delete w.lastpage,e.populateVisible.call(d)):e.populate.call(d),w._inlinenav===!0&&f.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(a){var b=Xa.call(e,a.target),c=b.parent();if(b.length>0&&!feedback.call(e,"ondblClickRow",c.attr("id"),c[0].rowIndex,b[0].cellIndex,a))return!1}).on("contextmenu",function(a){var b=Xa.call(e,a.target),c=b.parent(),d=c.attr("id");if(0!==b.length)return w.multiselect||m.call(f,d,!0,a),!!feedback.call(e,"onRightClickRow",d,c[0].rowIndex,b[0].cellIndex,a)&&void 0}),H.bDiv=document.createElement("div"),K&&"auto"===String(w.height).toLowerCase()&&(w.height="100%"),$(H.bDiv).append($("<div style='position:relative;'></div>").append("<div></div>").append(e)).addClass("ui-jqgrid-bdiv").css({height:w.height+(isNaN(w.height)?"":"px"),width:H.width+"px"}).scroll(H.scrollGrid),w.maxHeight&&$(H.bDiv).css("max-height",w.maxHeight+(isNaN(w.maxHeight)?"":"px")),f.css({width:"1px"}),$.support.tbody||2===$(">tbody",e).length&&$(">tbody:gt(0)",e).remove(),w.multikey&&$(H.bDiv).on(jgrid.msie?"selectstart":"mousedown",function(){return!1}),Oa&&$(H.bDiv).hide(),H.cDiv=document.createElement("div");var Ya=t("gridMinimize.visible"),Za=t("gridMinimize.hidden"),$a=y("showhide"),_a=w.hidegrid===!0?$("<a role='link' class='"+u("titleButton","ui-jqgrid-titlebar-close")+"'"+($a?" title='"+$a+"'":"")+"/>").hover(function(){_a.addClass(Ha)},function(){_a.removeClass(Ha)}).append("<span class='"+Ya+"'></span>"):"";if($(H.cDiv).append("<span class='ui-jqgrid-title'>"+w.caption+"</span>").append(_a).addClass(u("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===I?"-rtl ":" ")+Qa)),$(H.cDiv).insertBefore(H.hDiv),w.toolbar[0]){H.uDiv=document.createElement("div"),"top"===w.toolbar[1]?$(H.uDiv).insertBefore(H.hDiv):"bottom"===w.toolbar[1]&&$(H.uDiv).insertAfter(H.hDiv);var ab=u("toolbarUpper","ui-userdata");"both"===w.toolbar[1]?(H.ubDiv=document.createElement("div"),$(H.uDiv).addClass(ab).attr("id","t_"+w.id).insertBefore(H.hDiv),$(H.ubDiv).addClass(u("toolbarBottom","ui-userdata")).attr("id","tb_"+w.id).insertAfter(H.hDiv),Oa&&$(H.ubDiv).hide()):$(H.uDiv).width(H.width).addClass(ab).attr("id","t_"+w.id),Oa&&$(H.uDiv).hide()}if("string"==typeof w.datatype&&(w.datatype=w.datatype.toLowerCase()),w.toppager?(w.toppager=w.id+"_toppager",H.topDiv=$("<div id='"+w.toppager+"'></div>")[0],$(H.topDiv).addClass(u("pager.pager","ui-jqgrid-toppager"+(w.caption?"":" "+Qa))).css({width:H.width+"px"}).insertBefore(H.hDiv),ja.call(e,w.toppager,"_t"),w.toppager="#"+jqID(w.toppager)):""!==w.pager||w.scroll||(w.rowNum=w.maxRowNum),w.footerrow&&(H.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],Pa=$("<div class='ui-jqgrid-hbox"+("rtl"===I?"-rtl":"")+"'></div>"),$(H.sDiv).append(Pa).width(H.width).insertAfter(H.hDiv),$(Pa).append(Ma),H.footers=$(".ui-jqgrid-ftable",H.sDiv)[0].rows[0].cells,w.rownumbers&&(H.footers[0].className=u("rowNum","jqgrid-rownum")),Oa&&$(H.sDiv).hide()),Pa=null,w.caption){var bb=w.datatype;w.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",H.cDiv).click(function(a){var b=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",c=this;w.toolbar[0]===!0&&("both"===w.toolbar[1]&&(b+=",#"+jqID($(H.ubDiv).attr("id"))),b+=",#"+jqID($(H.uDiv).attr("id")));var d=$(b,w.gView).length;return w.toppager&&(b+=","+w.toppager),"visible"===w.gridstate?$(b,w.gBox).slideUp("fast",function(){d--,0===d&&($("span",c).removeClass(Ya).addClass(Za),w.gridstate="hidden",$(w.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",w.gBox).hide(),$(H.cDiv).addClass(Ra),Oa||feedback.call(e,"onHeaderClick",w.gridstate,a))}):"hidden"===w.gridstate&&($(H.cDiv).removeClass(Ra),$(b,w.gBox).slideDown("fast",function(){d--,0===d&&($("span",c).removeClass(Za).addClass(Ya),Oa&&(w.datatype=bb,ha.call(e),Oa=!1),w.gridstate="visible",$(w.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",w.gBox).show(),Oa||feedback.call(e,"onHeaderClick",w.gridstate,a))})),!1}),Oa&&(w.datatype="local",$(".ui-jqgrid-titlebar-close",H.cDiv).trigger("click")))}else $(H.cDiv).hide(),$(H.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");$(H.hDiv).after(H.bDiv),H.eDiv=$("<div class='"+u("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+I)+"' style='display:none;'><span class='"+u("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],$(H.hDiv).after(H.eDiv),$(L).click(F).dblclick(function(a){var b=$(w.rs),d=b.offset(),g=b.data("idx"),h=b.data("delta"),i=w.colModel[g],j=$(this).data("pageX")||b.data("pageX");if(null==j||null==i)return!1;var k=String(j).split(";"),l=parseFloat(k[0]),m=parseFloat(k[1]);return(2!==k.length||!(Math.abs(l-m)>5||Math.abs(a.pageX-l)>5||Math.abs(a.pageX-m)>5))&&(feedback.call(e,"resizeDblClick",g,i)&&d.left-1<=a.pageX+h&&a.pageX+h<=d.left+b.outerWidth()+1&&i.autoResizable&&c.autoResizeColumn.call(f,g),feedback.call(e,"afterResizeDblClick",{iCol:g,cm:i,cmName:i.name}),!1)}),w.pager||$(H.cDiv).nextAll("div:visible").filter(":last").addClass(Ra),$(".ui-jqgrid-labels",H.hDiv).on("selectstart",function(){return!1}),e.formatCol=Q,e.sortData=ma,e.updatepager=ea,e.refreshIndex=Y,e.addItemDataToColumnIndex=V,e.removeItemDataFromColumnIndex=W,e.generateValueFromColumnIndex=function(a,b,c){var d,e,f=$(this).jqGrid("getUniqueValueFromColumnIndex",a),g="";if(null!=f)for(c=c||";",b=b||":",g="",d=0,e=f.length;d<e;d++)""!==g&&(g+=c||";"),g+=f[d]+(b||":")+f[d];return g},e.setHeadCheckBox=ia,e.fixScrollOffsetAndhBoxPadding=z,e.constructTr=Z,e.formatter=T,i(H,{populate:ha,emptyRows:U,beginReq:fa,endReq:ga}),e.addXmlData=ba,e.addJSONData=ba,e.rebuildRowIndexes=D,e.grid.cols=e.rows[0].cells,feedback.call(e,"onInitGrid"),w.treeGrid&&"local"===w.datatype&&null!=w.data&&w.data.length>0&&(w.datatype="jsonstring",w.datastr=w.data,w.data=[]),ha.call(e),w.hiddengrid=!1}})};var base=$.fn.jqGrid;jgrid.extend({getGridRes:function(a){var b=this[0];if(!b||!b.grid||!b.p)return null;var c=jgrid.getRes(locales[b.p.locale],a)||jgrid.getRes(locales["en-US"],a),d=jgrid.getRes(jgrid,a);return"object"!=typeof c||null===c||$.isArray(c)?void 0!==d?d:c:$.extend(!0,{},c,d||{})},getGuiStyles:function(a,b){var c=this instanceof $&&this.length>0?this[0]:this;if(!c||!c.grid||!c.p)return"";var d,e=c.p,f=e.guiStyle||jgrid.defaults.guiStyle||"jQueryUI",g=jgrid.getRes(jgrid.guiStyles[f],a);return void 0===g&&(d=jgrid.getRes(jgrid.guiStyles[f],"baseGuiStyle"),"string"==typeof d&&(g=jgrid.getRes(jgrid.guiStyles[d],a))),jgrid.mergeCssClasses(g||"",b||"")},isBootstrapGuiStyle:function(){return $.inArray("ui-jqgrid-bootstrap",$(this).jqGrid("getGuiStyles","gBox").split(" "))>=0},displayErrorMessage:function(a){var b=this instanceof $&&this.length>0?this[0]:this;if(b&&b.grid&&b.p&&a){var c=$(b.grid.eDiv),d=c.children(".ui-jqgrid-error");d.html(a),c.show(),b.p.errorDisplayTimeout&&setTimeout(function(){d.empty(),c.hide()},b.p.errorDisplayTimeout)}},getIconRes:function(a){var b=this instanceof $&&this.length>0?this[0]:this;if(!b||!b.p)return"";var c=b.p,d=jgrid.icons[c.iconSet],e=function(a,b){var c,d,e,f=b.split("."),g=f.length,h=[];if(a="string"==typeof a?jgrid.icons[a]:a,null==a)return"";for(c=a,c.common&&h.push(c.common),e=0;e<g&&(d=f[e],d);e++){if(c=c[d],void 0===c){if("common"===d)break;return""}if("string"==typeof c){h.push(c);break}null!=c&&c.common&&h.push(c.common)}return jgrid.mergeCssClasses.apply(this,h)};if(null==d)return"";var f=e(c.iconSet,a);return""===f&&null!=d.baseIconSet&&(f=e(d.baseIconSet,a)),f||""},isInCommonIconClass:function(a){var b=this instanceof $&&this.length>0?this[0]:this;if(!b||!b.p)return"";var c=b.p,d=jgrid.icons[c.iconSet];if(null==d)return!1;var e=d.common;if(void 0===e){if(null==d.baseIconSet)return!1;if(d=jgrid.icons[d.baseIconSet],null==d)return!1;e=d.common}return"string"==typeof e&&$.inArray(a,e.split(" "))>=0},getUniqueValueFromColumnIndex:function(a){var b=this[0];if(!b||!b.grid)return null;var c,d=[],e="",f=b.p.indexByColumnData[a];if(null!=f){for(e in f)if(f.hasOwnProperty(e)){for(c in f[e])if(f[e].hasOwnProperty(c)){e=String(f[e][c]);break}d.push(e)}b.p.ignoreCase?"undefined"==typeof String.prototype.localeCompare?d.sort(function(a,b){var c=a.toLowerCase(),d=b.toLowerCase();return c===d?0:c>d?1:-1}):d.sort(function(a,b){return String(a).toLowerCase().localeCompare(String(b).toLowerCase())}):d.sort()}return d},getGridParam:function(a){var b=this[0];return b&&b.grid?a?void 0!==b.p[a]?b.p[a]:null:b.p:null},setGridParam:function(a,b){return this.each(function(){var c=this;if(null==b&&(b=!1),c.grid&&"object"==typeof a)if(b===!0){var d=$.extend({},c.p,a);c.p=d}else $.extend(!0,c.p,a)})},abortAjaxRequest:function(){return this.each(function(){var a=this;null!=a.p.jqXhr&&a.p.jqXhr.abort(),a.grid.endReq.call(a)})},getGridRowById:function(a){if(null==a)return null;var b,c=a.toString();return this.each(function(){var d,e,f,g=this.rows;if(null!=this.p.rowIndexes&&(f=this.p.rowIndexes[c],e=g[f],e&&e.id===c&&(b=e)),!b)try{for(d=g.length;d--;)if(e=g[d],c===e.id){b=e;break}}catch(c){b=$(this.grid.bDiv).find("#"+jqID(a)),b=b.length>0?b[0]:null}}),b},getDataIDs:function(){var a=[];return this.each(function(){var b,c,d=this.rows,e=d.length;if(e&&e>0)for(b=0;b<e;b++)c=d[b],$(c).hasClass("jqgrow")&&a.push(c.id)}),a},setSelection:function(a,b,c){return this.each(function(){function d(a,b){var c=b.clientHeight,d=b.scrollTop,e=$(a).position().top,f=a.clientHeight;e+f>=c+d?b.scrollTop=e-(c+d)+f+d:e<c+d&&e<d&&(b.scrollTop=e)}var e,f,g,h,i,j,k,l=this,m=$(l),n=l.p,o=base.getGuiStyles,p=base.getGridRowById,q=o.call(m,"states.select"),r=o.call(m,"states.disabled"),s=l.grid.fbRows,t=function(a,b){var c=b?"addClass":"removeClass",d=n.iColByName.cb,e=b?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},f=function(a){$(a)[c](q).attr(e),void 0!==d&&$(a.cells[d]).children("input.cbox").prop("checked",b)};f(a),s&&f(s[a.rowIndex])};void 0!==a&&(b=b!==!1,null!=c&&(k=$(c.target).closest("tr.jqgrow"),k.length>0&&(f=k[0],s&&(f=l.rows[f.rowIndex]))),null==f&&(f=p.call(m,a)),!f||!f.className||f.className.indexOf(r)>-1||(n.scrollrows===!0&&(g=p.call(m,a),null!=g&&(g=g.rowIndex,g>=0&&d(l.rows[g],l.grid.bDiv))),n.multiselect?(l.setHeadCheckBox(!1),n.selrow=f.id,h=$.inArray(n.selrow,n.selarrrow),h===-1?(e=!0,n.selarrrow.push(n.selrow)):null!==jgrid.detectRowEditing.call(l,f.id)?e=!0:(e=!1,n.selarrrow.splice(h,1),i=n.selarrrow[0],n.selrow=void 0===i?null:i),"ui-subgrid"!==f.className&&t(f,e),b&&feedback.call(l,"onSelectRow",f.id,e,c||{})):"ui-subgrid"!==f.className&&(n.selrow!==f.id?(null!==n.selrow&&(j=p.call(m,n.selrow),j&&t(j,!1)),t(f,!0),e=!0):e=!1,n.selrow=f.id,b&&feedback.call(l,"onSelectRow",f.id,e,c||{}))))})},resetSelection:function(a){return this.each(function(){var b,c=this,d=$(this),e=c.p,f=base.getGuiStyles,g=base.getGridRowById,h=f.call(d,"states.select"),i="edit-cell "+h,j="selected-row "+f.call(d,"states.hover"),k=e.iColByName.cb,l=void 0!==k,m=c.grid.fbRows,n=function(a){var b,c="removeClass",d={"aria-selected":"false",tabindex:"-1"};$(a)[c](h).attr(d),l&&$(a.cells[k]).children("input.cbox").prop("checked",!1),m&&(b=m[a.rowIndex],$(b)[c](h).attr(d),l&&$(b.cells[k]).children("input.cbox").prop("checked",!1))};if(void 0!==a){if(b=g.call(d,a),n(b),l){c.setHeadCheckBox(!1);var o=$.inArray(a,e.selarrrow);o!==-1&&e.selarrrow.splice(o,1)}}else e.multiselect?($(c.rows).each(function(){var a=$.inArray(this.id,e.selarrrow);a!==-1&&(n(this),e.selarrrow.splice(a,1))}),c.setHeadCheckBox(!1),e.multiPageSelection||clearArray(e.selarrrow),e.selrow=null):e.selrow&&(b=g.call(d,e.selrow),n(b),e.selrow=null);e.cellEdit===!0&&parseInt(e.iCol,10)>=0&&parseInt(e.iRow,10)>=0&&(b=c.rows[e.iRow],null!=b&&($(b.cells[e.iCol]).removeClass(i),$(b).removeClass(j)),m&&(b=m[e.iRow],null!=b&&($(b.cells[e.iCol]).removeClass(i),$(b).removeClass(j)))),clearArray(e.savedRow)})},isCellEditing:function(a,b,c){var d=this[0],e=jgrid.detectRowEditing.call(d,a);if(null!=e&&("inlineEditing"===e.mode||"cellEditing"===e.mode&&e.savedRow.ic===b)){b=isNaN(b)?d.p.iColByName[b]:parseInt(b,10);var f=null!=c&&c.id===a?c:base.getGridRowById.call($(d),a),g=d.p.colModel[b],h=g.editable;if($.isFunction(h)&&(h=h.call(d,{rowid:a,id:stripPref(d.p.idPrefix,a),iCol:b,iRow:f.rowIndex,cmName:g.name,cm:g,mode:e.mode,td:f.cells[b],tr:f,dataElement:jgrid.getDataFieldOfCell.call(d,f,b)[0]})),h===!0)return!0}return!1},getRowData:function(a,b){var c,d={};return"object"==typeof a&&(b=a,a=void 0),b=b||{},this.each(function(){var e,f,g,h,i,j,k,l,m=this,n=m.p,o=!1,p=1,q=m.rows;if(void 0===a)o=!0,c=[],p=q.length;else if(e=base.getGridRowById.call($(m),a),!e)return d;for(f=0;f<p;f++)if(o&&(e=q[f]),$(e).hasClass("jqgrow")){for(l=jgrid.detectRowEditing.call(m,a),h=$(e).find("td[role=gridcell]"),g=0;g<h.length;g++)if(i=n.colModel[g],j=i.name,$.inArray(j,n.reservedColumnNames)<0&&"actions"!==i.formatter&&(!b.skipHidden||!i.hidden))if(k=h[g],base.isCellEditing.call($(m),a,g,e))d[j]=jgrid.getEditedValue.call(m,jgrid.getDataFieldOfCell.call(m,e,g),i,{},i.editable);else if(n.treeGrid===!0&&j===n.ExpandColumn)d[j]=htmlDecode($("span",k).first().html());else try{d[j]=$.unformat.call(m,k,{rowId:a,colModel:i},g)}catch(a){d[j]=htmlDecode($(k).html())}!b.includeId||n.keyName!==!1&&null!=d[n.keyName]||(d[n.prmNames.id]=stripPref(n.idPrefix,e.id)),o&&(c.push(d),d={})}}),c||d},delRowData:function(a){var b,c,d,e=!1;return this.each(function(){var f=this,g=f.p;if(b=base.getGridRowById.call($(f),a),!b)return!1;if(g.subGrid&&(d=$(b).next(),d.hasClass("ui-subgrid")&&d.remove()),$(b).remove(),g.records--,g.reccount--,f.updatepager(!0,!1),e=!0,g.multiselect&&(c=$.inArray(a,g.selarrrow),c!==-1&&g.selarrrow.splice(c,1)),g.multiselect&&g.selarrrow.length>0?g.selrow=g.selarrrow[g.selarrrow.length-1]:g.selrow===a&&(g.selrow=null),"local"===g.datatype){var h=stripPref(g.idPrefix,a),i=g._index[h];void 0!==i&&(f.removeItemDataFromColumnIndex(h),g.data.splice(i,1),f.refreshIndex())}if(f.rebuildRowIndexes(),g.altRows===!0&&e&&!$(f).jqGrid("isBootstrapGuiStyle")){var j=g.altclass,k=f.grid.fbRows;$(f.rows).each(function(a){var b=$(this);k&&(b=b.add(k[this.rowIndex])),b[a%2===0?"addClass":"removeClass"](j)})}feedback.call(f,"afterDelRow",a)}),e},setRowData:function(a,b,c){var d=!0;return this.each(function(){var e,f=this,g=f.p,h=typeof c,i={};if(!f.grid)return!1;if(e=base.getGridRowById.call($(f),a),!e)return!1;if(b)try{var j,k=stripPref(g.idPrefix,a),l=g._index[k],m={},n=null!=l?g.data[l]:void 0;if($(g.colModel).each(function(a){var c=this,d=c.name,e=getAccessor(b,d);void 0!==e&&("local"===g.datatype&&null!=n&&(e=convertOnSaveLocally.call(f,e,c,n[d],k,n,a),$.isFunction(c.saveLocally)?c.saveLocally.call(f,{newValue:e,newItem:i,oldItem:n,id:k,cm:c,cmName:d,iCol:a}):i[d]=e),m[d]=e)}),$(g.colModel).each(function(c){var d,h=this,j=h.name,k=getAccessor(b,j),l=$(e.cells[c]);if(void 0!==k){"local"===g.datatype&&null!=n&&(k=i[j]),d=h.title?{title:k}:{},k=f.formatter(a,k,c,b,"edit",m);var o=l;g.treeGrid===!0&&j===g.ExpandColumn&&(o=o.children("span.cell-wrapperleaf,span.cell-wrapper").first()),o.html(k),l.attr(d),g.frozenColumns&&(o=$(f.grid.fbRows[e.rowIndex].cells[c]),g.treeGrid===!0&&j===g.ExpandColumn&&(o=o.children("span.cell-wrapperleaf,span.cell-wrapper").first()),o.html(k).attr(d))}}),"local"===g.datatype){if(g.treeGrid)for(j in g.treeReader)g.treeReader.hasOwnProperty(j)&&delete i[g.treeReader[j]];void 0!==n&&(g.data[l]=$.extend(!0,n,i),f.removeItemDataFromColumnIndex(k),f.addItemDataToColumnIndex(g.data[l],k))}feedback.call(f,"afterSetRow",{rowid:a,inputData:b,iData:l,iRow:e.rowIndex,tr:e,localData:i,cssProp:c})}catch(a){d=!1}d&&("string"===h?$(e).addClass(c):null!==c&&"object"===h&&$(e).css(c))}),d},changeRowid:function(a,b){return this.each(function(){var c,d,e,f,g,h,i,j=this,k=$(j),l=j.p;if(j.grid&&l&&a!==b&&(f=k.jqGrid("getGridRowById",a),f&&null==k.jqGrid("getGridRowById",b))){var m=jgrid.stripPref(l.idPrefix,a),n=jgrid.stripPref(l.idPrefix,b),o=l.keyName===!1?l.prmNames.id:l.keyName,p=function(){var a=this.id,b=a.length-m.length;b>0&&a.substr(b)===m&&$(this).attr("id",a.substr(0,b)+n)};for(l.iColByName[o]>=0?k.jqGrid("setCell",a,o,n):"local"===l.datatype&&void 0!==l._index[m]&&(l._index[n]=l._index[m],c=l.data[l._index[m]],delete l._index[m],c.hasOwnProperty(o)&&(c[o]=n)),l.rowIndexes[b]=f.rowIndex,delete l.rowIndexes[a],g=null==j.grid.fbRows?$(f):$(f).add(j.grid.fbRows[f.rowIndex]),g.attr("id",b),l.selrow===a&&(l.selrow=b),$.isArray(l.selarrrow)&&(d=$.inArray(a,l.selarrrow),d>=0&&(l.selarrrow[d]=b)),l.multiselect&&(e="jqg_"+l.id+"_"+b,g.find("input.cbox").attr("id",e).attr("name",e)),d=0;d<l.colModel.length;d++)h=l.colModel[d],"actions"===h.formatter?g.find(".ui-jqgrid-actions .ui-pg-div").each(p):("showlink"===h.formatter||null!=h.unformat&&null!=h.formatter)&&(i=k.jqGrid("getCell",b,d),k.jqGrid("setCell",b,d,i,!1,!1,!0));feedback.call(j,"afterChangeRowid",{rowid:b,oldRowid:a,iRow:f.rowIndex,tr:f})}})},addRowData:function(a,b,c,d){$.inArray(c,["first","last","before","after","afterSelected","beforeSelected"])<0&&(c="last");var e,f,g,h,i,j,k,l,m,n,o,p=!1;return b&&($.isArray(b)?(j=!0,k=a):(b=[b],j=!1),this.each(function(){var q,r=this,s=r.p,t=b.length,u=$(r),v=r.rows,w=0,x=base.getGridRowById,y=s.colModel,z=s.additionalProperties;for(j||(void 0!==a?a=String(a):(a=randId(),s.keyName!==!1&&(k=s.keyName,void 0!==b[0][k]&&(a=b[0][k])))),l=s.altclass;w<t;){if(m=b[w],f=[],j)try{a=m[k],void 0===a&&(a=randId())}catch(b){a=randId()}for(o=jgrid.stripPref(s.idPrefix,a),q={},h=0;h<y.length;h++)n=y[h],e=n.name,"rn"!==e&&"cb"!==e&&"subgrid"!==e&&(i=convertOnSaveLocally.call(r,m[e],n,void 0,o,{},h),$.isFunction(n.saveLocally)?n.saveLocally.call(r,{newValue:i,newItem:q,oldItem:{},id:o,rowid:a,cm:n,cmName:e,iCol:h}):void 0!==i&&(q[e]=i));for(h=0;h<z.length;h++)e=z[h],"object"==typeof e&&e.hasOwnProperty("name")&&(e=e.name),i=getAccessor(m,e),void 0!==i&&(q[e]=i);if("local"===s.datatype&&(q[s.localReader.id]=o,s._index[o]=s.data.length,s.data.push(q),r.addItemDataToColumnIndex(q,o)),f=jgrid.parseDataToHtml.call(r,1,[a],[m]),f=f.join(""),0===v.length)$(r.tBodies[0]).append(f);else switch("afterSelected"!==c&&"beforeSelected"!==c||(void 0===d&&null!==s.selrow?(d=s.selrow,c="afterSelected"===c?"after":"before"):c="afterSelected"===c?"last":"first"),c){case"last":$(v[v.length-1]).after(f),g=v.length-1;break;case"first":$(v[0]).after(f),g=1;break;case"after":g=x.call(u,d),g&&($(v[g.rowIndex+1]).hasClass("ui-subgrid")?($(v[g.rowIndex+1]).after(f),g=g.rowIndex+2):($(g).after(f),g=g.rowIndex+1));break;case"before":g=x.call(u,d),g&&($(g).before(f),g=g.rowIndex-1)}s.subGrid===!0&&base.addSubGrid.call(u,s.iColByName.subgrid,g),s.records++,s.reccount++,0===s.lastpage&&(s.lastpage=1),feedback.call(r,"afterAddRow",{rowid:a,inputData:b,position:c,srcRowid:d,iRow:g,localData:q,iData:s.data.length-1}),w++}s.altRows!==!0||j||u.jqGrid("isBootstrapGuiStyle")||("last"===c?(v.length-1)%2===0&&$(v[v.length-1]).addClass(l):$(v).each(function(a){a%2===1?$(this).addClass(l):$(this).removeClass(l)})),r.rebuildRowIndexes(),r.updatepager(!0,!0),p=!0})),p},footerData:function(a,b,c){function d(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}var e=!1,f={};return null==a&&(a="get"),"boolean"!=typeof c&&(c=!0),a=a.toLowerCase(),this.each(function(){var g,h,i,j,k=this,l=k.p;if(!k.grid||!l.footerrow)return!1;if("set"===a&&d(b))return!1;e=!0;var m=$(k.grid.sDiv).children(".ui-jqgrid-hbox").children(".ui-jqgrid-ftable")[0];if(null==m||null==m.rows)return!1;var n=m.rows[0].cells,o=l.colModel,p=null==k.grid.fsDiv?{}:k.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if("get"===a)for(j=0;j<o.length;j++)i=o[j].name,$.inArray(i,l.reservedColumnNames)<0&&(b!==!1?(g=$(n[j]).text(),$.trim(g)&&(f[i]=g)):f[i]=$(n[j]).html());else if("set"===a)for(i in b)j=l.iColByName[i],b.hasOwnProperty(i)&&void 0!==j&&(g=c?k.formatter("",b[i],j,b,"edit"):b[i],h=$(n[j]).add(p[j]),h.html(g),o[j].title&&h.attr({title:stripHtml(g)}))}),"get"===a?f:e},showHideCol:function(a,b,c){return this.each(function(){var d,e=this,f=$(e),g=e.grid,h=!1,i=e.p,j=jgrid.cell_width?0:i.cellLayout;if(g){"string"==typeof a&&(a=[a]),b="none"!==b&&b!==!1?"":"none",c=c||{};var k=""===b,l=i.groupHeader,m=l&&("object"==typeof l||$.isFunction(l));if(m&&!c.skipSetGroupHeaders&&base.destroyGroupHeader.call(f,!1),$(i.colModel).each(function(f){var l=function(a){var c,d,e,g;for(c=0,d=a.length;c<d;c++)e=a[c],g=e.cells[f],(!$(e).hasClass("jqgroup")||null!=g&&1===g.colSpan)&&(0===c&&$(e).hasClass("jqgfirstrow")?($(g).css("height","1px"),$(g).css("display",b),$(g).css("height","0")):$(g).css("display",b))};if($.inArray(this.name,a)!==-1&&this.hidden===k){if(i.frozenColumns===!0&&this.frozen===!0&&!c.notSkipFrozen)return!0;l($(g.hDiv).find(".ui-jqgrid-htable>thead>tr")),i.frozenColumns===!0&&null!=g.fhDiv&&l($(g.fhDiv).find(".ui-jqgrid-htable>thead>tr")),l(e.rows),i.frozenColumns===!0&&null!=g.fbRows&&l(e.rows),i.footerrow&&(l($(g.sDiv).find("tr.footrow")),i.frozenColumns===!0&&null!=g.fsDiv&&l($(g.fsDiv).find("tr.footrow"))),d=parseInt(this.width,10),"none"===b?i.tblwidth-=d+j:i.tblwidth+=d+j,this.hidden=!k,h=!0,c.skipFeedback?(c.toReport=c.toReport||{},c.toReport[this.name]=k):feedback.call(e,"onShowHideCol",k,this.name,f,c)}}),h===!0){var n=i.autowidth||void 0!==i.widthOrg&&"auto"!==i.widthOrg&&"100%"!==i.widthOrg?i.width:i.tblwidth+parseInt(i.scrollOffset,10);c.skipSetGridWidth?c.newGridWidth=n:base.setGridWidth.call(f,n)}if(m&&!c.skipSetGroupHeaders)if(null!=i.pivotOptions&&null!=i.pivotOptions.colHeaders&&i.pivotOptions.colHeaders.length>1){var o,p=i.pivotOptions.colHeaders;for(o=0;o<p.length;o++)p[o]&&p[o].groupHeaders.length&&base.setGroupHeaders.call(f,p[o])}else base.setGroupHeaders.call(f,i.groupHeader)}})},hideCol:function(a,b){return this.each(function(){base.showHideCol.call($(this),a,"none",b)})},showCol:function(a,b){return this.each(function(){base.showHideCol.call($(this),a,"",b)})},remapColumns:function(a,b,c){function d(){var b,c=[],d=[],e=a.length;for(b=0;b<e;b++)o&&a[b]<p?c.push(a[b]):d.push(a[b]);return c.concat(d)}function e(a){var b=a.length?n(a):$.extend({},a);$.each(j,function(c){a[c]=b[this]})}function f(a,b){var c=b?a.children(b):a.children();c.each(function(){var a=this,b=n(a.cells);$.each(j,function(c){var d=b[this],e=a.cells[c];null!=d&&null!=e&&d.cellIndex!==c&&d.parentNode.insertBefore(d,e)})})}var g,h,i,j,k=this[0],l=k.p,m=k.grid,n=$.makeArray,o=l.frozenColumns===!0,p=this.jqGrid("getNumberOfFrozenColumns");if(null!=m&&null!=l){for(j=d(),e(l.colModel),e(l.colNames),e(m.headers),i=$(m.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),o&&null!=m.fhDiv&&(i=i.add(m.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),f(i,c&&":not(.ui-jqgrid-labels)"),b&&(i=$(k.tBodies[0]),o&&null!=m.fbDiv&&(i=i.add(m.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),f(i,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),l.footerrow&&(i=$(m.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),o&&null!=m.fsDiv&&(i=i.add(m.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),f(i)),l.remapColumns&&(l.remapColumns.length?e(l.remapColumns):l.remapColumns=n(j)),l.lastsort=$.inArray(l.lastsort,j),l.iColByName={},g=0,h=l.colModel.length;g<h;g++)l.iColByName[l.colModel[g].name]=g;feedback.call(k,"onRemapColumns",j,b,c);
}},remapColumnsByName:function(a,b,c){var d,e,f=this[0],g=f.p,h=[],i=a.slice(),j=$.inArray;for(g.subGrid&&j("subgrid",i)<0&&i.unshift("subgrid"),g.multiselect&&j("cb",i)<0&&i.unshift("cb"),g.rownumbers&&j("rn",i)<0&&i.unshift("rn"),d=0,e=i.length;d<e;d++)h.push(g.iColByName[i[d]]);return base.remapColumns.call(this,h,b,c),this},setGridWidth:function(a,b){return this.each(function(){var c,d,e,f,g=this,h=g.p,i=g.grid,j=0,k=0,l=!1,m=0,n=jgrid.isCellClassHidden,o=a;if(i&&null!=h){g.fixScrollOffsetAndhBoxPadding();var p,q,r,s,t,u=h.colModel,v=h.scrollOffset,w=jgrid.cell_width?0:h.cellLayout,x=i.headers,y=i.footers,z=i.bDiv,A=i.hDiv,B=i.sDiv,C=i.cols,D=$(A).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,E=function(a){i.width=h.width=a,$(h.gBox).css("width",a+"px"),$(h.gView).css("width",a+"px"),$(z).css("width",a+"px"),$(A).css("width",a+"px"),h.pager&&$(h.pager).css("width",a+"px"),h.toppager&&$(h.toppager).css("width",a+"px"),h.toolbar[0]===!0&&($(i.uDiv).css("width",a+"px"),"both"===h.toolbar[1]&&$(i.ubDiv).css("width",a+"px")),h.footerrow&&$(B).css("width",a+"px")};if("boolean"!=typeof b&&(b=h.shrinkToFit),!isNaN(o)){if(o=parseInt(o,10),E(o),b===!1&&h.forceFit===!0&&(h.forceFit=!1),b===!0){if($.each(u,function(){this.hidden!==!1||n(this.classes)||(c=this.widthOrg,j+=c+w,this.fixed?m+=this.width+w:k++)}),0===k)return;if(h.tblwidth=parseInt(j,10),e=o-w*k-m,isNaN(h.height)||(z.clientHeight<z.scrollHeight||1===g.rows.length)&&(l=!0,e-=v),t=e/(h.tblwidth-w*k-m),t<0)return;if(j=0,s=C.length>0,$.each(u,function(a){this.hidden!==!1||n(this.classes)||this.fixed||(c=Math.round(this.widthOrg*t),this.width=c,j+=c,x[a].width=c,D[a].style.width=c+"px",h.footerrow&&(y[a].style.width=c+"px"),s&&(C[a].style.width=c+"px"),d=a)}),!d)return;f=0,l?o-m-(j+w*k)!==v&&(f=o-m-(j+w*k)-v):1!==Math.abs(o-m-(j+w*k))&&(f=o-m-(j+w*k)),p=u[d],p.width+=f,h.tblwidth=parseInt(j+f+w*k+m,10),h.tblwidth>o&&(r=h.tblwidth-parseInt(o,10),h.tblwidth=o,p.width=p.width-r),c=p.width,q=x[d],q.width=c,D[d].style.width=c+"px",s&&(C[d].style.width=c+"px"),h.footerrow&&(y[d].style.width=c+"px"),h.tblwidth+(l?v:0)<h.width&&E(h.tblwidth+(l?v:0)),z.offsetWidth>z.clientWidth&&(h.autowidth||void 0!==h.widthOrg&&"auto"!==h.widthOrg&&"100%"!==h.widthOrg||E(z.offsetWidth))}h.tblwidth&&(h.tblwidth=parseInt(h.tblwidth,10),o=h.tblwidth,A.scrollLeft=z.scrollLeft,r=Math.abs(o-h.width),h.shrinkToFit&&!b&&r<3&&r>0&&(o<h.width&&E(o),z.offsetWidth>z.clientWidth&&(h.autowidth||void 0!==h.widthOrg&&"auto"!==h.widthOrg&&"100%"!==h.widthOrg||E(z.offsetWidth)))),g.fixScrollOffsetAndhBoxPadding();var F={resizeDiv:!0,resizedRows:{iRowStart:b?0:-1,iRowEnd:-1}};$(g).triggerHandler("jqGridResetFrozenHeights",[{header:F,resizeFooter:!0,body:F}])}}})},setGridHeight:function(a){return this.each(function(){var b=this,c=b.grid,d=b.p;if(c){var e=$(c.bDiv);e.css({height:a+(isNaN(a)?"":"px")}),d.frozenColumns===!0&&$(d.idSel+"_frozen").parent().height(e.height()-16),d.height=a,d.scroll&&c.populateVisible.call(b),b.fixScrollOffsetAndhBoxPadding(),$(b).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(a){return this.each(function(){var b=this,c=b.grid.cDiv;b.p.caption=a,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",c).html(a),$(c).show(),$(c).nextAll("div").removeClass(base.getGuiStyles.call(b,"top")),$(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(a,b,c,d){return this.each(function(){var e,f,g=this,h=g.p;if(g.grid){if(isNaN(a)){if(e=h.iColByName[a],void 0===e)return}else e=parseInt(a,10);e>=0&&(f=$(g.grid.headers[e].el),h.frozenColumns&&(f=f.add(g.grid.fhDiv.find(".ui-jqgrid-htable tr.ui-jqgrid-labels th.ui-th-column").eq(e))),b&&(f.each(function(){var a=$("[id^=jqgh_]",this),c=a.children("span.ui-jqgrid-cell-wrapper");if(c.length>0)c.html(b);else{var d=$(".s-ico",this);a.empty().html(b)[h.sortIconsBeforeText?"prepend":"append"](d)}}),h.colNames[e]=b),c&&("string"==typeof c?f.addClass(c):f.css(c)),"object"==typeof d&&f.attr(d))}})},setCell:function(a,b,c,d,e,f){return this.each(function(){var g,h,i,j,k,l,m,n,o,p,q=this,r=q.p,s=-1,t=r.colModel,u={};if(q.grid&&(s=isNaN(b)?r.iColByName[b]:parseInt(b,10),s>=0&&(k=base.getGridRowById.call($(q),a)))){if(l=jgrid.getCell.call(q,k,s),""!==c||f===!0){if(i=t[s],"local"===r.datatype&&(o=stripPref(r.idPrefix,a),p=r._index[o],void 0!==p&&(j=r.data[p])),null==j){for(h=0;h<k.cells.length;h++)if(h!==s&&(m=jgrid.getDataFieldOfCell.call(q,k,h),m.length>0)){try{n=$.unformat.call(q,m,{rowId:a,colModel:t[h]},h)}catch(a){n=htmlDecode(m[0].innerHTML)}u[t[h].name]=n}}else u=j;u[i.name]=c,g=q.formatter(a,c,s,u,"edit");var v=l;r.treeGrid===!0&&i.name===r.ExpandColumn&&(v=v.children("span.cell-wrapperleaf,span.cell-wrapper").first()),v.html(g),i.title&&l.attr({title:c}),null!=j&&(g=convertOnSaveLocally.call(q,c,i,j[i.name],o,j,s),$.isFunction(i.saveLocally)?i.saveLocally.call(q,{newValue:g,newItem:j,oldItem:j,id:o,cm:i,cmName:i.name,iCol:s}):j[i.name]=g)}(d||e)&&(l=jgrid.getCell.call(q,k,s),d&&l["string"==typeof d?"addClass":"css"](d),"object"==typeof e&&l.attr(e))}})},getCell:function(a,b){var c=!1;return this.each(function(){var d,e,f,g,h=this,i=h.p;if(h.grid&&(d=isNaN(b)?i.iColByName[b]:parseInt(b,10),d>=0&&(e=base.getGridRowById.call($(h),a)))){f=jgrid.getDataFieldOfCell.call(h,e,d).first(),g=i.colModel[d];try{c=base.isCellEditing.call($(h),a,d,e)?jgrid.getEditedValue.call(h,f,g,{},g.editable):$.unformat.call(h,f,{rowId:e.id,colModel:g},d)}catch(a){c=htmlDecode(f.html())}}}),c},getCol:function(a,b,c){var d,e,f,g,h=[],i=0;return b="boolean"==typeof b&&b,void 0===c&&(c=!1),this.each(function(){var j,k,l=this,m=l.p;if(l.grid&&(j=isNaN(a)?m.iColByName[a]:parseInt(a,10),j>=0)){var n,o,p=l.rows,q=p.length,r=0,s=0,t=m.colModel[j];if(q&&q>0){for(;r<q;){if(n=p[r],$(n).hasClass("jqgrow")){k=jgrid.getDataFieldOfCell.call(l,n,j).first(),o=n.id;try{d=base.isCellEditing.call($(l),o,j,n)?jgrid.getEditedValue.call(l,k,t,{},t.editable):$.unformat.call(l,k,{rowId:o,colModel:t},j)}catch(a){d=htmlDecode(k.html())}c?(g=parseFloat(d),isNaN(g)||(i+=g,void 0===f&&(f=e=g),e=Math.min(e,g),f=Math.max(f,g),s++)):b?h.push({id:o,value:d}):h.push(d)}r++}if(c)switch(c.toLowerCase()){case"sum":h=i;break;case"avg":h=i/s;break;case"count":h=q-1;break;case"min":h=e;break;case"max":h=f}}}}),h},clearGridData:function(a){return this.each(function(){var b=this,c=b.p,d=b.rows,e=b.grid;e&&c&&d&&("boolean"!=typeof a&&(a=!1),$(b).off(".jqGridFormatter"),e.emptyRows.call(b,!1,!0),c.footerrow&&a&&$(".ui-jqgrid-ftable td",e.sDiv).html("&#160;"),c.selrow=null,clearArray(c.selarrrow),clearArray(c.savedRow),clearArray(c.data),clearArray(c.lastSelectedData),c._index={},c.rowIndexes={},c.dataIndexById={},c.indexByColumnData={},c.records=0,c.page=1,c.lastpage=0,c.reccount=0,b.updatepager(!0,!1))})},getInd:function(a,b){var c=base.getGridRowById.call($(this),a);return!!c&&(b===!0?c:c.rowIndex)},bindKeys:function(a){var b=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this,c=a.p,d=$(a);c.scrollrows=b.scrollingRows,d.on("keydown.jqGrid",function(e){var f=$(this).find("tr[tabindex=0]")[0],g=jgrid.detectRowEditing.call(a,$(e.target).closest("tr.jqgrow").attr("id")),h=function(a){do if(f=f[a],null===f)return;while($(f).is(":hidden")||!$(f).hasClass("jqgrow"));base.setSelection.call(d,f.id,!0),e.preventDefault()},i=function(e,f){var g=b["on"+e+(f||"")];d.triggerHandler("jqGridKey"+e,[c.selrow]),$.isFunction(g)&&g.call(a,c.selrow)},j=function(a){if(c.treeGrid){var b=c.data[c._index[stripPref(c.idPrefix,f.id)]][c.treeReader.expanded_field];"Right"===a&&(b=!b),b&&$(f).find("div.treeclick").trigger("click")}i(a,"Key")};if(f&&null===g)switch(e.keyCode){case 38:h("previousSibling");break;case 40:h("nextSibling");break;case 37:j("Left");break;case 39:j("Right");break;case 13:i("Enter");break;case 32:i("Space")}})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown.jqGrid")})},getLocalRow:function(a){var b,c=!1;return this.each(function(){void 0!==a&&(b=this.p._index[stripPref(this.p.idPrefix,a)],b>=0&&(c=this.p.data[b]))}),c},progressBar:function(a){return a=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},a||{}),this.each(function(){var b="show"===a.method,c=jqID(this.p.id),d=$("#load_"+c);switch(""!==a.htmlcontent&&d.html(a.htmlcontent),a.loadtype){case"disable":break;case"enable":d.toggle(b);break;case"block":$("#lui_"+c).toggle(b),d.toggle(b)}})},setColWidth:function(a,b,c,d){return this.each(function(){var e,f=this,g=$(f),h=f.grid,i=f.p;if("string"==typeof a){if(a=i.iColByName[a],void 0===a)return}else if("number"!=typeof a)return;e=h.headers[a],null!=e&&(e.newWidth=b,h.newWidth=i.tblwidth+b-e.width,h.resizeColumn(a,!i.frozenColumns,d),c===!1||d||(f.fixScrollOffsetAndhBoxPadding(),base.setGridWidth.call(g,h.newWidth+i.scrollOffset,!1)))})},getAutoResizableWidth:function(a){var b=this;if(0===b.length)return-1;b=b[0];var c,d,e,f,g,h=b.rows,i=b.p,j=i.colModel[a],k=$(b.grid.headers[a].el),l=k.find(">div"),m=parseFloat(k.css("padding-left")||0),n=parseFloat(k.css("padding-right")||0),o=l.find("span.s-ico"),p=l.find(">."+i.autoResizing.wrapperClassName),q=p.outerWidth(),r=parseFloat(p.css("width")||0),s=0,t=0,u=null!=j.autoResizing&&void 0!==j.autoResizable.compact?j.autoResizable.compact:i.autoResizing.compact,v=i.autoResizing.wrapperClassName;if(null==j||!j.autoResizable||0===p.length||j.hidden||jgrid.isCellClassHidden(j.classes)||j.fixed)return-1;for(u&&!o.is(":visible")&&"none"===o.css("display")||(t=o.outerWidth(!0),i.sortIconsBeforeText||(t-="rtl"===i.direction?parseFloat(o.css("padding-left")||0)+parseFloat(o.css("margin-left")||0):parseFloat(o.css("padding-right")||0)+parseFloat(o.css("margin-right")||0))),t+=q+m+(r===q?m+n:0)+parseFloat(l.css("margin-left")||0)+parseFloat(l.css("margin-right")||0),e=0,h=b.rows;e<h.length;e++)c=h[e],d=c.cells[a],f=$(c.cells[a]),null!=d&&($(c).hasClass("jqgrow")||$(c).hasClass("jqgroup")&&1===d.colSpan)?(g=$(d.firstChild),g.hasClass(v)?t=Math.max(t,g.outerWidth()+s):i.treeGrid&&i.ExpandColumn===j.name&&(g=f.children(".cell-wrapper,.cell-wrapperleaf"),t=Math.max(t,g.outerWidth()+s+f.children(".tree-wrap").outerWidth()))):$(c).hasClass("jqgfirstrow")&&(s=(jgrid.cell_width?parseFloat(f.css("padding-left")||0)+parseFloat(f.css("padding-right")||0):0)+parseFloat(f.css("border-right")||0)+parseFloat(f.css("border-left")||0));return t=Math.max(t,null!=j.autoResizing&&void 0!==j.autoResizing.minColWidth?j.autoResizing.minColWidth:i.autoResizing.minColWidth),Math.min(t,null!=j.autoResizing&&void 0!==j.autoResizing.maxColWidth?j.autoResizing.maxColWidth:i.autoResizing.maxColWidth)},autoResizeColumn:function(a,b){return this.each(function(){var c,d=this,e=$(this),f=d.p,g=f.colModel[a],h=$(d.grid.headers[a].el),i=base.getAutoResizableWidth.call(e,a),j=(g.autoResizing||{}).resetWidthOrg;null==g||i<0||i===g.width||(base.setColWidth.call(e,a,i,f.autoResizing.adjustGridWidth&&!f.autoResizing.fixWidthOnShrink&&!b,b),f.autoResizing.fixWidthOnShrink&&f.shrinkToFit&&!b&&(g.fixed=!0,c=g.widthOrg,g.widthOrg=g.width,base.setGridWidth.call(e,f.width,!0),g.widthOrg=c,g.fixed=!1),(j||void 0===j&&f.autoResizing.resetWidthOrg)&&(g.widthOrg=g.width),h.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var a,b,c=this,d=$(c),e=c.p,f=e.colModel,g=f.length,h=e.shrinkToFit,i=e.autoResizing.adjustGridWidth,j=e.autoResizing.fixWidthOnShrink,k=parseInt(e.widthOrg,10),l=c.grid,m=base.autoResizeColumn;for(e.shrinkToFit=!1,e.autoResizing.adjustGridWidth=!0,e.autoResizing.fixWidthOnShrink=!1,a=0;a<g;a++)b=f[a],b.autoResizable&&"actions"!==b.formatter&&m.call(d,a,!0);l.hDiv.scrollLeft=l.bDiv.scrollLeft,e.footerrow&&(l.sDiv.scrollLeft=l.bDiv.scrollLeft),c.fixScrollOffsetAndhBoxPadding(),isNaN(k)?i&&base.setGridWidth.call(d,l.newWidth+e.scrollOffset,!1):base.setGridWidth.call(d,k,!1),e.autoResizing.fixWidthOnShrink=j,e.autoResizing.adjustGridWidth=i,e.shrinkToFit=h})}});var getTdByColumnIndex=function(a,b){var c=this,d=c.grid.fbRows;return $((null!=d&&d[0].cells.length>b?d[a.rowIndex]:a).cells[b])};jgrid.extend({editCell:function(a,b,c){return this.each(function(){var d,e,f,g,h=this,i=$(h),j=h.p,k=h.rows;if(h.grid&&j.cellEdit===!0&&null!=k&&null!=k[a]&&(a=parseInt(a,10),b=parseInt(b,10),!isNaN(a)&&!isNaN(b))){var l,m=k[a],n=null!=m?m.id:null,o=$(m),p=parseInt(j.iCol,10),q=parseInt(j.iRow,10),r=$(k[q]),s=j.savedRow;if(null!=n){if(j.selrow=n,j.knv||i.jqGrid("GridNav"),s.length>0){if(c===!0&&a===q&&b===p)return;i.jqGrid("saveCell",s[0].id,s[0].ic)}else setTimeout(function(){$("#"+jgrid.jqID(j.knv)).attr("tabindex","-1").focus()},1);if(g=j.colModel[b],d=g.name,"subgrid"!==d&&"cb"!==d&&"rn"!==d){f=getTdByColumnIndex.call(h,m,b);var t=g.editable,u="cell";$.isFunction(t)&&(t=t.call(h,{rowid:n,iCol:b,iRow:a,cmName:d,cm:g,mode:u}));var v=i.jqGrid("getGuiStyles","states.select","edit-cell"),w=i.jqGrid("getGuiStyles","states.hover","selected-row");if(t!==!0||c!==!0||f.hasClass("not-editable-cell"))p>=0&&q>=0&&(getTdByColumnIndex.call(h,r[0],p).removeClass(v),r.removeClass(w)),f.addClass(v),o.addClass(w),e=f.html().replace(/&#160;/gi,""),feedback.call(h,"onSelectCell",n,d,e,a,b);else{p>=0&&q>=0&&(getTdByColumnIndex.call(h,r[0],p).removeClass(v),r.removeClass(w)),f.addClass(v),o.addClass(w),g.edittype||(g.edittype="text"),l=g.edittype;try{e=$.unformat.call(h,f,{rowId:n,colModel:g},b)}catch(a){e="textarea"===l?f.text():f.html()}if(j.autoEncodeOnEdit&&(e=jgrid.oldDecodePostedData(e)),s.push({id:a,ic:b,name:d,v:e}),("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))&&(e=""),$.isFunction(j.formatCell)){var x=j.formatCell.call(h,n,d,e,a,b);void 0!==x&&(e=x)}feedback.call(h,"beforeEditCell",n,d,e,a,b);var y=$.extend({},g.editoptions||{},{id:a+"_"+d,name:d,rowId:n,mode:u,cm:g,iCol:b}),z=jgrid.createEl.call(h,l,y,e,!0,$.extend({},jgrid.ajaxOptions,j.ajaxSelectOptions||{})),A=f,B=j.treeGrid===!0&&d===j.ExpandColumn;B&&(A=f.children("span.cell-wrapperleaf,span.cell-wrapper")),A.html("").append(z).attr("tabindex","0"),B&&$(z).width(f.width()-f.children("div.tree-wrap").outerWidth()),jgrid.bindEv.call(h,z,y),setTimeout(function(){$(z).focus()},1),$("input, select, textarea",f).on("keydown",function(c){if(27===c.keyCode&&($("input.hasDatepicker",f).length>0?$(".ui-datepicker").is(":hidden")?i.jqGrid("restoreCell",a,b):$("input.hasDatepicker",f).datepicker("hide"):i.jqGrid("restoreCell",a,b)),13===c.keyCode&&!c.shiftKey)return i.jqGrid("saveCell",a,b),!1;if(9===c.keyCode){if(h.grid.hDiv.loading)return!1;c.shiftKey?i.jqGrid("prevCell",a,b):i.jqGrid("nextCell",a,b)}c.stopPropagation()}),feedback.call(h,"afterEditCell",n,d,e,a,b)}j.iCol=b,j.iRow=a}}}})},saveCell:function(a,b){return this.each(function(){var c=this,d=$(c),e=c.p,f=c.grid,g=jgrid.info_dialog,h=jgrid.jqID;if(f&&e.cellEdit===!0){var i=d.jqGrid("getGridRes","errors"),j=i.errcap,k=d.jqGrid("getGridRes","edit"),l=k.bClose,m=e.savedRow,n=m.length>=1?0:null;if(null!==n){var o,p=c.rows[a],q=p.id,r=$(p),s=e.colModel[b],t=s.name,u=getTdByColumnIndex.call(c,p,b),v={},w=jgrid.getEditedValue.call(c,u,s,v);if(w!==m[n].v){o=d.triggerHandler("jqGridBeforeSaveCell",[q,t,w,a,b]),void 0!==o&&(w=o),$.isFunction(e.beforeSaveCell)&&(o=e.beforeSaveCell.call(c,q,t,w,a,b),void 0!==o&&(w=o));var x=jgrid.checkValues.call(c,w,b,void 0,void 0,{oldValue:m[n].v,newValue:w,cmName:t,rowid:q,iCol:b,iRow:a,cm:s,tr:p,td:u,mode:"cell"}),y=s.formatoptions||{};if(null==x||x===!0||x[0]===!0){var z=d.triggerHandler("jqGridBeforeSubmitCell",[q,t,w,a,b])||{};if($.isFunction(e.beforeSubmitCell)&&(z=e.beforeSubmitCell.call(c,q,t,w,a,b),z||(z={})),$("input.hasDatepicker",u).length>0&&$("input.hasDatepicker",u).datepicker("hide"),"date"===s.formatter&&y.sendFormatted!==!0&&(w=$.unformat.date.call(c,w,s)),"remote"===e.cellsubmit)if(e.cellurl){var A={};A[t]=w;var B=e.prmNames,C=B.id,D=B.oper;A[C]=jgrid.stripPref(e.idPrefix,q),A[D]=B.editoper,A=$.extend(z,A),e.autoEncodeOnEdit&&$.each(A,function(a,b){$.isFunction(b)||(A[a]=jgrid.oldEncodePostedData(b))}),d.jqGrid("progressBar",{method:"show",loadtype:e.loadui,htmlcontent:d.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),f.hDiv.loading=!0,$.ajax($.extend({url:$.isFunction(e.cellurl)?e.cellurl.call(c,e.cellurl,a,b,q,w,t):e.cellurl,data:jgrid.serializeFeedback.call(c,e.serializeCellData,"jqGridSerializeCellData",A),type:"POST",complete:function(h){if(f.endReq.call(c),(h.status<300||304===h.status)&&(0!==h.status||4!==h.readyState)){var i=d.triggerHandler("jqGridAfterSubmitCell",[c,h,A.id,t,w,a,b])||[!0,""];(i===!0||i[0]===!0&&$.isFunction(e.afterSubmitCell))&&(i=e.afterSubmitCell.call(c,h,A.id,t,w,a,b)),null==i||i===!0||i[0]===!0?(d.jqGrid("setCell",q,b,w,!1,!1,!0),u.addClass("dirty-cell"),r.addClass("edited"),feedback.call(c,"afterSaveCell",q,t,w,a,b),m.splice(0,1)):(g.call(c,j,i[1],l),d.jqGrid("restoreCell",a,b))}},error:function(f,h,i){d.triggerHandler("jqGridErrorCell",[f,h,i]),$.isFunction(e.errorCell)?(e.errorCell.call(c,f,h,i),d.jqGrid("restoreCell",a,b)):(g.call(c,j,f.status+" : "+f.statusText+"<br/>"+h,l),d.jqGrid("restoreCell",a,b))}},jgrid.ajaxOptions,e.ajaxCellOptions||{}))}else try{g.call(c,j,i.nourl,l),d.jqGrid("restoreCell",a,b)}catch(a){}"clientArray"===e.cellsubmit&&(d.jqGrid("setCell",q,b,"select"===s.edittype&&"select"!==s.formatter?v.text:w,!1,!1,!0),u.addClass("dirty-cell"),r.addClass("edited"),feedback.call(c,"afterSaveCell",q,t,w,a,b),m.splice(0,1))}else try{setTimeout(function(){var a=jgrid.getRelativeRect.call(c,u);g.call(c,j,w+" "+x[1],l,{top:a.top,left:a.left+$(c).closest(".ui-jqgrid").offset().left})},50),d.jqGrid("restoreCell",a,b)}catch(a){}}else d.jqGrid("restoreCell",a,b)}setTimeout(function(){$("#"+h(e.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(a,b){return this.each(function(){var c,d,e,f=this,g=f.p,h=f.rows[a],i=h.id;if(f.grid&&g.cellEdit===!0){var j=g.savedRow,k=getTdByColumnIndex.call(f,h,b);if(j.length>=1){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",k).datepicker("hide")}catch(a){}d=g.colModel[b],g.treeGrid===!0&&d.name===g.ExpandColumn?k.children("span.cell-wrapperleaf,span.cell-wrapper").empty():k.empty(),k.attr("tabindex","-1"),c=j[0].v,e=d.formatoptions||{},"date"===d.formatter&&e.sendFormatted!==!0&&(c=$.unformat.date.call(f,c,d)),$(f).jqGrid("setCell",i,b,c,!1,!1,!0),feedback.call(f,"afterRestoreCell",i,c,a,b),j.splice(0,1)}setTimeout(function(){$("#"+g.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(a,b){return this.each(function(){var c,d,e,f=this,g=$(f),h=f.p,i=!1,j=f.rows;if(f.grid&&h.cellEdit===!0&&null!=j&&null!=j[a]){for(c=b+1;c<h.colModel.length;c++)if(e=h.colModel[c],d=e.editable,$.isFunction(d)&&(d=d.call(f,{rowid:j[a].id,iCol:c,iRow:a,cmName:e.name,cm:e,mode:"cell"})),d===!0){i=c;break}i!==!1?g.jqGrid("editCell",a,i,!0):h.savedRow.length>0&&g.jqGrid("saveCell",a,b)}})},prevCell:function(a,b){return this.each(function(){var c,d,e,f=this,g=$(f),h=f.p,i=!1,j=f.rows;if(f.grid&&h.cellEdit===!0&&null!=j&&null!=j[a]){for(c=b-1;c>=0;c--)if(e=h.colModel[c],d=e.editable,$.isFunction(d)&&(d=d.call(f,{rowid:j[a].id,iCol:c,iRow:a,cmName:e.name,cm:e,mode:"cell"})),d===!0){i=c;break}i!==!1?g.jqGrid("editCell",a,i,!0):h.savedRow.length>0&&g.jqGrid("saveCell",a,b)}})},GridNav:function(){return this.each(function(){function a(a,b,c){var d=e.rows[a];if("v"===c.substr(0,1)){var f=i.clientHeight,g=i.scrollTop,h=d.offsetTop+d.clientHeight,j=d.offsetTop;"vd"===c&&h>=f&&(i.scrollTop=i.scrollTop+d.clientHeight),"vu"===c&&j<g&&(i.scrollTop=i.scrollTop-d.clientHeight)}if("h"===c){var k=i.clientWidth,l=i.scrollLeft,m=d.cells[b],n=m.offsetLeft+m.clientWidth,o=m.offsetLeft;n>=k+parseInt(l,10)?i.scrollLeft=i.scrollLeft+m.clientWidth:o<l&&(i.scrollLeft=i.scrollLeft-m.clientWidth)}}function b(a,b){var c,d=0,e=g.colModel;if("lft"===b)for(d=a+1,c=a;c>=0;c--)if(e[c].hidden!==!0){d=c;break}if("rgt"===b)for(d=a-1,c=a;c<e.length;c++)if(e[c].hidden!==!0){d=c;break}return d}var c,d,e=this,f=$(e),g=e.p,h=e.grid;if(h&&g.cellEdit===!0){var i=h.bDiv;g.knv=g.id+"_kn";var j=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+g.knv+"'></div></div>");$(j).insertBefore(h.cDiv),$("#"+g.knv).focus().keydown(function(h){var i=parseInt(g.iRow,10),j=parseInt(g.iCol,10);switch(d=h.keyCode,"rtl"===g.direction&&(37===d?d=39:39===d&&(d=37)),d){case 38:i-1>0&&(a(i-1,j,"vu"),f.jqGrid("editCell",i-1,j,!1));break;case 40:i+1<=e.rows.length-1&&(a(i+1,j,"vd"),f.jqGrid("editCell",i+1,j,!1));break;case 37:j-1>=0&&(c=b(j-1,"lft"),a(i,c,"h"),f.jqGrid("editCell",i,c,!1));break;case 39:j+1<=g.colModel.length-1&&(c=b(j+1,"rgt"),a(i,c,"h"),f.jqGrid("editCell",i,c,!1));break;case 13:j>=0&&i>=0&&f.jqGrid("editCell",i,j,!0);break;default:return!0}return!1})}})},getChangedCells:function(a){var b=[];return a||(a="all"),this.each(function(){var c=this,d=c.p,e=jgrid.htmlDecode,f=c.rows;c.grid&&d.cellEdit===!0&&$(f).each(function(g){var h={};if($(this).hasClass("edited")){var i=this;$(this.cells).each(function(b){var j=d.colModel[b],k=j.name,l=getTdByColumnIndex.call(c,i,b);if("cb"!==k&&"subgrid"!==k&&"rn"!==k&&("dirty"!==a||l.hasClass("dirty-cell")))try{h[k]=$.unformat.call(c,l[0],{rowId:f[g].id,colModel:j},b)}catch(a){h[k]=e(l.html())}}),h.id=this.id,b.push(h)}})}),b}});var getGuiStyles=base.getGuiStyles,getGridRes=base.getGridRes;jgrid.jqModal=jgrid.jqModal||{},$.extend(!0,jgrid.jqModal,{toTop:!0}),$.extend(jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true"),a.o&&a.o.remove()},hideModal:function(a,b){b=$.extend({jqm:!0,gb:"",removemodal:!1},b||{});var c=!(!b.gb||"string"!=typeof b.gb||"#gbox_"!==b.gb.substr(0,6))&&$("#"+b.gb.substr(6))[0],d=$(a);if(b.onClose){var e=c?b.onClose.call(c,a):b.onClose(a);if("boolean"==typeof e&&!e)return}if($.fn.jqm&&b.jqm===!0)d.attr("aria-hidden","true").jqmHide();else{if(""!==b.gb)try{$(">.jqgrid-overlay",b.gb).first().hide()}catch(a){}d.hide().attr("aria-hidden","true")}b.removemodal&&d.remove()},createModal:function(a,b,c,d,e,f,g){var h=jgrid.jqID,i=this.p;c=$.extend(!0,{resizingRightBottomIcon:base.getIconRes.call(this,"form.resizableLtr")},jgrid.jqModal||{},null!=i?i.jqModal||{}:{},c);var j=document.createElement("div"),k="#"+h(a.themodal),l="rtl"===$(c.gbox).attr("dir"),m=!!a.resizeAlso&&"#"+h(a.resizeAlso);g=$.extend({},g||{}),j.className=getGuiStyles.call(this,"dialog.window","ui-jqdialog"),j.id=a.themodal,j.dir=l?"rtl":"ltr";var n=document.createElement("div");n.className=getGuiStyles.call(this,"dialog.document"),$(n).attr("role","document");var o=document.createElement("div");o.className=getGuiStyles.call(this,"dialog.subdocument"),n.appendChild(o),j.appendChild(n);var p=document.createElement("div");p.className=getGuiStyles.call(this,"dialog.header","ui-jqdialog-titlebar "+(l?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),p.id=a.modalhead,$(p).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var q=getGuiStyles.call(this,"states.hover"),r=$("<a aria-label='Close' class='"+getGuiStyles.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){r.addClass(q)},function(){r.removeClass(q)}).append("<span class='"+base.getIconRes.call(this,"form.close")+"'></span>");$(p).append(r);var s=document.createElement("div");$(s).addClass(getGuiStyles.call(this,"dialog.content","ui-jqdialog-content")).attr("id",a.modalcontent),$(s).append(b),o.appendChild(s),$(o).prepend(p),f===!0?$("body").append(j):"string"==typeof f?$(f).append(j):$(j).insertBefore(d),$(j).css(g),void 0===c.jqModal&&(c.jqModal=!0);var t={};if($.fn.jqm&&c.jqModal===!0?(0===c.left&&0===c.top&&c.overlay&&(c=$(e).offset(),c.left+=4,c.top+=4),t.top=c.top+"px",t.left=c.left):0===c.left&&0===c.top||(t.left=c.left,t.top=c.top+"px"),$("a.ui-jqdialog-titlebar-close",p).click(function(){var a=$(k).data("onClose")||c.onClose,b=$(k).data("gbox")||c.gbox;return jgrid.hideModal(k,{gb:b,jqm:c.jqModal,onClose:a,removemodal:c.removemodal||!1}),!1}),0!==c.width&&c.width||(c.width=300),0!==c.height&&c.height||(c.height=200),!c.zIndex){var u=$(d).parents("*[role=dialog]").first().css("z-index");u?(c.zIndex=parseInt(u,10)+2,c.toTop=!0):c.zIndex=950}if(t.left&&(t.left+="px"),$(j).css($.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex},t)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":a.modalhead,"aria-hidden":"true"}),void 0===c.drag&&(c.drag=!0),void 0===c.resize&&(c.resize=!0),c.drag)if($.fn.jqDrag)$(p).css("cursor","move"),$(j).jqDrag(p);else try{$(j).draggable({handle:$("#"+h(p.id))})}catch(a){}if(c.resize)if($.fn.jqResize)$(s).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+c.resizingRightBottomIcon+"'></div>"),$(k).jqResize(".jqResize",m);else try{$(j).resizable({handles:"se, sw",alsoResize:m})}catch(a){}c.closeOnEscape===!0&&$(j).keydown(function(a){if(27===a.which){var b=$(k).data("onClose")||c.onClose;jgrid.hideModal(k,{gb:c.gbox,jqm:c.jqModal,onClose:b,removemodal:c.removemodal||!1,formprop:!c.recreateForm||!1,form:c.form||""})}})},viewModal:function(a,b){if(b=$.extend(!0,{overlay:30,modal:!1,overlayClass:getGuiStyles.call(this,"overlay"),onShow:jgrid.showModal,onHide:jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},jgrid.jqModal||{},b||{}),$.fn.jqm&&b.jqm===!0)b.jqM?$(a).attr("aria-hidden","false").jqm(b).jqmShow():$(a).attr("aria-hidden","false").jqmShow();else{""!==b.gbox&&($(">.jqgrid-overlay",b.gbox).first().show(),$(a).data("gbox",b.gbox)),$(a).show().attr("aria-hidden","false");try{$(":input:visible",a)[0].focus()}catch(a){}}},info_dialog:function(a,b,c,d){var e=this,f=e.p,g=$.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},jgrid.jqModal||{},null!=f?f.jqModal||{}:{},{caption:"<b>"+a+"</b>"},d||{}),h=g.jqModal;$.fn.jqm&&!h&&(h=!1);var i,j="",k=getGuiStyles.call(e,"states.hover");if(g.buttons.length>0)for(i=0;i<g.buttons.length;i++)void 0===g.buttons[i].id&&(g.buttons[i].id="info_button_"+i),j+=jgrid.builderFmButon.call(e,g.buttons[i].id,g.buttons[i].text);var l=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px",m="text-align:"+g.align+";",n=$("#info_dialog"),o="<div id='info_id'>";o+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+m+"'>"+b+"</div>",(c||""!==j)&&(o+="<hr class='"+getGuiStyles.call(e,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+g.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(c?jgrid.builderFmButon.call(e,"closedialog",c):"")+j+"</div>"),o+="</div>";try{"false"===n.attr("aria-hidden")&&jgrid.hideModal("#info_dialog",{jqm:h}),n.remove()}catch(a){}jgrid.createModal.call(e,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},o,g,"","",!0),n=$("#info_dialog"),j&&$.each(g.buttons,function(){$("#"+jgrid.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(a){return $.isFunction(a.data.click)&&a.data.click.call(e,a,n),!1})}),$("#closedialog","#info_id").click(function(){return jgrid.hideModal("#info_dialog",{jqm:h,onClose:n.data("onClose")||g.onClose,gb:n.data("gbox")||g.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(k)},function(){$(this).removeClass(k)}),$.isFunction(g.beforeOpen)&&g.beforeOpen(),jgrid.viewModal.call(e,"#info_dialog",{onHide:function(a){a.w.hide().remove(),a.o&&a.o.remove()},modal:g.modal,jqm:h}),$.isFunction(g.afterOpen)&&g.afterOpen();try{n.focus()}catch(a){}},bindEv:function(a,b){var c=this;$.isFunction(b.dataInit)&&b.dataInit.call(c,a,b),b.dataEvents&&$.each(b.dataEvents,function(){void 0!==this.data?$(a).on(this.type,this.data,this.fn):$(a).on(this.type,this.fn)})},createEl:function(a,b,c,d,e){function f(a,b,c){var d=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","selectFilled","rowId","column","mode","cm","iCol"];void 0!==c&&$.isArray(c)&&$.merge(d,c),$.each(b,function(b,c){$.inArray(b,d)===-1&&$(a).attr(b,c)}),b.hasOwnProperty("id")||$(a).attr("id",jgrid.randId())}var g="",h=this,i=h.p,j=jgrid.info_dialog,k=function(a){return getGridRes.call($(h),a)},l=k("errors.errcap"),m=k("edit"),n=m.msg,o=m.bClose;if(null==b)return"";switch(a){case"textarea":g=document.createElement("textarea"),d?b.cols||$(g).css({width:"100%","box-sizing":"border-box"}):b.cols||(b.cols=19),b.rows||(b.rows=2),("&nbsp;"===c||"&#160;"===c||1===c.length&&160===c.charCodeAt(0))&&(c=""),g.value=c,f(g,b),$(g).attr({role:"textbox"});break;case"checkbox":if(g=document.createElement("input"),g.type="checkbox",b.value){var p=b.value.split(":");c===p[0]&&(g.checked=!0,g.defaultChecked=!0),g.value=p[0],$(g).data("offval",p[1])}else{var q=String(c).toLowerCase();q.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==q?(g.checked=!0,g.defaultChecked=!0,g.value=c):g.value="on",$(g).data("offval","off")}f(g,b,["value"]),$(g).attr({role:"checkbox","aria-checked":g.checked?"true":"false"});break;case"select":g=document.createElement("select");var r,s=[],t=null;b.multiple===!0?(r=!0,g.multiple="multiple",$(g).attr("aria-multiselectable","true"),s=c.split(","),s=$.map(s,function(a){return $.trim(a)})):(r=!1,s[0]=$.trim(c)),void 0===b.size&&(b.size=r?3:1);try{t=b.rowId}catch(a){}if(i&&i.idPrefix&&(t=jgrid.stripPref(i.idPrefix,t)),void 0===b.dataUrl&&b.generateValue&&null!=i.indexByColumnData[b.cm.name]&&(b.value=h.generateValueFromColumnIndex(b.cm.name,b.separator,b.delimiter)),void 0!==b.dataUrl){var u=b.postData||e.postData,v={elem:g,options:b,cm:b.cm,mode:b.mode,rowid:t,iCol:b.iCol,ovm:s};f(g,b,u?["postData"]:void 0),$.ajax($.extend({url:$.isFunction(b.dataUrl)?b.dataUrl.call(h,t,c,String(b.name),v):b.dataUrl,type:"GET",dataType:"html",data:$.isFunction(u)?u.call(h,t,c,String(b.name)):u,context:v,success:function(a,b,c){var d=this.ovm,e=this.elem,f=this.cm,g=this.iCol,i=$.extend({},this.options),j=this.rowid,k=this.mode,l=$.isFunction(i.buildSelect)?i.buildSelect.call(h,a,c,f,g):a;"string"==typeof l&&(l=$($.trim(l)).html()),l&&($(e).append(l),setTimeout(function(){var a;$("option",e).each(function(b){0===b&&e.multiple&&(this.selected=!1),$.inArray($.trim($(this).val()),d)>-1&&(this.selected=!0,a=!0)}),a||$("option",e).each(function(){$.inArray($.trim($(this).text()),d)>-1&&(this.selected=!0)}),jgrid.fullBoolFeedback.call(h,i.selectFilled,"jqGridSelectFilled",{elem:e,options:i,cm:f,rowid:j,mode:k,cmName:null!=f?f.name:i.name,iCol:g})},0))}},e||{}))}else b.value&&(jgrid.fillSelectOptions(g,b.value,void 0===b.separator?":":b.separator,void 0===b.delimiter?";":b.delimiter,r,c),f(g,b,["value"]),jgrid.fullBoolFeedback.call(h,b.selectFilled,"jqGridSelectFilled",{elem:g,options:b,cm:b.cm,rowid:t,mode:b.mode,cmName:null!=b.cm?b.cm.name:b.name,iCol:b.iCol}));break;case"text":case"password":case"button":var w;w="button"===a?"button":"textbox",g=document.createElement("input"),g.type=a,f(g,b),g.value=c,"button"!==a&&(d?b.size||$(g).css({width:"100%","box-sizing":"border-box"}):b.size||(b.size=20)),$(g).attr("role",w);break;case"image":case"file":g=document.createElement("input"),g.type=a,f(g,b);break;case"custom":g=document.createElement("span");try{if(!$.isFunction(b.custom_element))throw"editoptions.custom_element is not a function";var x=b.custom_element.call(h,c,b);if(!(x instanceof jQuery||jgrid.isHTMLElement(x)||"string"==typeof x))throw"editoptions.custom_element returns value of a wrong type";x=$(x).addClass("customelement").attr({id:b.id,name:b.name}),$(g).empty().append(x)}catch(a){"e1"===a&&j.call(h,l,"function 'custom_element' "+n.nodefined,o),"e2"===a?j.call(h,l,"function 'custom_element' "+n.novalue,o):j.call(h,l,"string"==typeof a?a:a.message,o)}}return g},checkDate:function(a,b){var c,d=function(a){return a%4!==0||a%100===0&&a%400!==0?28:29},e={};if(a=a.toLowerCase(),c=a.indexOf("/")!==-1?"/":a.indexOf("-")!==-1?"-":a.indexOf(".")!==-1?".":"/",
a=a.split(c),b=b.split(c),3!==b.length)return!1;var f,g,h,i=-1,j=-1,k=-1;for(g=0;g<a.length;g++)h=isNaN(b[g])?0:parseInt(b[g],10),e[a[g]]=h,f=a[g],f.indexOf("y")!==-1&&(i=g),f.indexOf("m")!==-1&&(k=g),f.indexOf("d")!==-1&&(j=g);f="y"===a[i]||"yyyy"===a[i]?4:"yy"===a[i]?2:-1;var l,m=[0,31,29,31,30,31,30,31,31,30,31,30,31];return i!==-1&&(l=e[a[i]].toString(),2===f&&1===l.length&&(f=1),l.length===f&&(0!==e[a[i]]||"00"===b[i])&&(k!==-1&&(l=e[a[k]].toString(),!(l.length<1||e[a[k]]<1||e[a[k]]>12)&&(j!==-1&&(l=e[a[j]].toString(),!(l.length<1||e[a[j]]<1||e[a[j]]>31||2===e[a[k]]&&e[a[j]]>d(e[a[i]])||e[a[j]]>m[e[a[k]]]))))))},isEmpty:function(a){return!(!a.match(/^\s+$/)&&""!==a)},checkTime:function(a){var b,c=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!jgrid.isEmpty(a)){if(b=a.match(c),!b)return!1;if(b[3]){if(b[1]<1||b[1]>12)return!1}else if(b[1]>23)return!1;if(b[2]>59)return!1}return!0},checkValues:function(a,b,c,d,e){var f,g,h,i,j,k=this,l=k.p,m=l.colModel,n=jgrid.isEmpty,o=getGridRes.call($(k),"edit.msg"),p=getGridRes.call($(k),"formatter.date.masks");if(void 0===c){if("string"==typeof b&&(b=l.iColByName[b]),void 0===b||b<0)return[!0,"",""];i=m[b],f=i.editrules,null!=i.formoptions&&(g=i.formoptions.label)}else f=c,g=void 0===d?"_":d,i=m[b];if(f){if(g||(g=null!=l.colNames?l.colNames[b]:i.label),f.required===!0&&n(a))return[!1,g+": "+o.required,""];var q=f.required!==!1;if(f.number===!0&&(q!==!1||!n(a))&&isNaN(a))return[!1,g+": "+o.number,""];if(void 0!==f.minValue&&!isNaN(f.minValue)&&parseFloat(a)<parseFloat(f.minValue))return[!1,g+": "+o.minValue+" "+f.minValue,""];if(void 0!==f.maxValue&&!isNaN(f.maxValue)&&parseFloat(a)>parseFloat(f.maxValue))return[!1,g+": "+o.maxValue+" "+f.maxValue,""];var r;if(f.email===!0&&!(q===!1&&n(a)||(r=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,r.test(a))))return[!1,g+": "+o.email,""];if(f.integer===!0&&(q!==!1||!n(a))){if(isNaN(a))return[!1,g+": "+o.integer,""];if(a%1!==0||a.indexOf(".")!==-1)return[!1,g+": "+o.integer,""]}if(f.date===!0&&!(q===!1&&n(a)||(i.formatoptions&&i.formatoptions.newformat?(h=i.formatoptions.newformat,p.hasOwnProperty(h)&&(h=p[h])):h=m[b].datefmt||"Y-m-d",jgrid.checkDate(h,a))))return[!1,g+": "+o.date+" - "+h,""];if(f.time===!0&&!(q===!1&&n(a)||jgrid.checkTime(a)))return[!1,g+": "+o.date+" - hh:mm (am/pm)",""];if(f.url===!0&&!(q===!1&&n(a)||(r=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,r.test(a))))return[!1,g+": "+o.url,""];if(f.custom===!0){if(q!==!1||!n(a))return $.isFunction(f.custom_func)?(j=f.custom_func.call(k,a,g,b),$.isArray(j)?j:[!1,o.customarray,""]):[!1,o.customfcheck,""]}else if($.isFunction(f.custom)&&(q!==!1||!n(a)))return j=f.custom.call(k,e),$.isArray(j)?j:[!1,o.customarray,""]}return[!0,"",""]}}),jgrid.extend({getColProp:function(a){var b,c={},d=this[0];return null!=d&&d.grid&&(b=d.p.iColByName[a],void 0!==b)?d.p.colModel[b]:c},setColProp:function(a,b){return this.each(function(){var c,d=this,e=d.p;d.grid&&null!=e&&b&&(c=e.iColByName[a],void 0!==c&&$.extend(!0,e.colModel[c],b))})},sortGrid:function(a,b,c){return this.each(function(){var d,e,f,g=this,h=g.grid,i=g.p,j=i.colModel,k=j.length,l=!1;if(h)for(a||(a=i.sortname),"boolean"!=typeof b&&(b=!1),e=0;e<k;e++)if(d=j[e],d.index===a||d.name===a){i.frozenColumns===!0&&d.frozen===!0&&(l=h.fhDiv.find("#"+i.id+"_"+a)),l&&0!==l.length||(l=h.headers[e].el),f=d.sortable,("boolean"!=typeof f||f)&&g.sortData("jqgh_"+i.id+"_"+a,e,b,c,l);break}})},clearBeforeUnload:function(){return this.each(function(){var a,b=this,c=b.p,d=b.grid,e=jgrid.clearArray,f=Object.prototype.hasOwnProperty;$.isFunction(d.emptyRows)&&d.emptyRows.call(b,!0,!0),$(document).off("mousemove.jqGrid mouseup.jqGrid"+c.id),$(b).off();var g,h=d.headers.length;for(g=0;g<h;g++)d.headers[g].el=null;for(a in d)d.hasOwnProperty(a)&&(d.propOrMethod=null);var i=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(h=i.length,g=0;g<h;g++)f.call(b,i[g])&&(b[i[g]]=null);b._index={},e(c.data),e(c.lastSelectedData),e(c.selarrrow),e(c.savedRow)})},GridDestroy:function(){return this.each(function(){var a=this,b=a.p;if(a.grid&&null!=b){b.pager&&$(b.pager).remove();try{$("#alertmod_"+jqID(b.id)).remove(),$(a).jqGrid("clearBeforeUnload"),$(b.gBox).remove()}catch(a){}}})},GridUnload:function(){return this.each(function(){var a=this,b=$(a),c=a.p,d=$.fn.jqGrid;a.grid&&(b.removeClass(d.getGuiStyles.call(b,"grid","ui-jqgrid-btable")),c.pager&&$(c.pager).empty().removeClass(d.getGuiStyles.call(b,"pagerBottom","ui-jqgrid-pager")).removeAttr("style").removeAttr("dir"),b.jqGrid("clearBeforeUnload"),b.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),b.empty(),b.insertBefore(c.gBox).show(),$(c.pager).insertBefore(c.gBox).show(),$(c.gBox).remove())})},setGridState:function(a){return this.each(function(){var b=this,c=b.p,d=b.grid,e=d.cDiv,f=$(d.uDiv),g=$(d.ubDiv);if(d&&null!=c){var h=function(a){return base.getIconRes.call(b,"gridMinimize."+a)},i=h("visible"),j=h("hidden");"hidden"===a?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",c.gView).slideUp("fast"),c.pager&&$(c.pager).slideUp("fast"),c.toppager&&$(c.toppager).slideUp("fast"),c.toolbar[0]===!0&&("both"===c.toolbar[1]&&g.slideUp("fast"),f.slideUp("fast")),c.footerrow&&$(".ui-jqgrid-sdiv",c.gBox).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",e).removeClass(i).addClass(j),c.gridstate="hidden"):"visible"===a&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",c.gView).slideDown("fast"),c.pager&&$(c.pager).slideDown("fast"),c.toppager&&$(c.toppager).slideDown("fast"),c.toolbar[0]===!0&&("both"===c.toolbar[1]&&g.slideDown("fast"),f.slideDown("fast")),c.footerrow&&$(".ui-jqgrid-sdiv",c.gBox).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",e).removeClass(j).addClass(i),c.gridstate="visible")}})},filterToolbar:function(a){return this.each(function(){var b=this,c=b.grid,d=$(b),e=b.p,f=jgrid.info_dialog,g=jgrid.htmlEncode;if(!this.ftoolbar){var h,i=$.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},jgrid.search,e.searching||{},a||{}),j=e.colModel,k=function(a){return getGridRes.call(d,a)},l=k("errors.errcap"),m=k("edit.bClose"),n=k("edit.msg"),o=getGuiStyles.call(b,"states.hover"),p=getGuiStyles.call(b,"states.select"),q=getGuiStyles.call(b,"filterToolbar.dataField"),r={},s=function(a){var b="gs_";switch(i.idMode){case"compatibility":b+=e.idPrefix;break;case"new":b+=e.id+"_"}return b+a},t=function(a){return"#"+jqID(s(a))},u=function(a){var b=(a.value||"").split(":");return{on:b[0]||"on",off:b[1]||"off"}},v=function(a){var b,c,d,f,g,h,k=e.postData.filters,l={},m=e.iColByName;if(a)for(c=0;c<j.length;c++)g=j[c],g.search!==!1&&(h=g.searchoptions||{},l[g.name]={op:h.sopt?h.sopt[0]:"select"===g.stype||"checkbox"===g.stype?"eq":i.defaultSearch,data:void 0!==h.defaultValue?h.defaultValue:""});if(!k||!e.search)return l;if("string"==typeof k)try{k=$.parseJSON(k)}catch(a){k={}}else k=k||{};if(d=k.rules||{},null==k||null!=k.groupOp&&null!=i.groupOp&&k.groupOp.toUpperCase()!==i.groupOp.toUpperCase()||null==d||0===d.length||null!=k.groups&&k.groups.length>0)return l;for(c=0;c<d.length;c++)for(f=d[c],g=j[m[f.field]],b=0;b<j.length;b++)if(g=j[b],(g.index||g.name)===f.field&&g.search!==!1){if(h=g.searchoptions||{},h.sopt){if($.inArray(f.op,h.sopt)<0)continue}else if("select"===g.stype||"checkbox"===g.stype){if("eq"!==f.op)continue}else if(f.op!==i.defaultSearch)continue;l[g.name]={op:f.op,data:f.data}}return l},w=function(a,b){switch(b){case 1:a.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:a.data("state",0).prop({checked:!1,indeterminate:!1});break;default:a.data("state",-1).prop({checked:!1,indeterminate:!0})}},x=function(){var a={},f=0,g={};$.each(j,function(){var d,h,j=this,l=j.index||j.name,m=j.searchoptions||{},n=$(t(j.name),j.frozen===!0&&e.frozenColumns===!0?c.fhDiv:c.hDiv),o=function(a,b){var c=j.formatoptions||{};return void 0!==c[a]?c[a]:k("formatter."+(b||j.formatter)+"."+a)},p=function(a){var b=o("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return a.replace(new RegExp(b,"g"),"")};if(h=i.searchOperators?n.parent().prev().children("a").data("soper")||i.defaultSearch:m.sopt?m.sopt[0]:"select"===j.stype||"checkbox"===j.stype?"eq":i.defaultSearch,"custom"===j.stype&&$.isFunction(m.custom_value)&&n.length>0&&"SPAN"===n[0].nodeName.toUpperCase())d=m.custom_value.call(b,n.children(".customelement").first(),"get");else if("select"===j.stype)n.prop("multiple")?(d=n.val(),d=null==d||0===d.length?"":d.join(e.inFilterSeparator||",")):d=n.val();else if("checkbox"===j.stype){var q=u(m);switch(n.data("state")){case-1:d="";break;case 0:d=q.off;break;default:d=q.on}}else switch(d=$.trim(n.val()),j.formatter){case"integer":d=p(d).replace(o("decimalSeparator","number"),"."),""!==d&&(d=String(parseInt(d,10)));break;case"number":d=p(d).replace(o("decimalSeparator"),"."),""!==d&&"0"===String(d).charAt(0)&&(d=String(parseFloat(d)));break;case"currency":var r=o("prefix"),s=o("suffix");r&&r.length&&(d=d.substr(r.length)),s&&s.length&&(d=d.substr(0,d.length-s.length)),d=p(d).replace(o("decimalSeparator"),"."),""!==d&&(d=String(parseFloat(d)))}if(d||"nu"===h||"nn"===h||$.inArray(h,e.customUnaryOperations)>=0)a[l]=d,g[l]=h,f++;else if(a.hasOwnProperty(l)&&delete a[l],!i.stringResult&&!i.searchOperators&&"local"!==e.datatype)try{null!=e.postData&&e.postData.hasOwnProperty(l)&&delete e.postData[l]}catch(a){}});var h=f>0;if(i.stringResult||i.searchOperators||"local"===e.datatype){var l='{"groupOp":"'+i.groupOp+'","rules":[',m=0;$.each(a,function(a,b){m>0&&(l+=","),l+='{"field":"'+a+'",',l+='"op":"'+g[a]+'",',b+="",l+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',m++}),l+="]}",$.extend(e.postData,{filters:l}),$.each(["searchField","searchString","searchOper"],function(a,b){e.postData.hasOwnProperty(b)&&delete e.postData[b]})}else $.extend(e.postData,a);var n;e.searchurl&&(n=e.url,d.jqGrid("setGridParam",{url:e.searchurl}));var o="stop"===d.triggerHandler("jqGridToolbarBeforeSearch");!o&&$.isFunction(i.beforeSearch)&&(o=i.beforeSearch.call(b)),o||d.jqGrid("setGridParam",{search:h}).trigger("reloadGrid",[$.extend({page:1},i.reloadGridSearchOptions||{})]),n&&d.jqGrid("setGridParam",{url:n}),d.triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(i.afterSearch)&&i.afterSearch.call(b)},y=function(a){var f,g={},h=0;a="boolean"!=typeof a||a,$.each(j,function(){var a,d,i=this,j=$(t(i.name),i.frozen===!0&&e.frozenColumns===!0?c.fhDiv:c.hDiv),k=i.searchoptions||{};switch(void 0!==k.defaultValue&&(a=k.defaultValue),f=i.index||i.name,i.stype){case"checkbox":w(j,-1);break;case"select":if(d=!(j.length>0)||!j[0].multiple,j.find("option").each(function(b){if(this.selected=0===b&&d,$(this).val()===a)return this.selected=!0,!1}),void 0!==a)g[f]=a,h++;else try{delete e.postData[f]}catch(a){}break;case"text":if(j.val(a||""),void 0!==a)g[f]=a,h++;else try{delete e.postData[f]}catch(a){}break;case"custom":$.isFunction(k.custom_value)&&j.length>0&&"SPAN"===j[0].nodeName.toUpperCase()&&(void 0===a&&(a=""),k.custom_value.call(b,j.children(".customelement").first(),"set",a))}});var k=h>0;if(e.resetsearch=!0,i.stringResult||i.searchOperators||"local"===e.datatype){var l='{"groupOp":"'+i.groupOp+'","rules":[',m=0;$.each(g,function(a,b){m>0&&(l+=","),l+='{"field":"'+a+'",',l+='"op":"eq",',b+="",l+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',m++}),l+="]}",$.extend(e.postData,{filters:l}),$.each(["searchField","searchString","searchOper"],function(a,b){e.postData.hasOwnProperty(b)&&delete e.postData[b]})}else $.extend(e.postData,g);var n;e.searchurl&&(n=e.url,d.jqGrid("setGridParam",{url:e.searchurl}));var o="stop"===d.triggerHandler("jqGridToolbarBeforeClear");!o&&$.isFunction(i.beforeClear)&&(o=i.beforeClear.call(b)),o||a&&d.jqGrid("setGridParam",{search:k}).trigger("reloadGrid",[$.extend({page:1},i.reloadGridResetOptions||{})]),n&&d.jqGrid("setGridParam",{url:n}),d.triggerHandler("jqGridToolbarAfterClear"),$.isFunction(i.afterClear)&&i.afterClear.call(b)},z=function(){var a=$("tr.ui-search-toolbar",c.hDiv),b=e.frozenColumns===!0&&$("tr.ui-search-toolbar",c.fhDiv);"none"===a.css("display")?(a.show(),b&&b.show()):(a.hide(),b&&b.hide()),e.frozenColumns===!0&&(d.jqGrid("destroyFrozenColumns"),d.jqGrid("setFrozenColumns"))},A=k("search.odata")||[],B=e.customSortOperations,C=function(a,c,f){$("#sopt_menu").remove(),c=parseInt(c,10),f=parseInt(f,10)+18;var h,k,l=0,m=[],n=$(a).data("soper"),q=$(a).data("colname"),r=$(".ui-jqgrid-view").css("font-size")||"11px",s="<ul id='sopt_menu' class='"+getGuiStyles.call(b,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+r+";left:"+c+"px;top:"+f+"px;'>";if(l=e.iColByName[q],void 0!==l){var t,u,v,w,y,z=j[l],C=$.extend({},z.searchoptions);for(C.sopt||(C.sopt=[],C.sopt[0]="select"===z.stype||"checkbox"===z.stype?"eq":i.defaultSearch),$.each(A,function(){m.push(this.oper)}),null!=B&&$.each(B,function(a){m.push(a)}),l=0;l<C.sopt.length;l++)v=C.sopt[l],k=$.inArray(v,m),k!==-1&&(t=A[k],void 0!==t?(w=i.operands[v],y=t.text):null!=B&&(u=B[v],w=u.operand,y=u.text),h=n===v?p:"",s+='<li class="ui-menu-item '+h+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+g(v)+'" data-oper="'+g(w)+'"><table><tr><td style="width:25px">'+g(w)+"</td><td>"+g(y)+"</td></tr></table></a></li>");s+="</ul>",$("body").append(s),$("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),$("#sopt_menu > li > a").hover(function(){$(this).addClass(o)},function(){$(this).removeClass(o)}).click(function(){var b=$(this).attr("value"),c=$(this).data("oper");if(d.triggerHandler("jqGridToolbarSelectOper",[b,c,a]),$("#sopt_menu").hide(),$(a).data("soper",b).text(c),i.autosearch===!0){var f=$(a).parent().next().children()[0];($(f).val()||"nu"===b||"nn"===b||$.inArray(b,e.customUnaryOperations)>=0)&&x()}})}},D=[],E=$("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});i.loadFilterDefaults&&(r=v()||{}),$.each(j,function(a){var c,d,g,j,p,t,u,v=this,y="filter",z=v.searchoptions||{},C=v.editoptions||{},F=$("<th></th>",{class:getGuiStyles.call(b,"colHeaders","ui-th-column ui-th-"+e.direction+" "+(i.applyLabelClasses?v.labelClasses||"":"")),role:"gridcell","aria-describedby":e.id+"_"+v.name}),G=$("<div></div>"),H=$("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),I=H.children("tbody").children("tr").children("td"),J=I.eq(0),K=I.eq(1),L=I.eq(2);if(this.hidden===!0&&F.css("display","none"),this.search=this.search!==!1,void 0===this.stype&&(this.stype="text"),c=$.extend({mode:y},z),this.search){if(i.searchOperators){for(j=e.search&&null!=r[this.name]?r[this.name].op:c.sopt?c.sopt[0]:"select"===v.stype||"checkbox"===v.stype?"eq":i.defaultSearch,p=0;p<A.length;p++)if(A[p].oper===j){g=i.operands[j]||"";break}if(void 0===g&&null!=B){var M;for(M in B)if(B.hasOwnProperty(M)&&M===j){g=B[M].operand;break}}void 0===g&&(g="="),J.append("<a title='"+(null!=c.searchtitle?c.searchtitle:k("search.operandTitle"))+"' data-soper='"+j+"' class='"+getGuiStyles.call(b,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+g+"</a>")}if(J.data("colindex",a),null!=c.sopt&&1!==c.sopt.length||J.hide(),e.search&&null!=r[this.name]&&(c.defaultValue=r[this.name].data),void 0===c.clearSearch&&(c.clearSearch="text"===this.stype),c.clearSearch){var N=$.isFunction(i.resetTitle)?i.resetTitle.call(b,{options:i,cm:v,cmName:v.name,iCol:a}):(k("search.resetTitle")||"Clear Search Value")+" "+jgrid.stripHtml(e.colNames[a]);L.append("<a title='"+N+"' aria-label='"+N+"' class='"+getGuiStyles.call(b,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+i.resetIcon+"</span></a>")}else L.hide();switch(G.append(H),this.stype){case"checkbox":var O=void 0!==c.defaultValue?c.defaultValue:"-1";u=$("<input role='search' type='checkbox' class='"+q+"' name='"+(v.index||v.name)+"' id='"+s(v.name)+"' aria-labelledby='jqgh_"+e.id+"_"+v.name+"' data-state='"+O+"'/>"),"-1"===O?u.prop("indeterminate",!0):"1"===O&&u.prop("checked",!0),u.click(function(){var a=$(this);switch(a.data("state")){case-1:w(a,1);break;case 0:w(a,-1);break;default:w(a,0)}i.autosearch===!0&&x()}),K.append(u),c.attr&&u.attr(c.attr),D.push({elem:u[0],options:c});break;case"select":if(d=this.surl||c.dataUrl)$.ajax($.extend({url:d,context:{$tdInput:K,options:c,cm:v,iCol:a},dataType:"html",success:function(a,d,e){var f,g,h,j=this.cm,k=this.iCol,l=this.options,m=this.$tdInput;void 0!==l.buildSelect?(f=l.buildSelect.call(b,a,e,j,k),f&&m.append(f)):m.append(a),h=m.children("select"),h.attr({name:j.index||j.name,id:s(j.name)}),l.attr&&h.attr(l.attr),h.addClass(q),h.css({width:"100%"}),0===h.find("option[value='']").length&&"string"==typeof c.noFilterText&&(g=document.createElement("option"),g.value="",g.innerHTML=c.noFilterText,h.prepend(g),null!=$(h[0].options[h[0].selectedIndex]).attr("selected")||h[0].multiple||(h[0].selectedIndex=0)),h[0].multiple&&0===h.find("option[selected]").length&&h[0].selectedIndex!==-1&&(h[0].options[h[0].selectedIndex].selected=!1),void 0!==l.defaultValue&&h.val(l.defaultValue),jgrid.bindEv.call(b,h[0],l),jgrid.fullBoolFeedback.call(b,l.selectFilled,"jqGridSelectFilled",{elem:h[0],options:l,cm:j,cmName:j.name,iCol:k,mode:y}),i.autosearch===!0&&h.change(function(){return x(),!1})}},jgrid.ajaxOptions,e.ajaxSelectOptions||{}));else{var P,Q,R;if(v.searchoptions?(P=void 0===z.value?C.value||"":z.value,Q=void 0===z.separator?C.separator||":":z.separator,R=void 0===z.delimiter?C.delimiter||";":z.delimiter):v.editoptions&&(P=void 0===C.value?"":C.value,Q=void 0===C.separator?":":C.separator,R=void 0===C.delimiter?";":C.delimiter),z.generateValue&&null!=e.indexByColumnData[v.name]&&(P=b.generateValueFromColumnIndex(v.name,Q,R)),P){t=document.createElement("select"),t.style.width="100%",u=$(t).attr({name:v.index||v.name,role:"search",id:s(v.name),"aria-describedby":e.id+"_"+v.name}),c.attr&&u.attr(c.attr);var S=jgrid.fillSelectOptions(t,P,Q,R,null!=c.attr&&c.attr.multiple);if(!S&&"string"==typeof c.noFilterText){var T=document.createElement("option");T.value="",T.innerHTML=c.noFilterText,T.selected=!0,u.prepend(T)}void 0!==c.defaultValue&&u.val(c.defaultValue),u.addClass(q),D.push({elem:t,options:c}),K.append(t),jgrid.fullBoolFeedback.call(b,c.selectFilled,"jqGridSelectFilled",{elem:t,options:v.searchoptions||C,cm:v,cmName:v.name,iCol:a,mode:y}),i.autosearch===!0&&u.change(function(){return x(),!1})}}break;case"text":u=$("<input role='search' type='text' class='"+q+"' name='"+(v.index||v.name)+"' id='"+s(v.name)+"' aria-labelledby='jqgh_"+e.id+"_"+v.name+"' value='"+(void 0!==c.defaultValue?c.defaultValue:"")+"'/>"),K.append(u),c.attr&&u.attr(c.attr),D.push({elem:u[0],options:c}),i.autosearch===!0&&(i.searchOnEnter?u.keypress(function(a){var b=a.charCode||a.keyCode||0;return 13===b?(x(),!1):this}):u.keydown(function(a){var b=a.which;switch(b){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:h&&clearTimeout(h),h=setTimeout(function(){x()},i.autosearchDelay)}}));break;case"custom":K.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(v.index||v.name)+"' id='"+s(v.name)+"'/>");try{if(!$.isFunction(c.custom_element))throw"e1";var U=c.custom_element.call(b,void 0!==c.defaultValue?c.defaultValue:"",c);if(!U)throw"e2";U=$(U).addClass("customelement"),G.find("span[name='"+(v.index||v.name)+"']").append(U)}catch(a){"e1"===a&&f.call(b,l,"function 'custom_element' "+n.nodefined,m),"e2"===a?f.call(b,l,"function 'custom_element' "+n.novalue,m):f.call(b,l,"string"==typeof a?a:a.message,m)}}}F.append(G),F.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){$(this).addClass(o)},function(){$(this).removeClass(o)}),E.append(F),i.searchOperators||J.hide()}),$(c.hDiv).find(">div>.ui-jqgrid-htable>thead").append(E),$.each(D,function(){jgrid.bindEv.call(b,this.elem,this.options)}),i.searchOperators&&($(".soptclass",E).click(function(a){var b=$(this).offset(),c=b.left,d=b.top;C(this,c,d),a.stopPropagation()}),$("body").on("click",function(a){"soptclass"!==a.target.className&&$("#sopt_menu").hide()})),$(".clearsearchclass",E).click(function(){var a,b,c=$(this).closest(".ui-search-clear"),d=c.siblings(".ui-search-oper"),f=d.children("a"),g=f.data("soper"),h=parseInt(d.data("colindex"),10),k=c.siblings(".ui-search-input"),l=j[h],m=$.extend({},l.searchoptions||{}),n=m.defaultValue||"";switch(l.stype){case"select":n?k.find("select").val(n):k.find("select")[0].selectedIndex=0;break;case"checkbox":w(k.find("input[type=checkbox]"),-1);break;default:k.find("input").val(n)}("nu"===g||"nn"===g||$.inArray(g,e.customUnaryOperations)>=0)&&(a=m.sopt?m.sopt[0]:"select"===l.stype||"checkbox"===l.stype?"eq":i.defaultSearch,b=null!=B&&null!=B[a]?B[a].operand:i.operands[a]||"",f.data("soper",a).text(b)),i.autosearch===!0&&x()}),b.ftoolbar=!0,b.triggerToolbar=x,b.clearToolbar=y,b.toggleToolbar=z,e.frozenColumns===!0&&(d.jqGrid("destroyFrozenColumns"),d.jqGrid("setFrozenColumns")),d.on("jqGridRefreshFilterValues.filterToolbar"+(i.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var a,c,d,f,g,h,j,k=v(!0)||{};if(i.stringResult||i.searchOperators||"local"===e.datatype||!e.search){for(a in k)if(k.hasOwnProperty(a)&&(c=k[a],d=$(t(a)),h=d.closest("th.ui-th-column"),d.length>0&&h.length>0)){if(j=(e.colModel[h[0].cellIndex]||{}).searchoptions||{},"SELECT"===d[0].tagName.toUpperCase()&&d[0].multiple)d.val(c.data.split(e.inFilterSeparator||","));else if(d.is("input[type=checkbox]")){var l=u(j);w(d,c.data===l.on?1:c.data===l.off?0:-1)}else if(d.find(".customelement").length>0&&$.isFunction(j.custom_value)){var m=j.custom_value.call(b,d.find(".customelement").first(),"get");""===c.data&&void 0!==j.defaultValue&&(c.data=j.defaultValue),void 0===m&&(m=""),c.data!==m&&String(c.data)!==String(m)&&j.custom_value.call(b,d.find(".customelement").first(),"set",c.data)}else""===c.data&&void 0!==j.defaultValue&&(c.data=j.defaultValue),$.trim(d.val())!==String(c.data)&&d.val(c.data);f=d.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass"),f.data("soper",c.op),f.text(i.operands[c.op])}for(g=0;g<e.colModel.length;g++)a=e.colModel[g].name,k.hasOwnProperty(a)||$(t(a)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var a=this;a.ftoolbar&&(a.triggerToolbar=null,a.clearToolbar=null,a.toggleToolbar=null,a.ftoolbar=!1,$(a.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),a.p.frozenColumns===!0&&$(a).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(a){return void 0===a&&(a=!0),this.each(function(){var b,c,d,e,f,g=this,h=g.grid,i=g.p.colModel,j=$("table.ui-jqgrid-htable thead",h.hDiv);if(h){$(g).off(".setGroupHeaders");var k=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),l=h.headers;for(b=0,c=l.length;b<c;b++){f=i[b].hidden?"none":"",d=$(l[b].el).width(l[b].width).css("display",f);try{d.removeAttr("rowSpan")}catch(a){d.attr("rowSpan",1)}k.append(d),e=d.children("span.ui-jqgrid-resize"),e.length>0&&(e[0].style.height=""),d.children("div")[0].style.top=""}$(j).children("tr.ui-jqgrid-labels").remove(),$(j).prepend(k),a===!0&&$(g).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(a){return a=$.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},a||{}),this.each(function(){this.p.groupHeader=a;var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this,q=0,r=p.p,s=r.colModel,t=s.length,u=p.grid.headers,v=$("table.ui-jqgrid-htable",p.grid.hDiv),w=jgrid.isCellClassHidden,x=v.children("thead").children("tr.ui-jqgrid-labels"),y=x.last().addClass("jqg-second-row-header"),z=v.children("thead"),A=v.find(".jqg-first-row-header");void 0===A[0]?A=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):A.empty();var B=function(a,b){var c;for(c=0;c<b.length;c++)if(b[c].startColumnName===a)return b[c];return 0};for($(p).prepend(z),d=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),b=0;b<t;b++)if(f=u[b].el,g=$(f),c=s[b],h={height:"0",width:u[b].width+"px",display:c.hidden?"none":""},$("<th>",{role:"gridcell"}).css(h).addClass("ui-first-th-"+r.direction+(a.applyLabelClasses?" "+(c.labelClasses||""):"")).appendTo(A),f.style.width="",o=getGuiStyles.call(p,"colHeaders","ui-th-column-header ui-th-"+r.direction+" "+(a.applyLabelClasses?c.labelClasses||"":"")),j=B(c.name,a.groupHeaders)){for(k=j.numberOfColumns,l=j.titleText,m=0,i=0;i<k&&b+i<t;i++)s[b+i].hidden||w(s[b+i].classes)||m++;e=$("<th>").addClass(o).css({height:"22px","border-top":"0 none"}).html(l),m>0&&e.attr("colspan",String(m)),r.headertitles&&e.attr("title",e.text()),0===m&&e.hide(),g.before(e),d.append(f),q=k-1}else 0===q?a.useColSpanStyle?g.attr("rowspan",x.length+1):($("<th>").addClass(o).css({display:c.hidden?"none":"","border-top":"0 none"}).insertBefore(g),d.append(f)):(d.append(f),q--);n=$(p).children("thead"),n.prepend(A),d.insertAfter(y),v.prepend(n),a.useColSpanStyle&&(v.find("span.ui-jqgrid-resize").each(function(){var a=$(this).parent();a.is(":visible")&&(this.style.cssText="height:"+a.height()+"px !important;cursor:col-resize;")}),v.find(".ui-th-column>div").each(function(){var a=$(this),b=a.parent();b.is(":visible")&&b.is(":has(span.ui-jqgrid-resize)")&&!a.hasClass("ui-jqgrid-rotate")&&!a.hasClass("ui-jqgrid-rotateOldIE")&&a.css("top",(b.height()-a.outerHeight(!0))/2+"px")})),$(p).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var a=this;if(0===a.length)return 0;a=a[0];var b,c=a.p.colModel,d=c.length,e=-1;for(b=0;b<d&&c[b].frozen===!0;b++)e=b;return e+1},setFrozenColumns:function(a){return a=a||{},this.each(function(){var b=this,c=$(b),d=b.p,e=b.grid;if(e&&null!=d&&d.frozenColumns!==!0){var f,g,h=d.colModel,i=h.length,j=-1,k=!1,l=[],m=jqID(d.id),n=getGuiStyles.call(b,"states.hover"),o=getGuiStyles.call(b,"states.disabled");if(d.subGrid!==!0&&d.treeGrid!==!0&&!d.scroll){for(f=0;f<i&&h[f].frozen===!0;f++)k=!0,j=f,l.push("#jqgh_"+m+"_"+jqID(h[f].name));if(d.sortable&&(g=$(e.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels"),g.sortable("destroy"),c.jqGrid("setGridParam",{sortable:{options:{items:l.length>0?">th:not(:has("+l.join(",")+"),:hidden)":">th:not(:hidden)"}}}),c.jqGrid("sortableColumns",g)),j>=0&&k){var p=d.caption?$(e.cDiv).outerHeight():0,q=$(".ui-jqgrid-htable",d.gView).height();d.toppager&&(p+=$(e.topDiv).outerHeight()),d.toolbar[0]===!0&&"bottom"!==d.toolbar[1]&&(p+=$(e.uDiv).outerHeight()),e.fhDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===d.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+p+"px;height:"+q+"px;' class='"+getGuiStyles.call(b,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),e.fbDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===d.direction?"right:0;":"left:0;")+"top:"+(parseInt(p,10)+parseInt(q,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),$(d.gView).append(e.fhDiv);var r=$(".ui-jqgrid-htable",d.gView).clone(!0),s=r[0].tHead.rows;if(d.groupHeader){$(s[0].cells).filter(":gt("+j+")").remove(),$(s).filter(".jqg-third-row-header").each(function(){$(this).children("th[id]").each(function(){var a,c=$(this).attr("id");c&&c.substr(0,b.id.length+1)===b.id+"_"&&(a=c.substr(b.id.length+1),d.iColByName[a]>j&&$(this).remove())})});var t,u,v=-1,w=-1;$(s).filter(".jqg-second-row-header").children("th").each(function(){if(t=parseInt($(this).attr("colspan")||1,10),u=parseInt($(this).attr("rowspan")||1,10),u>1?(v++,w++):t&&(v+=t,w++),v===j)return!1}),v!==j&&(w=j),$(s).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){$(this).children(":gt("+w+")").remove()})}else $(s).each(function(){$(this).children(":gt("+j+")").remove()});if($(r).width(1),$(e.fhDiv).append(r).scroll(function(){this.scrollLeft=0}),d.footerrow){var x=$(".ui-jqgrid-bdiv",d.gView).height();e.fsDiv=$("<div style='position:absolute;"+("rtl"===d.direction?"right:0;":"left:0;")+"top:"+(parseInt(p,10)+parseInt(q,10)+parseInt(x,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),$(d.gView).append(e.fsDiv);var y=$(".ui-jqgrid-ftable",d.gView).clone(!0);$("tr",y).each(function(){$("td:gt("+j+")",this).remove()}),$(y).width(1),$(e.fsDiv).append(y)}c.on("jqGridSortCol.setFrozenColumns",function(a,b,c){var f=$("tr.ui-jqgrid-labels:last th:eq("+d.lastsort+")",e.fhDiv),g=$("tr.ui-jqgrid-labels:last th:eq("+c+")",e.fhDiv);$("span.ui-grid-ico-sort",f).addClass(o),$(f).attr("aria-selected","false"),$("span.ui-icon-"+d.sortorder,g).removeClass(o),$(g).attr("aria-selected","true"),d.viewsortcols[0]||d.lastsort!==c&&($("span.s-ico",f).hide(),$("span.s-ico",g).show())}),$(d.gView).append(e.fbDiv),$(e.bDiv).scroll(function(){$(e.fbDiv).scrollTop($(this).scrollTop())}),$(e.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(c){e.bDiv.scrollTop+=$.isFunction(a.mouseWheel)?a.mouseWheel.call(b,c):"mousewheel"===c.type?-c.originalEvent.wheelDelta/10:6*c.originalEvent.detail}),d.hoverrows===!0&&$(d.idSel).off("mouseover.jqGrid mouseout.jqGrid");var z=function(a,b){var c=a.height();Math.abs(c-b)>=1&&b>0&&(a.height(b),c=a.height(),Math.abs(b-c)>=1&&a.height(b+Math.round(b-c)))},A=function(a,b){var c=a.width();Math.abs(c-b)>=1&&(a.width(b),c=a.width(),Math.abs(b-c)>=1&&a.width(b+Math.round(b-c)))},B=function(a,b,c,e){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=$(b).position().top;if(null!=a&&a.length>0){if(a[0].scrollTop=b.scrollTop,a.css("rtl"===d.direction?{top:t,right:0}:{top:t,left:0}),i=a.children("table").children("thead").children("tr"),j=$(b).children("div").children("table").children("thead").children("tr"),0===j.length&&(i=$(a.children("table")[0].rows),j=$($(b).children("div").children("table")[0].rows)),h=Math.min(i.length,j.length),q=h>0?$(i[0]).position().top:0,r=h>0?$(j[0]).position().top:0,c>=0)for(e>=0&&(h=Math.min(e+1,h)),g=c;g<h;g++)if(k=$(j[g]),"none"!==k.css("display")&&k.is(":visible")){if(t=k.position().top,l=$(i[g]),m=l.position().top,n=k.height(),null!=d.groupHeader&&d.groupHeader.useColSpanStyle)for(s=k[0].cells,f=0;f<s.length;f++)p=s[f],null!=p&&"TH"===p.nodeName.toUpperCase()&&(n=Math.max(n,$(p).height()));o=n+(t-r)+(q-m),z(l,o)}z(a,b.clientHeight)}},C={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},D={header:C,resizeFooter:!0,body:C};c.on("jqGridAfterGridComplete.setFrozenColumns",function(){$(d.idSel+"_frozen").remove(),
$(e.fbDiv).height(e.hDiv.clientHeight);var a=$(this).clone(!0),b=a[0].rows,f=c[0].rows;if($(b).filter("tr[role=row]").each(function(){$(this.cells).filter("td[role=gridcell]:gt("+j+")").remove()}),e.fbRows=b,a.width(1).attr("id",d.id+"_frozen"),a.appendTo(e.fbDiv),d.hoverrows===!0){var g=function(a,b,c){$(a)[b](n),$(c[a.rowIndex])[b](n)};$(b).filter(".jqgrow").hover(function(){g(this,"addClass",f)},function(){g(this,"removeClass",f)}),$(f).filter(".jqgrow").hover(function(){g(this,"addClass",b)},function(){g(this,"removeClass",b)})}B(e.fhDiv,e.hDiv,0,-1),B(e.fbDiv,e.bDiv,0,-1),e.sDiv&&B(e.fsDiv,e.sDiv,0,-1)});var E=function(a){$(e.fbDiv).scrollTop($(e.bDiv).scrollTop()),a.header.resizeDiv&&B(e.fhDiv,e.hDiv,a.header.resizedRows.iRowStart,a.header.resizedRows.iRowEnd),a.body.resizeDiv&&B(e.fbDiv,e.bDiv,a.body.resizedRows.iRowStart,a.body.resizedRows.iRowEnd),a.resizeFooter&&e.sDiv&&a.resizeFooter&&B(e.fsDiv,e.sDiv,0,-1);var b=e.fhDiv[0].clientWidth;a.header.resizeDiv&&null!=e.fhDiv&&e.fhDiv.length>=1&&z($(e.fhDiv),e.hDiv.clientHeight),a.body.resizeDiv&&null!=e.fbDiv&&e.fbDiv.length>0&&A($(e.fbDiv),b),a.resizeFooter&&null!=e.fsDiv&&e.fsDiv.length>=0&&A($(e.fsDiv),b)};$(d.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){E(D)},50)}),c.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(a,b){var d=c.jqGrid("getInd",b);E({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:d,iRowEnd:d}}})}),c.on("jqGridResizeStop.setFrozenColumns",function(){E(D)}),c.on("jqGridResetFrozenHeights.setFrozenColumns",function(a,b){E(b||D)}),e.hDiv.loading||c.triggerHandler("jqGridAfterGridComplete"),d.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var a=this,b=$(a),c=a.grid,d=a.p,e=jqID(d.id);if(c&&d.frozenColumns===!0){if($(c.fhDiv).remove(),$(c.fbDiv).off(".setFrozenColumns"),$(c.fbDiv).remove(),c.fhDiv=null,c.fbDiv=null,c.fbRows=null,d.footerrow&&($(c.fsDiv).remove(),c.fsDiv=null),b.off(".setFrozenColumns"),d.hoverrows===!0){var f,g=getGuiStyles.call(a,"states.hover");b.on("mouseover.jqGrid",function(a){f=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(f).attr("class")&&$(f).addClass(g)}).on("mouseout.jqGrid",function(a){f=$(a.target).closest("tr.jqgrow"),$(f).removeClass(g)})}if(d.frozenColumns=!1,d.sortable){var h=$(c.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");h.sortable("destroy"),b.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)"}}}),b.jqGrid("sortableColumns",h)}}})}}),$.fn.jqFilter=function(a){if("string"==typeof a){var b=$.fn.jqFilter[a];if(!b)throw"jqFilter - No such method: "+a;var c=$.makeArray(arguments).slice(1);return b.apply(this,c)}var d=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},jgrid.filter,a||{});return this.each(function(){if(!this.filter){this.p=d,null!==d.filter&&void 0!==d.filter||(d.filter={groupOp:d.groupOps[0].op,rules:[],groups:[]});var a,b,c=d.columns.length,e=/msie/i.test(navigator.userAgent)&&!window.opera,f=$.isFunction,g=null!=jgrid.defaults&&f(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert,h=function(){return $("#"+jgrid.jqID(d.id))[0]||null},i=function(a,b){return $(h()).jqGrid("getGuiStyles",a,b||"")},j=function(a){return $(h()).jqGrid("getGridRes","search."+a)},k=function(a){var b=h(),c=b.p.iColByName[a];return void 0!==c?{cm:b.p.colModel[c],iCol:c}:(c=b.p.iPropByName[a],void 0!==c?{cm:b.p.colModel[c],iCol:c,isAddProp:!0}:{cm:null,iCol:-1})},l=i("states.error"),m=i("dialog.content");if(d.initFilter=$.extend(!0,{},d.filter),c){for(a=0;a<c;a++)b=d.columns[a],b.stype?b.inputtype=b.stype:b.inputtype||(b.inputtype="text"),b.sorttype?b.searchtype=b.sorttype:b.searchtype||(b.searchtype="string"),void 0===b.hidden&&(b.hidden=!1),b.label||(b.label=b.name),b.cmName=b.name,b.index&&(b.name=b.index),b.hasOwnProperty("searchoptions")||(b.searchoptions={}),b.hasOwnProperty("searchrules")||(b.searchrules={});d.showQuery&&$(this).append("<table class='queryresult "+m+"' style='display:block;max-width:440px;border:0px none;' dir='"+d.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var n=function(a,b){var c=[!0,""],e=h();if(f(b.searchrules))c=b.searchrules.call(e,a,b);else if(jgrid&&jgrid.checkValues)try{c=jgrid.checkValues.call(e,a,-1,b.searchrules,b.label)}catch(a){}c&&c.length&&c[0]===!1&&(d.error=!c[0],d.errmsg=c[1])};this.onchange=function(){return d.error=!1,d.errmsg="",!!f(d.onChange)&&d.onChange.call(h(),d,this)},this.reDraw=function(){$("table.group:first",this).remove();var a=this.createTableForGroup(d.filter,null);$(this).append(a),f(d.afterRedraw)&&d.afterRedraw.call(h(),d,this)},this.createTableForGroup=function(a,b){var c,e=this,f=$("<table class='"+i("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),g="left";"rtl"===d.direction&&(g="right",f.attr("dir","rtl")),null===b&&f.append("<tr class='error' style='display:none;'><th colspan='5' class='"+l+"' align='"+g+"'></th></tr>");var h=$("<tr></tr>");f.append(h);var k=$("<th colspan='5' align='"+g+"'></th>");if(h.append(k),d.ruleButtons===!0){var m=$("<select class='"+i("searchDialog.operationSelect","opsel")+"'></select>");k.append(m);var n,o="";for(c=0;c<d.groupOps.length;c++)n=a.groupOp===e.p.groupOps[c].op?" selected='selected'":"",o+="<option value='"+e.p.groupOps[c].op+"'"+n+">"+e.p.groupOps[c].text+"</option>";m.append(o).on("change",function(){a.groupOp=$(m).val(),e.onchange()})}var p="<span></span>";if(d.groupButton&&(p=$("<input type='button' value='+ {}' title='"+j("addGroupTitle")+"' class='"+i("searchDialog.addGroupButton","add-group")+"'/>"),p.on("click",function(){return void 0===a.groups&&(a.groups=[]),a.groups.push({groupOp:d.groupOps[0].op,rules:[],groups:[]}),e.reDraw(),e.onchange(),!1})),k.append(p),d.ruleButtons===!0){var q,r=$("<input type='button' value='+' title='"+j("addRuleTitle")+"' class='"+i("searchDialog.addRuleButton","add-rule ui-add")+"'/>");r.on("click",function(){var b,d,f;for(void 0===a.rules&&(a.rules=[]),c=0;c<e.p.columns.length;c++)if(b=void 0===e.p.columns[c].search||e.p.columns[c].search,d=e.p.columns[c].hidden===!0,f=e.p.columns[c].searchoptions.searchhidden===!0,f&&b||b&&!d){q=e.p.columns[c];break}var g;return g=q.searchoptions.sopt?q.searchoptions.sopt:e.p.sopt?e.p.sopt:$.inArray(q.searchtype,e.p.strarr)!==-1?e.p.stropts:e.p.numopts,a.rules.push({field:q.name,op:g[0],data:""}),e.reDraw(),!1}),k.append(r)}if(null!==b){var s=$("<input type='button' value='-' title='"+j("deleteGroupTitle")+"' class='"+i("searchDialog.deleteGroupButton","delete-group")+"'/>");k.append(s),s.on("click",function(){for(c=0;c<b.groups.length;c++)if(b.groups[c]===a){b.groups.splice(c,1);break}return e.reDraw(),e.onchange(),!1})}if(void 0!==a.groups){var t,u,v;for(c=0;c<a.groups.length;c++)t=$("<tr></tr>"),f.append(t),u=$("<td class='first'></td>"),t.append(u),v=$("<td colspan='4'></td>"),v.append(this.createTableForGroup(a.groups[c],a)),t.append(v)}if(void 0===a.groupOp&&(a.groupOp=e.p.groupOps[0].op),void 0!==a.rules)for(c=0;c<a.rules.length;c++)f.append(this.createTableRowForRule(a.rules[c],a));return f},this.createTableRowForRule=function(a,b){var c,g,l,m,n=this,o=h(),p=$("<tr></tr>"),q="";p.append("<td class='first'></td>");var r=$("<td class='columns'></td>");p.append(r);var s,t=$("<select class='"+i("searchDialog.label","selectLabel")+"'></select>"),u=[];r.append(t),t.on("change",function(){a.field=$(t).val();var b,c,d=$(this).parents("tr:first");for(c=0;c<n.p.columns.length;c++)if(n.p.columns[c].name===a.field){b=n.p.columns[c];break}if(b){var h=$.extend({},b.editoptions||{});delete h.readonly,delete h.disabled;var j=$.extend({},h||{},b.searchoptions||{},k(b.cmName),{id:jgrid.randId(),name:b.name,mode:"search"});j.column=b,e&&"text"===b.inputtype&&(j.size||(j.size=10));var l=jgrid.createEl.call(o,b.inputtype,j,"",!0,n.p.ajaxSelectOptions||{},!0);$(l).addClass(i("searchDialog.elem","input-elm")),g=j.sopt?j.sopt:n.p.sopt?n.p.sopt:$.inArray(b.searchtype,n.p.strarr)!==-1?n.p.stropts:n.p.numopts;var m,p,q,r="",v=0;for(u=[],$.each(n.p.ops,function(){u.push(this.oper)}),n.p.cops&&$.each(n.p.cops,function(a){u.push(a)}),c=0;c<g.length;c++)p=g[c],s=$.inArray(g[c],u),s!==-1&&(m=n.p.ops[s],q=void 0!==m?m.text:n.p.cops[p].text,0===v&&(a.op=p),r+="<option value='"+p+"'>"+q+"</option>",v++);if($(".selectopts",d).empty().append(r),$(".selectopts",d)[0].selectedIndex=0,jgrid.msie&&jgrid.msiever()<9){var w=parseInt($("select.selectopts",d)[0].offsetWidth,10)+1;$(".selectopts",d).width(w),$(".selectopts",d).css("width","auto")}$(".data",d).empty().append(l),jgrid.bindEv.call(o,l,j),$(".input-elm",d).on("change",j,function(b){var c=b.target,d=b.data.column;a.data=d&&"custom"===d.inputtype&&f(d.searchoptions.custom_value)?d.searchoptions.custom_value.call(o,$(this).find(".customelement").first(),"get"):c.value,$(c).is("input[type=checkbox]")&&!$(c).is(":checked")&&(a.data=$(c).data("offval")),n.onchange()}),setTimeout(function(){a.data=$(l).val(),n.onchange()},0)}});var v,w,x,y=0;for(c=0;c<n.p.columns.length;c++)v=void 0===n.p.columns[c].search||n.p.columns[c].search,w=n.p.columns[c].hidden===!0,x=n.p.columns[c].searchoptions.searchhidden===!0,(x&&v||v&&!w)&&(m="",a.field===n.p.columns[c].name&&(m=" selected='selected'",y=c),q+="<option value='"+n.p.columns[c].name+"'"+m+">"+n.p.columns[c].label+"</option>");t.append(q);var z=$("<td class='operators'></td>");p.append(z),l=d.columns[y],e&&"text"===l.inputtype&&(l.searchoptions.size||(l.searchoptions.size=10));var A=$.extend({},l.editoptions||{});delete A.readonly,delete A.disabled;var B=$.extend({},A,l.searchoptions||{},k(l.cmName),{id:jgrid.randId(),name:l.name});B.column=l;var C=jgrid.createEl.call(o,l.inputtype,B,a.data,!0,n.p.ajaxSelectOptions||{},!0);("nu"===a.op||"nn"===a.op||$.inArray(a.op,o.p.customUnaryOperations)>=0)&&($(C).attr("readonly","true"),$(C).attr("disabled","true"));var D=$("<select class='"+i("searchDialog.operator","selectopts")+"'></select>");z.append(D),D.on("change",function(){a.op=$(D).val();var b=$(this).parents("tr:first"),c=$(".input-elm",b)[0];"nu"===a.op||"nn"===a.op||$.inArray(a.op,o.p.customUnaryOperations)>=0?(a.data="","SELECT"!==c.tagName.toUpperCase()&&(c.value=""),c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):("SELECT"===c.tagName.toUpperCase()&&(a.data=c.value),c.removeAttribute("readonly"),c.removeAttribute("disabled")),n.onchange()}),g=l.searchoptions.sopt?l.searchoptions.sopt:n.p.sopt?n.p.sopt:$.inArray(l.searchtype,n.p.strarr)!==-1?n.p.stropts:n.p.numopts,q="";var E,F;for($.each(n.p.ops,function(){u.push(this.oper)}),n.p.cops&&$.each(n.p.cops,function(a){u.push(a)}),c=0;c<g.length;c++)F=g[c],s=$.inArray(g[c],u),s!==-1&&(E=n.p.ops[s],m=a.op===F?" selected='selected'":"",q+="<option value='"+F+"'"+m+">"+(void 0!==E?E.text:n.p.cops[F].text)+"</option>");D.append(q);var G=$("<td class='data'></td>");p.append(G),G.append(C),jgrid.bindEv.call(o,C,l.searchoptions),$(C).addClass(i("searchDialog.elem","input-elm")).on("change",function(){a.data="custom"===l.inputtype?l.searchoptions.custom_value.call(o,$(this).find(".customelement").first(),"get"):$(this).val(),$(this).is("input[type=checkbox]")&&!$(this).is(":checked")&&(a.data=$(this).data("offval")),n.onchange()});var H=$("<td></td>");if(p.append(H),d.ruleButtons===!0){var I=$("<input type='button' value='-' title='"+j("deleteRuleTitle")+"' class='"+i("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>");H.append(I),I.on("click",function(){for(c=0;c<b.rules.length;c++)if(b.rules[c]===a){b.rules.splice(c,1);break}return n.reDraw(),n.onchange(),!1})}return p},this.getStringForGroup=function(a){var b,c="(";if(void 0!==a.groups)for(b=0;b<a.groups.length;b++){c.length>1&&(c+=" "+a.groupOp+" ");try{c+=this.getStringForGroup(a.groups[b])}catch(a){g(a)}}if(void 0!==a.rules)try{for(b=0;b<a.rules.length;b++)c.length>1&&(c+=" "+a.groupOp+" "),c+=this.getStringForRule(a.rules[b])}catch(a){g(a)}return c+=")","()"===c?"":c},this.getStringForRule=function(a){var b,c,e,g,i="",j="",k=a.data,l=["int","integer","float","number","currency"];for(b=0;b<d.ops.length;b++)if(d.ops[b].oper===a.op){i=d.operands.hasOwnProperty(a.op)?d.operands[a.op]:"",j=d.ops[b].oper;break}if(""===j&&null!=d.cops)for(g in d.cops)if(d.cops.hasOwnProperty(g)&&(j=g,i=d.cops[g].operand,f(d.cops[g].buildQueryValue)))return d.cops[g].buildQueryValue.call(d,{cmName:a.field,searchValue:k,operand:i});for(b=0;b<d.columns.length;b++)if(d.columns[b].name===a.field){c=d.columns[b];break}return null==c?"":("bw"!==j&&"bn"!==j||(k+="%"),"ew"!==j&&"en"!==j||(k="%"+k),"cn"!==j&&"nc"!==j||(k="%"+k+"%"),"in"!==j&&"ni"!==j||(k=" ("+k+")"),d.errorcheck&&n(a.data,c),e=$.inArray(c.searchtype,l)!==-1||"nn"===j||"nu"===j||$.inArray(j,h().p.customUnaryOperations)>=0?a.field+" "+i+" "+k:a.field+" "+i+' "'+k+'"')},this.resetFilter=function(){d.filter=$.extend(!0,{},d.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+l,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+l,this).html(d.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(d.filter)},this.toString=function(){function a(a){if(c.p.errorcheck){var b,d;for(b=0;b<c.p.columns.length;b++)if(c.p.columns[b].name===a.field){d=c.p.columns[b];break}d&&n(a.data,d)}return a.op+"(item."+a.field+",'"+a.data+"')"}function b(c){var d,e="(";if(void 0!==c.groups)for(d=0;d<c.groups.length;d++)e.length>1&&(e+="OR"===c.groupOp?" || ":" && "),e+=b(c.groups[d]);if(void 0!==c.rules)for(d=0;d<c.rules.length;d++)e.length>1&&(e+="OR"===c.groupOp?" || ":" && "),e+=a(c.rules[d]);return e+=")","()"===e?"":e}var c=this;return b(d.filter)},this.reDraw(),d.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var a="";return this.each(function(){a=this.toUserFriendlyString()}),a},filterData:function(){var a;return this.each(function(){a=this.p.filter}),a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"==typeof a&&(a=$.parseJSON(a)),this.each(function(){this.p.filter=a,this.reDraw(),this.onchange()})}});var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var c=this.removeWhite(a),d=this.toObj(c),e=this.toJson(d,a.nodeName,"\t");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var c,d=function(a,b,c){var e,f,g,h,i,j="";if(a instanceof Array)if(0===a.length)j+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(e=0,f=a.length;e<f;e+=1)g=c+d(a[e],b,c+"\t")+"\n",j+=g;else if("object"==typeof a){h=!1,j+=c+"<"+b;for(i in a)a.hasOwnProperty(i)&&("@"===i.charAt(0)?j+=" "+i.substr(1)+'="'+a[i].toString()+'"':h=!0);if(j+=h?">":"/>",h){for(i in a)a.hasOwnProperty(i)&&("#text"===i?j+=a[i]:"#cdata"===i?j+="<![CDATA["+a[i]+"]]>":"@"!==i.charAt(0)&&(j+=d(a[i],i,c+"\t")));j+=("\n"===j.charAt(j.length-1)?c:"")+"</"+b+">"}}else"function"==typeof a?j+=c+"<"+b+"><![CDATA["+a+"]]></"+b+">":(void 0===a&&(a=""),j+='""'===a.toString()||0===a.toString().length?c+"<"+b+">__EMPTY_STRING_</"+b+">":c+"<"+b+">"+a.toString()+"</"+b+">");return j},e="";for(c in a)a.hasOwnProperty(c)&&(e+=d(a[c],c,""));return b?e.replace(/\t/g,b):e.replace(/\t|\n/g,"")},toObj:function(a){var b,c,d={},e=/function/i,f=0,g=0,h=!1;if(1===a.nodeType){if(a.attributes.length)for(b=0;b<a.attributes.length;b+=1)d["@"+a.attributes[b].nodeName]=(a.attributes[b].nodeValue||"").toString();if(a.firstChild){for(c=a.firstChild;c;c=c.nextSibling)1===c.nodeType?h=!0:3===c.nodeType&&c.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:4===c.nodeType&&(g+=1);if(h)if(f<2&&g<2)for(this.removeWhite(a),c=a.firstChild;c;c=c.nextSibling)3===c.nodeType?d["#text"]=this.escape(c.nodeValue):4===c.nodeType?e.test(c.nodeValue)?d[c.nodeName]=[d[c.nodeName],c.nodeValue]:d["#cdata"]=this.escape(c.nodeValue):d[c.nodeName]?d[c.nodeName]instanceof Array?d[c.nodeName][d[c.nodeName].length]=this.toObj(c):d[c.nodeName]=[d[c.nodeName],this.toObj(c)]:d[c.nodeName]=this.toObj(c);else a.attributes.length?d["#text"]=this.escape(this.innerXml(a)):d=this.escape(this.innerXml(a));else if(f)a.attributes.length?d["#text"]=this.escape(this.innerXml(a)):(d=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===d?d="[]":"__EMPTY_STRING_"===d&&(d=""));else if(g)if(g>1)d=this.escape(this.innerXml(a));else for(c=a.firstChild;c;c=c.nextSibling){if(e.test(a.firstChild.nodeValue)){d=a.firstChild.nodeValue;break}d["#cdata"]=this.escape(c.nodeValue)}}a.attributes.length||a.firstChild||(d=null)}else 9===a.nodeType?d=this.toObj(a.documentElement):(null!=$.jgrid&&null!=$.jgrid.defaults&&$.isFunction($.jgrid.defaults.fatalError)?$.jgrid.defaults.fatalError:alert)("unhandled node type: "+a.nodeType);return d},toJson:function(a,b,c,d){void 0===d&&(d=!0);var e,f,g,h=b?'"'+b+'"':"",i="\t",j="\n",k=[],l=[];if(d||(i="",j=""),"[]"===a)h+=b?":[]":"[]";else if(a instanceof Array){for(f=0,e=a.length;f<e;f+=1)k[f]=this.toJson(a[f],"",c+i,d);h+=(b?":[":"[")+(k.length>1?j+c+i+k.join(","+j+c+i)+j+c:k.join(""))+"]"}else if(null===a)h+=(b&&":")+"null";else if("object"==typeof a){for(g in a)a.hasOwnProperty(g)&&(l[l.length]=this.toJson(a[g],g,c+i,d));h+=(b?":{":"{")+(l.length>1?j+c+i+l.join(","+j+c+i)+j+c:l.join(""))+"}"}else h+="string"==typeof a?(b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(b&&":")+a.toString();return h},innerXml:function(a){var b,c="",d=function(a){var b,c,e="";if(1===a.nodeType){for(e+="<"+a.nodeName,b=0;b<a.attributes.length;b+=1)e+=" "+a.attributes[b].nodeName+'="'+(a.attributes[b].nodeValue||"").toString()+'"';if(a.firstChild){for(e+=">",c=a.firstChild;c;c=c.nextSibling)e+=d(c);e+="</"+a.nodeName+">"}else e+="/>"}else 3===a.nodeType?e+=a.nodeValue:4===a.nodeType&&(e+="<![CDATA["+a.nodeValue+"]]>");return e};if(a.hasOwnProperty("innerHTML"))c=a.innerHTML;else for(b=a.firstChild;b;b=b.nextSibling)c+=d(b);return c},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();for(var b,c=a.firstChild;c;)3===c.nodeType?c.nodeValue.match(/[^ \f\n\r\t\v]/)?c=c.nextSibling:(b=c.nextSibling,a.removeChild(c),c=b):1===c.nodeType?(this.removeWhite(c),c=c.nextSibling):c=c.nextSibling;return a}};window.xmlJsonClass=xmlJsonClass;var jgridFeedback=jgrid.feedback,fullBoolFeedback=jgrid.fullBoolFeedback,builderFmButon=jgrid.builderFmButon,addFormIcon=function(a,b,c){var d;b[0]===!0&&(d="<span class='"+mergeCssClasses("fm-button-icon",c,b[2])+"'></span>","right"===b[1]?a.addClass("fm-button-icon-right").append(d):a.addClass("fm-button-icon-left").prepend(d))},getGuiStateStyles=function(a){return getGuiStyles.call(this,"states."+a)},hideRowsWithoutVissibleCells=function(a){a.find("tr[data-rowpos]").each(function(){var a=0;$(this).children("td").each(function(){"hidden"!==$(this).css("visibility")&&a++}),a||$(this).hide()})},isEmptyString=function(a){return"&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0)};jgrid.extend({searchGrid:function(a){return this.each(function(){function b(a){o("beforeShow",a)&&($(j).data("onClose",f.onClose),jgrid.viewModal.call(c,j,{gbox:k,jqm:f.jqModal,overlay:f.overlay,modal:f.modal,overlayClass:f.overlayClass,toTop:f.toTop,onHide:function(a){a.w.remove(),a.o&&a.o.remove()}}),o("afterShow",a))}var c=this,d=$(c),e=c.p;if(c.grid&&null!=e){var f=$.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},base.getGridRes.call(d,"search"),jgrid.search||{},e.searching||{},a||{}),g="fbox_"+e.id,h=f.commonIconClass,i={themodal:"searchmod"+g,modalhead:"searchhd"+g,modalcontent:"searchcnt"+g,resizeAlso:g},j="#"+jqID(i.themodal),k=e.gBox,l=e.gView,m=$.each,n=e.postData[f.sFilter],o=function(){var a=$.makeArray(arguments);return a.unshift("Search"),a.unshift("Filter"),a.unshift(f),jgridFeedback.apply(c,a)},p=function(){jgrid.hideModal(j,{gb:k,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})};if("string"==typeof n&&(n=""!==$.trim(n)?$.parseJSON(n):void 0),$(j).remove(),void 0!==$(j)[0])b($("#fbox_"+jqID(e.id)));else{var q=$("<div><div id='"+g+"' class='"+getGuiStyles.call(c,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(l);"rtl"===e.direction&&q.attr("dir","rtl");var r,s,t="",u="",v=!1,w=-1,x=$.extend([],e.colModel),y=builderFmButon.call(c,g+"_search",f.Find,mergeCssClasses(h,f.findDialogIcon),"right"),z=builderFmButon.call(c,g+"_reset",f.Reset,mergeCssClasses(h,f.resetDialogIcon),"left");if(f.showQuery&&(t=builderFmButon.call(c,g+"_query","Query",mergeCssClasses(h,f.queryDialogIcon),"left")+"&#160;"),f.searchForAdditionalProperties&&m(e.additionalProperties,function(){var a="string"==typeof this?{name:this}:this;a.label||(a.label=a.name),a.isAddProp=!0,x.push(a)}),f.columns.length?(x=f.columns,w=0,r=x[0].index||x[0].name):m(x,function(a,b){if(b.label||(b.label=b.isAddProp?b.name:e.colNames[a]),!v){var c=void 0===b.search||b.search,d=b.hidden===!0,f=b.searchoptions&&b.searchoptions.searchhidden===!0;(f&&c||c&&!d)&&(v=!0,r=b.index||b.name,w=a)}}),!n&&r||f.multipleSearch===!1){var A="eq";w>=0&&x[w].searchoptions&&x[w].searchoptions.sopt?A=x[w].searchoptions.sopt[0]:f.sopt&&f.sopt.length&&(A=f.sopt[0]),n={groupOp:"AND",rules:[{field:r,op:A,data:""}]}}v=!1,f.tmplNames&&f.tmplNames.length&&(v=!0,u=f.tmplLabel,u+="<select class='ui-template'>",u+="<option value='default'>Default</option>",m(f.tmplNames,function(a,b){u+="<option value='"+a+"'>"+b+"</option>"}),u+="</select>"),s="<div class='"+getGuiStyles.call(c,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+g+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(c,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+e.direction+"'  style='float:"+("rtl"===e.direction?"right":"left")+";'>"+z+u+"</td><td class='EditButton EditButton-"+e.direction+"'>"+t+y+"</td></tr></tbody></table></div>",g=jqID(g),f.gbox=k,f.height="auto",g="#"+g,$(g).jqFilter({columns:x,filter:f.loadDefaults?n:null,showQuery:f.showQuery,errorcheck:f.errorcheck,sopt:f.sopt,groupButton:f.multipleGroup,ruleButtons:f.multipleSearch,afterRedraw:f.afterRedraw,ops:f.odata,cops:e.customSortOperations,operands:f.operands,ajaxSelectOptions:e.ajaxSelectOptions,groupOps:f.groupOps,onChange:function(a,b){a.showQuery&&$(".query",b).text(b.toUserFriendlyString()),fullBoolFeedback.call(c,f.afterChange,"jqGridFilterAfterChange",$(g),f,a,b)},direction:e.direction,id:e.id}),q.append(s),v&&f.tmplFilters&&f.tmplFilters.length&&$(".ui-template",q).on("change",function(){var a=$(this).val();return"default"===a?$(g).jqFilter("addFilter",n):$(g).jqFilter("addFilter",f.tmplFilters[parseInt(a,10)]),!1}),f.multipleGroup===!0&&(f.multipleSearch=!0),o("onInitialize",$(g)),f.layer?jgrid.createModal.call(c,i,q,f,l,$(k)[0],"#"+jqID(f.layer),{position:"relative"}):jgrid.createModal.call(c,i,q,f,l,$(k)[0]),(f.searchOnEnter||f.closeOnEscape)&&$(j).keydown(function(a){var b=$(a.target);return!f.searchOnEnter||13!==a.which||b.hasClass("add-group")||b.hasClass("add-rule")||b.hasClass("delete-group")||b.hasClass("delete-rule")||b.hasClass("fm-button")&&b.is("[id$=_query]")?f.closeOnEscape&&27===a.which?($("#"+jqID(i.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($(g+"_search").click(),!1)}),t&&$(g+"_query").on("click",function(){return $(".queryresult",q).toggle(),!1}),void 0===f.stringResult&&(f.stringResult=f.multipleSearch),$(g+"_search").on("click",function(){var a,b={},h="",i=$(g),j=i.find(".input-elm");if(j.filter(":focus")&&(j=j.filter(":focus")),j.change(),a=i.jqFilter("filterData"),f.errorcheck&&(i[0].hideError(),f.showQuery||i.jqFilter("toSQLString"),i[0].p.error))return i[0].showError(),!1;if(f.stringResult||"local"===e.datatype){try{h=JSON.stringify(a)}catch(a){}"string"==typeof h&&(b[f.sFilter]=h,m([f.sField,f.sValue,f.sOper],function(){b[this]=""}))}else f.multipleSearch?(b[f.sFilter]=a,m([f.sField,f.sValue,f.sOper],function(){b[this]=""})):(b[f.sField]=a.rules[0].field,b[f.sValue]=a.rules[0].data,b[f.sOper]=a.rules[0].op,b[f.sFilter]="");return $.extend(e.postData,b),fullBoolFeedback.call(c,f.onSearch,"jqGridFilterSearch",e.filters)&&(e.search=!0,d.trigger("reloadGrid",[$.extend({page:1},f.reloadGridSearchOptions||{})])),f.closeAfterSearch&&p(),!1}),$(g+"_reset").on("click",function(){var a={},b=$(g);return e.search=!1,e.resetsearch=!0,f.multipleSearch===!1?a[f.sField]=a[f.sValue]=a[f.sOper]="":a[f.sFilter]="",b[0].resetFilter(),v&&$(".ui-template",q).val("default"),$.extend(e.postData,a),fullBoolFeedback.call(c,f.onReset,"jqGridFilterReset")&&d.trigger("reloadGrid",[$.extend({page:1},f.reloadGridResetOptions||{})]),f.closeAfterReset&&p(),!1}),b($(g));var B=getGuiStateStyles.call(c,"hover");$(".fm-button:not(."+getGuiStateStyles.call(c,"disabled").split(" ").join(".")+")",q).hover(function(){$(this).addClass(B)},function(){$(this).removeClass(B)})}}})},editGridRow:function(a,b){return this.each(function(){function c(){return $(z+" > tbody > tr > td .FormElement").each(function(){var a,b,c,d,e,f,g=$(".customelement",this),h=this.name;if(g.length){if(h=g.attr("name"),b=F[h],void 0!==b&&(a=E[b],c=a.editoptions||{},$.isFunction(c.custom_value))){try{if(p[h]=c.custom_value.call(m,$("#"+jqID(h),z),"get"),void 0===p[h])throw"e1"}catch(a){"e1"===a?jgrid.info_dialog.call(m,K,"function 'custom_value' "+v.msg.novalue,v.bClose):jgrid.info_dialog.call(m,K,a.message,v.bClose)}return!0}}else switch(f=$(this)[0].type){case"checkbox":p[h]=$(this).is(":checked")?$(this).val():$(this).data("offval");break;case"select-one":p[h]=$("option:selected",this).val();break;case"select-multiple":p[h]=$(this).val(),p[h]=p[h]?p[h].join(","):"";var i=[];$("option:selected",this).each(function(a,b){i[a]=$(b).text()});break;case"date":p[h]=$(this).val(),3===String(p[h]).split("-").length&&(b=F[h],void 0!==b&&(a=E[b],d=a.formatoptions||{},e=d.newformat||t.call(n,"formatter.date.newformat"),p[h]=jgrid.parseDate.call(n[0],"Y-m-d",p[h],e)));break;default:void 0!==f&&$.inArray(f,v.skipPostTypes)<0&&(p[h]=$(this).val())}}),!0}function d(a,b,c){var d,e=0,f=[],g=!1,h=$(b),i="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",j="";for(d=1;d<=c;d++)j+=i;if("_empty"!==a&&(g=base.getInd.call(n,a)),$(E).each(function(b){var d,i,k,l,n,p=this,q=p.name,r=p.editable,s=!1,t=!1,u="_empty"===a?"addForm":"editForm";switch($.isFunction(r)&&(r=r.call(m,{rowid:a,iCol:b,iRow:g,cmName:q,cm:p,mode:u})),i=(!p.editrules||p.editrules.edithidden!==!0)&&(p.hidden===!0||"hidden"===r),String(r).toLowerCase()){case"hidden":r=!0;break;case"disabled":r=!0,s=!0;break;case"readonly":r=!0,t=!0}if("cb"!==q&&"subgrid"!==q&&r===!0&&"rn"!==q){if(g===!1)l="";else{d=$(m.rows[g].cells[b]);try{l=$.unformat.call(m,d,{rowId:a,colModel:p},b)}catch(a){l=p.edittype&&"textarea"===p.edittype?d.text():d.html()}isEmptyString(l)&&(l="")}var x=$.extend({},p.editoptions||{},{id:q,name:q,rowId:a,mode:u,cm:p,iCol:b}),y=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},p.formoptions||{}),z=parseInt(y.rowpos,10)||e+1,A=parseInt(2*(parseInt(y.colpos,10)||1),10);if("_empty"===a&&x.defaultValue&&(l=$.isFunction(x.defaultValue)?x.defaultValue.call(m):x.defaultValue),p.edittype||(p.edittype="text"),o.autoEncodeOnEdit&&(l=jgrid.oldDecodePostedData(l)),n=jgrid.createEl.call(m,p.edittype,x,l,!1,$.extend({},jgrid.ajaxOptions,o.ajaxSelectOptions||{})),(v.checkOnSubmit||v.checkOnUpdate)&&(v._savedData[q]=l),$(n).addClass("FormElement"),$.inArray(p.edittype,["text","textarea","checkbox","password","select"])>-1&&$(n).addClass(getGuiStyles.call(m,"dialog.dataField")),k=h.find("tr[data-rowpos="+z+"]"),y.rowabove){var B=$("<tr><td class='contentinfo' colspan='"+2*c+"'>"+y.rowcontent+"</td></tr>");h.append(B),B[0].rp=z}0===k.length&&(k=$("<tr data-rowpos='"+z+"'></tr>").addClass("FormData").attr("id","tr_"+q),$(k).append(j),h.append(k),k[0].rp=z);var C=$("td:eq("+(A-2)+")",k[0]),D=$("td:eq("+(A-1)+")",k[0]);C.html(void 0===y.label?o.colNames[b]:y.label||"&#160;"),D[isEmptyString(D.html())?"html":"append"](y.elmprefix).append(n).append(y.elmsuffix),s?(C.addClass(N),D.addClass(N),$(n).prop("readonly",!0),$(n).prop("disabled",!0)):t&&$(n).prop("readonly",!0),"custom"===p.edittype&&$.isFunction(x.custom_value)&&x.custom_value.call(m,$("#"+jqID(q),w),"set",l),jgrid.bindEv.call(m,n,x),i&&C.add(D).css("visibility","hidden"),f[e]=b,e++}}),hideRowsWithoutVissibleCells(h),e>0){var k=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*c-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+s+"_id' value='"+a+"'/></td></tr>");k[0].rp=e+999,h.append(k),(v.checkOnSubmit||v.checkOnUpdate)&&(v._savedData[s+"_id"]=a)}return f}function e(a,b){var c,d,e,f,g,h=0;(v.checkOnSubmit||v.checkOnUpdate)&&(v._savedData={},v._savedData[s+"_id"]=a);var i=o.colModel;if("_empty"===a)return $(i).each(function(){c=this.name,e=$.extend({},this.editoptions||{}),d=$("#"+jqID(c),b),d&&d.length&&null!==d[0]&&(f="","custom"===this.edittype&&$.isFunction(e.custom_value)?e.custom_value.call(m,d,"set",f):e.defaultValue?(f=$.isFunction(e.defaultValue)?e.defaultValue.call(m):e.defaultValue,"checkbox"===d[0].type?(g=f.toLowerCase(),g.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==g?(d[0].checked=!0,d[0].defaultChecked=!0,d[0].value=f):(d[0].checked=!1,d[0].defaultChecked=!1)):d.val(f)):"checkbox"===d[0].type?(d[0].checked=!1,d[0].defaultChecked=!1,f=$(d).data("offval")):d[0].type&&"select"===d[0].type.substr(0,6)?d[0].selectedIndex=0:d.val(f),(v.checkOnSubmit===!0||v.checkOnUpdate)&&(v._savedData[c]=f))}),void $("#id_g",b).val(a);var j=base.getInd.call(n,a,!0);j&&($(j.cells).filter("td[role=gridcell]").each(function(d){var e;if(c=i[d].name,"cb"!==c&&"subgrid"!==c&&"rn"!==c&&i[d].editable===!0){try{e=$.unformat.call(m,$(this),{rowId:a,colModel:i[d]},d)}catch(a){e="textarea"===i[d].edittype?$(this).text():$(this).html()}switch(o.autoEncodeOnEdit&&(e=jgrid.oldDecodePostedData(e)),(v.checkOnSubmit===!0||v.checkOnUpdate)&&(v._savedData[c]=e),c="#"+jqID(c),i[d].edittype){case"password":case"text":case"button":case"image":case"textarea":isEmptyString(e)&&(e=""),$(c,b).val(e);break;case"select":var f=e.split(",");f=$.map(f,function(a){return $.trim(a)}),$(c+" option",b).each(function(){var a=this,b=$(a),c=$.trim(b.val()),g=$.trim(b.text());i[d].editoptions.multiple||$.trim(e)!==g&&f[0]!==g&&f[0]!==c?i[d].editoptions.multiple&&($.inArray(g,f)>-1||$.inArray(c,f)>-1)?a.selected=!0:a.selected=!1:a.selected=!0});break;case"checkbox":e=String(e),
i[d].editoptions&&i[d].editoptions.value?e=i[d].editoptions.value.split(":")[0]===e:(e=e.toLowerCase(),e=e.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==e),$(c,b).prop({checked:e,defaultChecked:e});break;case"custom":try{if(!i[d].editoptions||!$.isFunction(i[d].editoptions.custom_value))throw"e1";i[d].editoptions.custom_value.call(m,$(c,b),"set",e)}catch(a){"e1"===a?jgrid.info_dialog.call(m,K,"function 'custom_value' "+v.msg.nodefined,v.bClose):jgrid.info_dialog.call(m,K,a.message,v.bClose)}}h++}}),h>0&&$("#id_g",z).val(a))}function f(){var a=v.url||o.editurl;$.each(E,function(b,c){var d=c.name,e=p[d];"date"!==c.formatter||null!=c.formatoptions&&c.formatoptions.sendFormatted===!0||(p[d]=$.unformat.date.call(m,e,c)),"clientArray"!==a&&c.editoptions&&c.editoptions.NullIfEmpty===!0&&p.hasOwnProperty(d)&&""===e&&(p[d]="null")})}function g(){var b,c,d,g,h,i,j,k,l=[!0,"",""],q=l,t={},x=o.prmNames,y=base.getInd.call(n,a),B=y===!1?null:m.rows[y],C=n.triggerHandler("jqGridAddEditBeforeCheckValues",[p,$(w),r]);C&&"object"==typeof C&&(p=C),y=y===!1?-1:y,$.isFunction(v.beforeCheckValues)&&(C=v.beforeCheckValues.call(m,p,$(w),r),C&&"object"==typeof C&&(p=C));for(d in p)if(p.hasOwnProperty(d)&&(k=o.iColByName[d],q=jgrid.checkValues.call(m,p[d],d,void 0,void 0,{oldValue:"_empty"===a?null:base.getCell.call(n,a,k),newValue:p[d],cmName:d,rowid:a,cm:E[k],iCol:k,iRow:y,tr:B,td:null==B?null:B.cells[k],mode:"_empty"===a?"addForm":"editForm"}),null!=q&&q!==!0||(q=l),q[0]===!1))break;if(f(),q[0]&&(t=n.triggerHandler("jqGridAddEditClickSubmit",[v,p,r]),void 0===t&&$.isFunction(v.onclickSubmit)&&(t=v.onclickSubmit.call(m,v,p,r)||{}),q=n.triggerHandler("jqGridAddEditBeforeSubmit",[p,$(w),r]),null!=q&&q!==!0||(q=l),q[0]&&$.isFunction(v.beforeSubmit)&&(q=v.beforeSubmit.call(m,p,$(w),r),null!=q&&q!==!0||(q=l))),q[0]&&!v.processing){if(v.processing=!0,$("#sData",A).addClass(P),i=v.url||o.editurl,c=x.oper,b="clientArray"===i&&o.keyName!==!1?o.keyName:x.id,p[c]="_empty"===$.trim(p[s+"_id"])?x.addoper:x.editoper,p[c]!==x.addoper?p[b]=p[s+"_id"]:void 0===p[b]&&(p[b]=p[s+"_id"]),delete p[s+"_id"],p=$.extend(p,v.editData,t),o.treeGrid===!0){if(p[c]===x.addoper){g=o.selrow;var D="adjacency"===o.treeGridModel?o.treeReader.parent_id_field:"parent_id";p[D]=g}for(h in o.treeReader)if(o.treeReader.hasOwnProperty(h)&&(j=o.treeReader[h],p.hasOwnProperty(j))){if(p[c]===x.addoper&&"parent_id_field"===h)continue;delete p[j]}}p[b]=jgrid.stripPref(o.idPrefix,p[b]),o.autoEncodeOnEdit&&$.each(p,function(a,b){$.isFunction(b)||(p[a]=jgrid.oldEncodePostedData(b))});var F=$.extend({url:$.isFunction(i)?i.call(m,p[b],r,p,v):i,type:$.isFunction(v.mtype)?v.mtype.call(m,r,v,p[b],p):v.mtype,data:jgrid.serializeFeedback.call(m,$.isFunction(v.serializeEditData)?v.serializeEditData:o.serializeEditData,"jqGridAddEditSerializeEditData",p),complete:function(a,d){if(n.jqGrid("progressBar",{method:"hide",loadtype:v.saveui}),$("#sData",A).removeClass(P),p[b]=$("#id_g",z).val(),a.status>=300&&304!==a.status||0===a.status&&4===a.readyState?(q[0]=!1,q[1]=n.triggerHandler("jqGridAddEditErrorTextFormat",[a,r]),$.isFunction(v.errorTextFormat)?q[1]=v.errorTextFormat.call(m,a,r):q[1]=d+" Status: '"+a.statusText+"'. Error code: "+a.status):(q=n.triggerHandler("jqGridAddEditAfterSubmit",[a,p,r]),null!=q&&q!==!0||(q=l),q[0]&&$.isFunction(v.afterSubmit)&&(q=v.afterSubmit.call(m,a,p,r),null!=q&&q!==!0||(q=l))),q[0]===!1)$("#FormError>td",z).html(q[1]),$("#FormError",z).show();else{o.autoEncodeOnEdit&&$.each(p,function(a,b){p[a]=jgrid.oldDecodePostedData(b)});var f=[$.extend({},v.reloadGridOptions||{})];if(p[c]===x.addoper?(q[2]||(q[2]=jgrid.randId()),null==p[b]||"_empty"===p[b]||p[c]===x.addoper?p[b]=q[2]:q[2]=p[b],v.reloadAfterSubmit?n.trigger("reloadGrid",f):o.treeGrid===!0?base.addChildNode.call(n,q[2],g,p):base.addRowData.call(n,q[2],p,v.addedrow),v.closeAfterAdd?(o.treeGrid!==!0&&u.call(n,q[2]),J()):v.clearAfterAdd&&e("_empty",w)):(v.reloadAfterSubmit?(n.trigger("reloadGrid",f),v.closeAfterEdit||setTimeout(function(){u.call(n,p[b])},1e3)):o.treeGrid===!0?base.setTreeRow.call(n,p[b],p):base.setRowData.call(n,p[b],p),v.closeAfterEdit&&J()),$.isFunction(v.afterComplete)){var h=a;setTimeout(function(){n.triggerHandler("jqGridAddEditAfterComplete",[h,p,$(w),r]),v.afterComplete.call(m,h,p,$(w),r),h=null},50)}if((v.checkOnSubmit||v.checkOnUpdate)&&($(w).data("disabled",!1),"_empty"!==v._savedData[s+"_id"])){var i;for(i in v._savedData)v._savedData.hasOwnProperty(i)&&p[i]&&(v._savedData[i]=p[i])}}v.processing=!1;try{$(":input:visible",w).focus()}catch(a){}}},jgrid.ajaxOptions,v.ajaxEditOptions);if(F.url||v.useDataProxy||($.isFunction(o.dataProxy)?v.useDataProxy=!0:(q[0]=!1,q[1]+=" "+jgrid.errors.nourl)),q[0])if(n.jqGrid("progressBar",{method:"show",loadtype:v.saveui,htmlcontent:v.savetext}),v.useDataProxy){var G=o.dataProxy.call(m,F,"set_"+s);void 0===G&&(G=[!0,""]),G[0]===!1?(q[0]=!1,q[1]=G[1]||"Error deleting the selected row!"):(F.data.oper===x.addoper&&v.closeAfterAdd&&J(),F.data.oper===x.editoper&&v.closeAfterEdit&&J())}else"clientArray"===F.url?(v.reloadAfterSubmit=!1,p=F.data,F.complete({status:200,statusText:""},"")):$.ajax(F)}q[0]===!1&&($("#FormError>td",z).html(q[1]),$("#FormError",z).show())}function h(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)&&String(a[c])!==String(b[c])){d=!0;break}return d}function i(){var a=!0;return $("#FormError",z).hide(),v.checkOnUpdate&&(p={},c(),q=h(p,v._savedData),q&&($(w).data("disabled",!0),$(".confirm",C).show(),a=!1)),a}function j(){var b=jgrid.detectRowEditing.call(m,a);if(null!=b)if("inlineEditing"===b.mode)base.restoreRow.call(n,a);else{var c=b.savedRow,d=m.rows[c.id];base.restoreCell.call(n,c.id,c.ic),$(d.cells[c.ic]).removeClass("edit-cell "+O),$(d).addClass(O).attr({"aria-selected":"true",tabindex:"0"})}}function k(a,b){var c=b[1].length-1;0===a?$("#pData",A).addClass(N):void 0!==b[1][a-1]&&hasOneFromClasses($("#"+jqID(b[1][a-1])),N)?$("#pData",A).addClass(N):$("#pData",A).removeClass(N),a===c?$("#nData",A).addClass(N):void 0!==b[1][a+1]&&hasOneFromClasses($("#"+jqID(b[1][a+1])),N)?$("#nData",A).addClass(N):$("#nData",A).removeClass(N)}function l(){var a=base.getDataIDs.call(n),b=$("#id_g",z).val(),c=$.inArray(b,a);return[c,a]}var m=this,n=$(m),o=m.p;if(m.grid&&null!=o&&a){var p,q,r,s=o.id,t=base.getGridRes,u=base.setSelection,v=$.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:getGuiStyles.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:t.call(n,"defaults.savetext")||"Saving..."},t.call(n,"edit"),jgrid.edit,o.formEditing||{},b||{}),w="FrmGrid_"+s,x=w,y="TblGrid_"+s,z="#"+jqID(y),A=z+"_2",B={themodal:"editmod"+s,modalhead:"edithd"+s,modalcontent:"editcnt"+s,resizeAlso:w},C="#"+jqID(B.themodal),D=o.gBox,E=o.colModel,F=o.iColByName,G=1,H=0,I=v.commonIconClass,J=function(){jgrid.hideModal(C,{gb:D,jqm:v.jqModal,onClose:v.onClose,removemodal:v.removemodal})},K=t.call(n,"errors.errcap"),L=function(){var a=$.makeArray(arguments);return a.unshift(""),a.unshift("AddEdit"),a.unshift(v),jgridFeedback.apply(m,a)},M=getGuiStateStyles.call(m,"hover"),N=getGuiStateStyles.call(m,"disabled"),O=getGuiStateStyles.call(m,"select"),P=getGuiStateStyles.call(m,"active"),Q=getGuiStateStyles.call(m,"error");$(C).remove(),w="#"+jqID(w),"new"===a?(a="_empty",r="add",v.caption=v.addCaption):(v.caption=v.editCaption,r="edit");var R=!0;!v.checkOnUpdate||v.jqModal!==!0&&void 0!==v.jqModal||v.modal||(R=!1);var S=isNaN(v.dataheight)?v.dataheight:v.dataheight+"px",T=isNaN(v.datawidth)?v.datawidth:v.datawidth+"px",U=$("<form name='FormPost' id='"+x+"' class='FormGrid' onSubmit='return false;' style='width:"+T+";overflow:auto;position:relative;height:"+S+";'></form>").data("disabled",!1),V=$("<table id='"+y+"' class='EditTable'><tbody></tbody></table>");$(E).each(function(){var a=this.formoptions;G=Math.max(G,a?a.colpos||0:0),H=Math.max(H,a?a.rowpos||0:0)}),$(U).append(V);var W=$("<tr id='FormError' style='display:none'><td class='"+Q+"' colspan='"+2*G+"'>&#160;</td></tr>");if(W[0].rp=0,$(V).append(W),W=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*G+"'>"+(v.topinfo||"&#160;")+"</td></tr>"),W[0].rp=0,$(V).append(W),L("beforeInitData",U,r)){j();var X="rtl"===o.direction,Y=X?"nData":"pData",Z=X?"pData":"nData";d(a,V,G);var _=builderFmButon.call(m,Y,"",mergeCssClasses(I,v.prevIcon),"","left"),aa=builderFmButon.call(m,Z,"",mergeCssClasses(I,v.nextIcon),"","right"),ba=builderFmButon.call(m,"sData",v.bSubmit),ca=builderFmButon.call(m,"cData",v.bCancel),da="<div class='"+getGuiStyles.call(m,"dialog.footer")+"'><table class='EditTable' id='"+y+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(m,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+o.direction+"'>"+(X?aa+_:_+aa)+"</td><td class='EditButton EditButton-"+o.direction+"'>"+ba+"&#160;"+ca+"</td></tr>";if(da+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(v.bottominfo||"&#160;")+"</td></tr>",da+="</tbody></table></div>",H>0){var ea=[];$.each($(V)[0].rows,function(a,b){ea[a]=b}),ea.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(ea,function(a,b){$("tbody",V).append(b)})}v.gbox=D;var fa=!1;v.closeOnEscape===!0&&(v.closeOnEscape=!1,fa=!0);var ga=$("<div></div>").append($("<div class='"+getGuiStyles.call(m,"dialog.body")+"'></div>").append(U)).append(da);if(jgrid.createModal.call(m,B,ga,v,o.gView,$(D)[0]),v.topinfo&&$(".tinfo",z).show(),v.bottominfo&&$(".binfo",A).show(),ga=null,da=null,$(C).keydown(function(a){var b,c,d=(a.target.tagName||"").toUpperCase();if($(w).data("disabled")===!0)return!1;if(13===a.which&&"TEXTAREA"!==d){if(b=$(A).find(":focus"),c=b.attr("id"),b.length>0&&$.inArray(c,["pData","nData","cData"])>=0)return b.trigger("click"),!1;if(v.savekey[0]===!0&&13===v.savekey[1])return $("#sData",A).trigger("click"),!1}if(v.savekey[0]===!0&&a.which===v.savekey[1]&&"TEXTAREA"!==d)return $("#sData",A).trigger("click"),!1;if(27===a.which)return!!i()&&(fa&&J(),!1);if(v.navkeys[0]===!0){if("_empty"===$("#id_g",z).val())return!0;if(a.which===v.navkeys[1])return $("#pData",A).trigger("click"),!1;if(a.which===v.navkeys[2])return $("#nData",A).trigger("click"),!1}}),v.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span",C).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close",C).off("click").click(function(){return!!i()&&(J(),!1)})),addFormIcon($("#sData",A),v.saveicon,I),addFormIcon($("#cData",A),v.closeicon,I),v.checkOnSubmit||v.checkOnUpdate){ba=builderFmButon.call(m,"sNew",v.bYes),aa=builderFmButon.call(m,"nNew",v.bNo),ca=builderFmButon.call(m,"cNew",v.bExit);var ha=v.zIndex||999;ha++,$("<div class='"+v.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ha+";display:none;'>&#160;</div><div class='"+getGuiStyles.call(m,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(ha+1)+"'>"+v.saveData+"<br/><br/>"+ba+aa+ca+"</div>").insertAfter(w),$("#sNew",C).click(function(){return g(),$(w).data("disabled",!1),$(".confirm",C).hide(),!1}),$("#nNew",C).click(function(){return $(".confirm",C).hide(),$(w).data("disabled",!1),setTimeout(function(){$(":input:visible",w).focus()},0),!1}),$("#cNew",C).click(function(){return $(".confirm",C).hide(),$(w).data("disabled",!1),J(),!1})}L("onInitializeForm",$(w),r),"_empty"!==a&&v.viewPagerButtons?$("#pData,#nData",A).show():$("#pData,#nData",A).hide(),L("beforeShowForm",$(w),r),$(C).data("onClose",v.onClose),jgrid.viewModal.call(m,C,{gbox:D,jqm:v.jqModal,overlay:v.overlay,modal:v.modal,overlayClass:v.overlayClass,toTop:v.toTop,onHide:function(a){a.w.remove(),a.o&&a.o.remove()}}),R||$("."+jqID(v.overlayClass)).click(function(){return!!i()&&(J(),!1)}),$(".fm-button",C).hover(function(){$(this).addClass(M)},function(){$(this).removeClass(M)}),$("#sData",A).click(function(){return p={},$("#FormError",z).hide(),c(),"_empty"===p[s+"_id"]?g():v.checkOnSubmit===!0?(q=h(p,v._savedData),q?($(w).data("disabled",!0),$(".confirm",C).show()):g()):g(),!1}),$("#cData",A).click(function(){return!!i()&&(J(),!1)}),$("#nData",A).click(function(){if(!i())return!1;$("#FormError",z).hide();var a=l();if(a[0]=parseInt(a[0],10),a[0]!==-1&&a[1][a[0]+1]){if(!L("onclickPgButtons","next",$(w),a[1][a[0]]))return!1;e(a[1][a[0]+1],w),u.call(n,a[1][a[0]+1]),L("afterclickPgButtons","next",$(w),a[1][a[0]+1]),k(a[0]+1,a)}return!1}),$("#pData",A).click(function(){if(!i())return!1;$("#FormError",z).hide();var a=l();if(a[0]!==-1&&a[1][a[0]-1]){if(!L("onclickPgButtons","prev",$(w),a[1][a[0]]))return!1;if(hasOneFromClasses($("#"+jqID(a[1][a[0]-1])),N))return!1;e(a[1][a[0]-1],w),u.call(n,a[1][a[0]-1]),L("afterclickPgButtons","prev",$(w),a[1][a[0]-1]),k(a[0]-1,a)}return!1}),L("afterShowForm",$(w),r);var ia=l();k(ia[0],ia)}}})},viewGridRow:function(a,b){return this.each(function(){function c(){l.closeOnEscape!==!0&&l.navkeys[0]!==!0||setTimeout(function(){$("#cData").focus()},0)}function d(a,b,c){var d,e,f,g,k,m,n,o,p=0,q=[],r=base.getInd.call(i,a),s=getGuiStyles.call(h,"dialog.viewData"),t=$(b),u=getGuiStyles.call(h,"dialog.viewLabel"),w=String(l.labelswidth)+(!l.labelswidth||isNaN(l.labelswidth)?"":"px"),x="<td class='"+getGuiStyles.call(h,"dialog.viewCellLabel","CaptionTD form-view-label")+(w?"' style='width:"+w+";":"")+"'>&#160;</td><td class='"+getGuiStyles.call(h,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",y="",z=["integer","number","currency"],A=0,B=0;for(k=0;k<c;k++)y+=x;if($(v).each(function(){var a=this;e=(!a.editrules||a.editrules.edithidden!==!0)&&a.hidden===!0,e||"right"!==a.align||(a.formatter&&$.inArray(a.formatter,z)!==-1?A=Math.max(A,parseInt(a.width,10)):B=Math.max(B,parseInt(a.width,10)))}),m=0!==A?A:0!==B?B:0,$(v).each(function(a){var b=this;if(d=b.name,n=!1,e=(!b.editrules||b.editrules.edithidden!==!0)&&b.hidden===!0,o="boolean"!=typeof b.viewable||b.viewable,"cb"!==d&&"subgrid"!==d&&"rn"!==d&&o){g=r===!1?"":jgrid.getDataFieldOfCell.call(h,h.rows[r],a).html(),n="right"===b.align&&0!==m;var i=$.extend({},{rowabove:!1,rowcontent:""},b.formoptions||{}),k=parseInt(i.rowpos,10)||p+1,l=parseInt(2*(parseInt(i.colpos,10)||1),10);if(i.rowabove){var v=$("<tr><td class='contentinfo' colspan='"+2*c+"'>"+i.rowcontent+"</td></tr>");t.append(v),v[0].rp=k}f=t.find("tr[data-rowpos="+k+"]"),0===f.length&&(f=$("<tr data-rowpos='"+k+"'></tr>").addClass("FormData").attr("id","trv_"+d),f.append(y),t.append(f),f[0].rp=k);var w=void 0===i.label?j.colNames[a]:i.label,x=$("td:eq("+(l-1)+")",f[0]),z=$("td:eq("+(l-2)+")",f[0]);z.html("<label for='"+d+"'"+(u?" class='"+u+"'>":">")+(w||"&nbsp;")+"</label>"),x[isEmptyString(x.html())?"html":"append"]("<span id='"+d+"'"+(s?" class='"+s+"'>":">")+(g||"&nbsp;")+"</span>").attr("id","v_"+d),n&&$("td:eq("+(l-1)+") span",f[0]).css({"text-align":"right",width:m+"px"}),e&&z.add(x).css("visibility","hidden"),q[p]=a,p++}}),hideRowsWithoutVissibleCells(t),p>0){var C=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*c-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+a+"'/></td></tr>");C[0].rp=p+99,t.append(C)}return q}function e(a){var b,c,d=0,e=base.getInd.call(i,a,!0);e&&($("td",e).each(function(a){c=v[a],b=c.name,"cb"!==b&&"subgrid"!==b&&"rn"!==b&&(b=jqID("v_"+b),$("#"+b+" span",n).html(jgrid.getDataFieldOfCell.call(h,e,a).html()),d++)}),d>0&&$("#id_g",n).val(a))}function f(a,b){var c=b[1].length-1;0===a?$("#pData",o).addClass(B):void 0!==b[1][a-1]&&hasOneFromClasses($("#"+jqID(b[1][a-1])),B)?$("#pData",o).addClass(B):$("#pData",o).removeClass(B),a===c?$("#nData",o).addClass(B):void 0!==b[1][a+1]&&hasOneFromClasses($("#"+jqID(b[1][a+1])),B)?$("#nData",o).addClass(B):$("#nData",o).removeClass(B)}function g(){var a=base.getDataIDs.call(i),b=$("#id_g",n).val(),c=$.inArray(b,a);return[c,a]}var h=this,i=$(h),j=h.p;if(h.grid&&null!=j&&a){var k=j.id,l=$.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},base.getGridRes.call(i,"view"),jgrid.view||{},j.formViewing||{},b||{}),m="#ViewGrid_"+jqID(k),n="#ViewTbl_"+jqID(k),o=n+"_2",p="ViewGrid_"+k,q="ViewTbl_"+k,r=l.commonIconClass,s={themodal:"viewmod"+k,modalhead:"viewhd"+k,modalcontent:"viewcnt"+k,resizeAlso:p},t="#"+jqID(s.themodal),u=j.gBox,v=j.colModel,w=1,x=0,y=function(){var a=$.makeArray(arguments);return a.unshift(""),a.unshift("View"),a.unshift(l),jgridFeedback.apply(h,a)},z=function(){jgrid.hideModal(t,{gb:u,jqm:l.jqModal,onClose:l.onClose,removemodal:l.removemodal})},A=getGuiStateStyles.call(h,"hover"),B=getGuiStateStyles.call(h,"disabled"),C=isNaN(l.dataheight)?l.dataheight:l.dataheight+"px",D=isNaN(l.datawidth)?l.datawidth:l.datawidth+"px",E=$("<div class='"+getGuiStyles.call(h,"dialog.body")+"'><form name='FormPost' id='"+p+"' class='FormGrid' style='width:"+D+";overflow:auto;position:relative;height:"+C+";'></form></div>"),F=E.children("form.FormGrid"),G=$("<table id='"+q+"' class='EditTable'><tbody></tbody></table>");if($(t).remove(),$(v).each(function(){var a=this.formoptions;w=Math.max(w,a?a.colpos||0:0),x=Math.max(x,a?a.rowpos||0:0)}),F.append(G),y("beforeInitData",F)){d(a,G,w);var H="rtl"===j.direction,I=H?"nData":"pData",J=H?"pData":"nData",K=builderFmButon.call(h,I,"",mergeCssClasses(r,l.prevIcon),"","left"),L=builderFmButon.call(h,J,"",mergeCssClasses(r,l.nextIcon),"","right"),M=builderFmButon.call(h,"cData",l.bClose);if(x>0){var N=[];$.each($(G)[0].rows,function(a,b){N[a]=b}),N.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(N,function(a,b){$("tbody",G).append(b)})}l.gbox=u;var O=$("<div></div>").append(E).append("<div class='"+getGuiStyles.call(h,"dialog.footer")+"'><table border='0' class='EditTable' id='"+q+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+j.direction+"' width='"+(l.labelswidth||"auto")+"'>"+(H?L+K:K+L)+"</td><td class='EditButton EditButton-"+j.direction+"'>"+M+"</td></tr></tbody></table></div>");jgrid.createModal.call(h,s,O,l,j.gView,$(j.gView)[0]),l.viewPagerButtons||$("#pData, #nData",o).hide(),O=null,$(t).keydown(function(a){var b,c;if($(m).data("disabled")===!0)return!1;if(13===a.which&&(b=$(o).find(":focus"),c=b.attr("id"),b.length>0&&$.inArray(c,["pData","nData","cData"])>=0))return b.trigger("click"),!1;if(27===a.which)return l.closeOnEscape&&z(),!1;if(l.navkeys[0]===!0){if(a.which===l.navkeys[1])return $("#pData",o).trigger("click"),!1;if(a.which===l.navkeys[2])return $("#nData",o).trigger("click"),!1}}),addFormIcon($("#cData",o),l.closeicon,r),y("beforeShowForm",$(m)),jgrid.viewModal.call(h,t,{gbox:u,jqm:l.jqModal,overlay:l.overlay,toTop:l.toTop,modal:l.modal,onHide:function(a){a.w.remove(),a.o&&a.o.remove()}}),$(".fm-button:not(."+B.split(" ").join(".")+")",o).hover(function(){$(this).addClass(A)},function(){$(this).removeClass(A)}),c(),$("#cData",o).click(function(){return z(),!1}),$("#nData",o).click(function(){$("#FormError",n).hide();var a=g();if(a[0]=parseInt(a[0],10),a[0]!==-1&&a[1][a[0]+1]){if(!y("onclickPgButtons","next",$(m),a[1][a[0]]))return!1;e(a[1][a[0]+1]),base.setSelection.call(i,a[1][a[0]+1]),y("afterclickPgButtons","next",$(m),a[1][a[0]+1]),f(a[0]+1,a)}return c(),!1}),$("#pData",o).click(function(){$("#FormError",n).hide();var a=g();if(a[0]!==-1&&a[1][a[0]-1]){if(!y("onclickPgButtons","prev",$(m),a[1][a[0]]))return!1;e(a[1][a[0]-1]),base.setSelection.call(i,a[1][a[0]-1]),y("afterclickPgButtons","prev",$(m),a[1][a[0]-1]),f(a[0]-1,a)}return c(),!1});var P=g();f(P[0],P)}}})},delGridRow:function(a,b){return this.each(function(){var c=this,d=c.p,e=$(c);if(c.grid&&null!=d&&a){var f,g,h,i,j=d.id,k=$.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},base.getGridRes.call(e,"del"),jgrid.del||{},d.formDeleting||{},b||{}),l="DelTbl_"+j,m="#DelTbl_"+jqID(j),n={themodal:"delmod"+j,modalhead:"delhd"+j,modalcontent:"delcnt"+j,resizeAlso:l},o="#"+jqID(n.themodal),p=d.gBox,q=k.commonIconClass,r=function(){var a=$.makeArray(arguments);return a.unshift(""),a.unshift("Delete"),a.unshift(k),jgridFeedback.apply(c,a)},s=getGuiStateStyles.call(c,"hover"),t=getGuiStateStyles.call(c,"active"),u=getGuiStateStyles.call(c,"error");if($.isArray(a)||(a=[String(a)]),void 0!==$(o)[0]){if(!r("beforeInitData",$(m)))return;$("#DelData>td",m).text(a.join()).data("rowids",a),$("#DelError",m).hide(),k.processing===!0&&(k.processing=!1,$("#dData",m).removeClass(t)),r("beforeShowForm",$(m)),jgrid.viewModal.call(c,o,{gbox:p,jqm:k.jqModal,jqM:!1,overlay:k.overlay,toTop:k.toTop,modal:k.modal}),r("afterShowForm",$(m))}else{var v=isNaN(k.dataheight)?k.dataheight:k.dataheight+"px",w=isNaN(k.datawidth)?k.datawidth:k.datawidth+"px",x="<div class='"+getGuiStyles.call(c,"dialog.body")+"'><div id='"+l+"' class='formdata' style='width:"+w+";overflow:auto;position:relative;height:"+v+";'>";x+="<table class='DelTable'><tbody>",x+="<tr id='DelError' style='display:none'><td class='"+u+"'></td></tr>",x+="<tr id='DelData' style='display:none'><td >"+a.join()+"</td></tr>",x+="<tr><td class='delmsg'>"+k.msg+"</td></tr>",x+="</tbody></table></div></div>";var y=builderFmButon.call(c,"dData",k.bSubmit),z=builderFmButon.call(c,"eData",k.bCancel);if(x+="<div class='"+getGuiStyles.call(c,"dialog.footer")+"'><table class='EditTable' id='"+l+"_2'><tbody><tr><td><hr class='"+getGuiStyles.call(c,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+d.direction+"'>"+y+"&#160;"+z+"</td></tr></tbody></table></div>",k.gbox=p,jgrid.createModal.call(c,n,x,k,d.gView,$(d.gView)[0]),$("#DelData>td",m).data("rowids",a),!r("beforeInitData",$(x)))return;$(".fm-button",m+"_2").hover(function(){$(this).addClass(s)},function(){$(this).removeClass(s)}),addFormIcon($("#dData",m+"_2"),k.delicon,q),addFormIcon($("#eData",m+"_2"),k.cancelicon,q),$("#dData",m+"_2").click(function(){var a,b=[!0,""],l=$("#DelData>td",m),n=l.text(),q=l.data("rowids"),s={};if($.isFunction(k.onclickSubmit)&&(s=k.onclickSubmit.call(c,k,n)||{}),$.isFunction(k.beforeSubmit)&&(b=k.beforeSubmit.call(c,n)||b),b[0]&&!k.processing){if(k.processing=!0,h=d.prmNames,f=$.extend({},k.delData,s),i=h.oper,f[i]=h.deloper,g=h.id,n=q.slice(),!n.length)return!1;for(a in n)n.hasOwnProperty(a)&&(n[a]=jgrid.stripPref(d.idPrefix,n[a]));f[g]=n.join(),$(this).addClass(t);var u=k.url||d.editurl,v=$.extend({url:$.isFunction(u)?u.call(c,f[g],f,k):u,type:k.mtype,data:$.isFunction(k.serializeDelData)?k.serializeDelData.call(c,f):f,complete:function(a,g){var h;if($("#dData",m+"_2").removeClass(t),a.status>=300&&304!==a.status||0===a.status&&4===a.readyState?(b[0]=!1,$.isFunction(k.errorTextFormat)?b[1]=k.errorTextFormat.call(c,a):b[1]=g+" Status: '"+a.statusText+"'. Error code: "+a.status):$.isFunction(k.afterSubmit)&&(b=k.afterSubmit.call(c,a,f)||[!0]),b[0]===!1)$("#DelError>td",m).html(b[1]),$("#DelError",m).show();else{if("local"===d.datatype||d.treeGrid===!0||!k.reloadAfterSubmit)if(d.treeGrid===!0)try{base.delTreeNode.call(e,q[0])}catch(a){}else for(q=q.slice(),h=0;h<q.length;h++)base.delRowData.call(e,q[h]);k.reloadAfterSubmit&&e.trigger("reloadGrid",[$.extend({},k.reloadGridOptions||{})]),setTimeout(function(){r("afterComplete",a,n,$(m))},50)}k.processing=!1,b[0]&&jgrid.hideModal(o,{gb:p,jqm:k.jqModal,onClose:k.onClose,removemodal:k.removemodal})}},jgrid.ajaxOptions,k.ajaxDelOptions);if(v.url||k.useDataProxy||($.isFunction(d.dataProxy)?k.useDataProxy=!0:(b[0]=!1,b[1]+=" "+jgrid.errors.nourl)),b[0])if(k.useDataProxy){var w=d.dataProxy.call(c,v,"del_"+j);void 0===w&&(w=[!0,""]),w[0]===!1?(b[0]=!1,b[1]=w[1]||"Error deleting the selected row!"):jgrid.hideModal(o,{gb:p,jqm:k.jqModal,onClose:k.onClose,removemodal:k.removemodal})}else"clientArray"===v.url?(f=v.data,v.complete({status:200,statusText:""},"")):$.ajax(v)}return b[0]===!1&&($("#DelError>td",m).html(b[1]),$("#DelError",m).show()),!1}),$("#eData",m+"_2").click(function(){return jgrid.hideModal(o,{gb:p,jqm:k.jqModal,onClose:k.onClose,removemodal:k.removemodal}),!1}),r("beforeShowForm",$(m)),jgrid.viewModal.call(c,o,{gbox:p,jqm:k.jqModal,overlay:k.overlay,toTop:k.toTop,modal:k.modal}),r("afterShowForm",$(m))}k.closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+jqID(n.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(a,b,c,d,e,f,g){return"object"==typeof a&&(g=f,f=e,e=d,d=c,c=b,b=a,a=void 0),d=d||{},c=c||{},g=g||{},e=e||{},f=f||{},this.each(function(){var h=this,i=h.p,j=$(h);if(h.grid&&null!=i&&!(h.nav&&$(a).find(".navtable").length>0)){var k=i.id,l=$.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},base.getGridRes.call(j,"nav"),jgrid.nav||{},i.navOptions||{},b||{});l.position=l.position||("rtl"===i.direction?"right":"left");var m,n,o,p=i.idSel,q=i.gBox,r=l.commonIconClass,s={themodal:"alertmod_"+k,modalhead:"alerthd_"+k,modalcontent:"alertcnt_"+k},t=function(){return function(){var a=document.documentElement,b=window,c=1024,d=768,e=j.closest(".ui-jqgrid").offset();void 0===$("#"+jqID(s.themodal))[0]&&(l.alerttop||l.alertleft||(void 0!==b.innerWidth?(c=b.innerWidth,d=b.innerHeight):null!=a&&void 0!==a.clientWidth&&0!==a.clientWidth&&(c=a.clientWidth,d=a.clientHeight),c=c/2-parseInt(l.alertwidth,10)/2-e.left,d=d/2-25-e.top),jgrid.createModal.call(h,s,"<div class='"+getGuiStyles.call(h,"dialog.body")+"'><div>"+l.alerttext+"</div></div>",{gbox:q,jqModal:l.jqModal,drag:!0,resize:!0,caption:l.alertcap,top:null!=l.alerttop?l.alerttop:d,left:null!=l.alertleft?l.alertleft:c,width:l.alertwidth,height:l.alertheight,closeOnEscape:l.closeOnEscape,zIndex:l.alertzIndex,removemodal:l.removemodal},i.gView,$(q)[0],!1)),jgrid.viewModal.call(h,"#"+jqID(s.themodal),{gbox:q,toTop:l.alertToTop,jqm:l.jqModal});var f=$("#"+jqID(s.modalhead)).find(".ui-jqdialog-titlebar-close");f.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){f.focus()},50)}},u=t(),v=function(a){var b;if(13===a.which&&(b=$(this).find(".ui-pg-button").filter(":focus"),b.length>0)){var c=b[0].id,d=c.substr(0,$(this).closest(".ui-jqgrid-toppager").length>0?c.length-k.length-5:c.length-k.length-1),e=d+"mod"+i.id,f=$(".ui-jqdialog").filter(":visible").map(function(){return this.id});if($.inArray(e,f)<0)return b.trigger("click"),!1}},w=getGuiStateStyles.call(h,"hover"),x=getGuiStateStyles.call(h,"disabled"),y=getGuiStyles.call(h,"navButton","ui-pg-button");if(h.grid){h.modalAlert=u,void 0===a&&(i.pager?(a=i.pager,i.toppager&&(l.cloneToTop=!0)):i.toppager&&(a=i.toppager));var z,A,B,C,D,E,F,G=1,H=["left","center","right"],I=getGuiStyles.call(h,"navButton","ui-pg-button "+getGuiStateStyles.call(h,"disabled")),J="<div class='"+I+"'><span class='ui-separator'></span></div>",K=function(){hasOneFromClasses(this,x)||$(this).addClass(w)},L=function(){$(this).removeClass(w)},M=function(){return hasOneFromClasses(this,x)||($.isFunction(l.addfunc)?l.addfunc.call(h,d):base.editGridRow.call(j,"new",d)),!1},N=function(a,b,c){if(!hasOneFromClasses(this,x)){var d=i.selrow;d?$.isFunction(a)?a.call(h,d,c):base[b].call(j,d,c):u()}return!1},O=function(){return N.call(this,l.editfunc,"editGridRow",c)},P=function(){return N.call(this,l.viewfunc,"viewGridRow",g)},Q=function(){var a;return hasOneFromClasses(this,x)||(i.multiselect?(a=i.selarrrow,0===a.length&&(a=null)):a=i.selrow,a?$.isFunction(l.delfunc)?l.delfunc.call(h,a,e):base.delGridRow.call(j,a,e):u()),!1},R=function(){return hasOneFromClasses(this,x)||($.isFunction(l.searchfunc)?l.searchfunc.call(h,f):base.searchGrid.call(j,f)),!1},S=function(){if(!hasOneFromClasses(this,x)){$.isFunction(l.beforeRefresh)&&l.beforeRefresh.call(h),i.search=!1,i.resetsearch=!0;try{if("currentfilter"!==l.refreshstate){i.postData.filters="";try{$("#fbox_"+p).jqFilter("resetFilter")}catch(a){}$.isFunction(h.clearToolbar)&&h.clearToolbar(!1)}}catch(a){}switch(l.refreshstate){case"firstpage":j.trigger("reloadGrid",[$.extend({},l.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":j.trigger("reloadGrid",[$.extend({},l.reloadGridOptions||{},{current:!0})])}$.isFunction(l.afterRefresh)&&l.afterRefresh.call(h)}return!1},T=function(a,b,c){var d=$("<div class='"+y+"' tabindex='0' role='button'></div>"),e=l[a+"icon"],f=$.trim(l[a+"text"]);return d.append("<div class='ui-pg-div'><span class='"+(l.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",r,e):mergeCssClasses(r,e))+"'></span>"+(f?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+f+"</span>":"")+"</div>"),$(o).append(d),d.attr({title:l[a+"title"]||"",id:b||a+"_"+C}).click(c).hover(K,L),d};for(l.cloneToTop&&i.toppager&&(G=2),z=0;z<G;z++){if(o=$("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===i.direction?"right":"left")+";table-layout:auto;'></div>"),0===z?(B=a,C=k,B===i.toppager&&(C+="_top",G=1)):(B=i.toppager,C=k+"_top"),l.add&&T("add",d.id,M),l.edit&&T("edit",c.id,O),l.view&&T("view",g.id,P),l.del&&T("del",e.id,Q),(l.add||l.edit||l.del||l.view)&&$(o).append(J),l.search&&(A=T("search",f.id,R),f.showOnLoad&&f.showOnLoad===!0&&$(A,o).click()),l.refresh&&T("refresh","",S),n=$(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$("body").append("<div id='testpg2' class='"+getGuiStyles.call(h,"gBox","ui-jqgrid")+"' style='font-size:"+n+";visibility:hidden;' ></div>"),m=$(o).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(B+"_"+l.position,B).append(o),l.hideEmptyPagerParts)for(D=0;D<H.length;D++)H[D]!==l.position&&(F=$(B+"_"+H[D],B),0===F.length||0===F[0].childNodes.length?F.hide():1===F[0].childNodes.length&&(E=F[0].firstChild,!$(E).is("table.ui-pg-table")||0!==E.rows&&0!==E.rows[0].cells.length||F.hide()));i._nvtd&&(m>i._nvtd[0]&&($(B+"_"+l.position,B).width(m),i._nvtd[0]=m),i._nvtd[1]=m),h.nav=!0,o.on("keydown.jqGrid",v)}j.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(a,b){return"object"==typeof a&&(b=a,a=void 0),this.each(function(){var c=this,d=c.p;if(c.grid){var e=$.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},base.getGridRes.call($(c),"nav"),jgrid.nav||{},d.navOptions||{},b||{}),f=e.id,g=getGuiStateStyles.call(c,"hover"),h=getGuiStateStyles.call(c,"disabled"),i=getGuiStyles.call(c,"navButton","ui-pg-button");if(void 0===a)if(d.pager){if(base.navButtonAdd.call($(c),d.pager,e),!d.toppager)return;a=d.toppager,f&&(f+="_top")}else d.toppager&&(a=d.toppager);"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+jqID(a));var j=$(".navtable",a),k=e.commonIconClass;if(j.length>0){if(f&&j.find("#"+jqID(f)).length>0)return;var l=$("<div tabindex='0' role='button'></div>");"NONE"===e.buttonicon.toString().toUpperCase()?$(l).addClass(i).append("<div class='ui-pg-div'>"+(e.caption?"<span class='ui-pg-button-text"+(e.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+e.caption+"</span>":"")+"</div>"):$(l).addClass(i).append("<div class='ui-pg-div'><span class='"+(e.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",k,e.buttonicon):mergeCssClasses(k,e.buttonicon))+"'></span>"+(e.caption?"<span class='ui-pg-button-text"+(e.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+e.caption+"</span>":"")+"</div>"),
f&&$(l).attr("id",f),"first"===e.position&&j.children("div.ui-pg-button").length>0?j.children("div.ui-pg-button").first().before(l):j.append(l),$(l,j).attr("title",e.title||"").click(function(a){return hasOneFromClasses(this,h)||$.isFunction(e.onClickButton)&&e.onClickButton.call(c,e,a),!1}).hover(function(){hasOneFromClasses(this,h)||$(this).addClass(g)},function(){$(this).removeClass(g)}),$(c).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(a,b){return b=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},b||{}),this.each(function(){if(this.grid){var c=this,d=c.p,e=getGuiStyles.call(c,"navButton","ui-pg-button "+getGuiStateStyles.call(c,"disabled"));if(void 0===a)if(d.pager){if(base.navSeparatorAdd.call($(c),d.pager,b),!d.toppager)return;a=d.toppager}else d.toppager&&(a=d.toppager);"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+jqID(a));var f=$(".navtable",a);if(f.length>0){var g="<div class='"+e+"'><span class='"+b.sepclass+"'></span>"+b.sepcontent+"</div>";"first"===b.position?0===f.children("div.ui-pg-button").length?f.append(g):f.children("div.ui-pg-button").first().before(g):f.append(g)}}})},GridToForm:function(a,b){return this.each(function(){var c,d,e,f,g=this;if(g.grid){var h=base.getRowData.call($(g),a);if(h)for(c in h)if(h.hasOwnProperty(c))if(d=$("[name="+jqID(c)+"]",b),d.is("input:radio")||d.is("input:checkbox"))for(e=0;e<d.length;e++)f=$(d[e]),f.prop("checked",f.val()===String(h[c]));else d.val(isEmptyString(h[c])?"":h[c])}})},FormToGrid:function(a,b,c,d){return this.each(function(){var e=this;if(e.grid){c||(c="set"),d||(d="first");var f=$(b).serializeArray(),g={};$.each(f,function(a,b){g[b.name]=b.value}),"add"===c?base.addRowData.call($(e),a,g,d):"set"===c&&base.setRowData.call($(e),a,g)}})}}),jgrid.extend({groupingSetup:function(){return this.each(function(){var a,b,c,d,e,f=this,g=f.p,h=g.colModel,i=g.groupingView,j=function(){return""};if(null===i||"object"!=typeof i&&!$.isFunction(i))g.grouping=!1;else if(i.groupField.length){for(void 0===i.visibiltyOnNextGrouping&&(i.visibiltyOnNextGrouping=[]),i.lastvalues=[],i._locgr||(i.groups=[]),i.counters=[],a=0;a<i.groupField.length;a++)i.groupOrder[a]||(i.groupOrder[a]="asc"),i.groupText[a]||(i.groupText[a]="{0}"),"boolean"!=typeof i.groupColumnShow[a]&&(i.groupColumnShow[a]=!0),"boolean"!=typeof i.groupSummary[a]&&(i.groupSummary[a]=!1),i.groupSummaryPos[a]||(i.groupSummaryPos[a]="footer"),d=h[g.iColByName[i.groupField[a]]],i.groupColumnShow[a]===!0?(i.visibiltyOnNextGrouping[a]=!0,null!=d&&d.hidden===!0&&base.showCol.call($(f),i.groupField[a])):(i.visibiltyOnNextGrouping[a]=$("#"+jgrid.jqID(g.id+"_"+i.groupField[a])).is(":visible"),null!=d&&d.hidden!==!0&&base.hideCol.call($(f),i.groupField[a]));for(i.summary=[],i.hideFirstGroupCol&&(i.formatDisplayField[0]=function(a){return a}),b=0,c=h.length;b<c;b++)d=h[b],i.hideFirstGroupCol&&(d.hidden||i.groupField[0]!==d.name||(d.formatter=j)),d.summaryType&&(e={nm:d.name,st:d.summaryType,v:"",sr:d.summaryRound,srt:d.summaryRoundType||"round"},d.summaryDivider&&(e.sd=d.summaryDivider,e.vd=""),i.summary.push(e))}else g.grouping=!1})},groupingPrepare:function(a,b){return this.each(function(){var c,d,e,f,g,h,i,j,k,l,m=this,n=m.p,o=n.groupingView,p=o.groups,q=o.counters,r=o.lastvalues,s=o.isInTheSameGroup,t=o.groupField.length,u=!1,v=base.groupingCalculations.handler,w=function(){var b,c,d;for(b=0;b<g.summary.length;b++)c=g.summary[b],d=$.isArray(c.st)?c.st[f.idx]:c.st,$.isFunction(d)?c.v=d.call(m,c.v,c.nm,a,f):(c.v=v.call($(m),d,c.v,c.nm,c.sr,c.srt,a),"avg"===d.toLowerCase()&&c.sd&&(c.vd=v.call($(m),d,c.vd,c.sd,c.sr,c.srt,a)));return g.summary},x=function(a,b){if(null==a&&o.useDefaultValuesOnGrouping){var c,d=void 0!==n.iColByName[b]?n.colModel[n.iColByName[b]]:n.additionalProperties[n.iPropByName[b]];null!=d&&null!=d.formatter&&(null!=d.formatoptions&&void 0!==d.formatoptions.defaultValue?a=d.formatoptions.defaultValue:"string"==typeof d.formatter&&(c=$(m).jqGrid("getGridRes","formatter."+d.formatter+".defaultValue"),void 0!==c&&(a=c)))}return a};for(c=0;c<t;c++)if(h=o.groupField[c],i=x(a[h],h),l=i,j=o.displayField[c],k=null==j?null:x(a[j],j),null==k&&(k=i),void 0!==i){for(e=[],d=0;d<=c;d++)e.push(a[o.groupField[d]]);for(f={idx:c,dataIndex:h,value:i,displayValue:k,startRow:b,cnt:1,keys:e,summary:[]},g={cnt:1,pos:p.length,summary:$.extend(!0,[],o.summary)},0===b?(p.push(f),r[c]=i,q[c]=g):"object"==typeof i||($.isArray(s)&&$.isFunction(s[c])?s[c].call(m,r[c],i,c,o):r[c]===i)?u?(p.push(f),r[c]=i,q[c]=g):(g=q[c],g.cnt+=1,p[g.pos].cnt=g.cnt):(p.push(f),r[c]=i,u=!0,q[c]=g),p[g.pos].summary=w(),d=g.pos-1;d>=0;d--)if(p[d].idx<p[g.pos].idx){p[g.pos].parentGroupIndex=d,p[g.pos].parentGroup=p[d];break}}}),this},getGroupHeaderIndex:function(a,b){var c=this,d=c[0],e=d.p,f=b?$(b).closest("tr.jqgroup"):$("#"+jgrid.jqID(a)),g=parseInt(f.data("jqgrouplevel"),10),h=e.id+"ghead_"+g+"_";return isNaN(g)||!f.hasClass("jqgroup")||a.length<=h.length?-1:parseInt(a.substring(h.length),10)},groupingToggle:function(a,b){return this.each(function(){var c,d,e,f=this,g=f.p,h=g.groupingView,i=h.minusicon,j=h.plusicon,k=b?$(b).closest("tr.jqgroup"):$("#"+jgrid.jqID(a)),l=function(a){return a.find(">td>span.tree-wrap")},m=!0,n=!1,o=[],p=function(a){var b,c=a.length;for(b=0;b<c;b++)o.push(a[b])},q=parseInt(k.data("jqgrouplevel"),10);for(g.frozenColumns&&k.length>0&&(d=k[0].rowIndex,k=$(f.rows[d]),k=k.add(f.grid.fbRows[d])),e=l(k),jgrid.hasAllClasses(e,i)?(e.removeClass(i).addClass(j),n=!0):e.removeClass(j).addClass(i),k=k.next();k.length;k=k.next())if(k.hasClass("jqfoot")){if(c=parseInt(k.data("jqfootlevel"),10),n){if(c=parseInt(k.data("jqfootlevel"),10),(!h.showSummaryOnHide&&c===q||c>q)&&p(k),c<q)break}else if((c===q||h.showSummaryOnHide&&c===q+1)&&p(k),c<=q)break}else if(k.hasClass("jqgroup"))if(c=parseInt(k.data("jqgrouplevel"),10),n){if(c<=q)break;p(k)}else{if(c<=q)break;c===q+1&&(l(k).removeClass(i).addClass(j),p(k)),m=!1}else(n||m)&&p(k);$(o).css("display",n?"none":""),g.frozenColumns&&$(f).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:d,iRowEnd:k.length?k[0].rowIndex-1:-1}}}]),f.fixScrollOffsetAndhBoxPadding(),$(f).triggerHandler("jqGridGroupingClickGroup",[a,n]),$.isFunction(g.onClickGroup)&&g.onClickGroup.call(f,a,n)}),!1},groupingRender:function(a,b){function c(a,b,c,d,g){var h,j,k,o,p,q,r,s,t,u,v,w,x,y=l[a],z="",A=0,B=!0;if(0!==b&&0!==l[a].idx)for(h=a;h>=0;h--)if(l[h].idx===l[a].idx-b){y=l[h];break}for(j=y.cnt,v=void 0===g?d:0;v<n;v++){for(k="&#160;",u=m[v],s=0;s<y.summary.length;s++)if(t=y.summary[s],w=$.isArray(t.st)?t.st[c.idx]:t.st,x=$.isArray(u.summaryTpl)?u.summaryTpl[c.idx]:u.summaryTpl||"{0}",t.nm===u.name){"string"==typeof w&&"avg"===w.toLowerCase()&&(t.sd&&t.vd?t.v=t.v/t.vd:t.v&&j>0&&(t.v=t.v/j));try{t.groupCount=y.cnt,t.groupIndex=y.dataIndex,t.groupValue=y.value,q=e.formatter("",t.v,v,t)}catch(a){q=t.v}k=jgrid.format(x,q),u.summaryFormat&&(k=u.summaryFormat.call(e,c,k,q,u,t));break}o=!1,p=!1,void 0!==g&&B&&(u.hidden||(k=g,B=!1,d>1&&(o=!0,A=d-1),p=u.align,u.align="rtl"===f.direction?"right":"left",i.iconColumnName=u.name)),r=!1,A>0&&!u.hidden&&"&#160;"===k?(r=!0,p&&(u.align=p),A--):(z+="<td role='gridcell' "+e.formatCol(v,1,"")+(o?"colspan='"+d+"'":"")+">"+k+"</td>",o=!1,p&&(u.align=p),r&&(u.hidden=!1,A--))}return z}var d="",e=this[0],f=e.p,g=0,h=[],i=f.groupingView,j=$.makeArray(i.groupSummary),k=i.groupField.length,l=i.groups,m=f.colModel,n=m.length,o=f.page,p="jqGridShowHideCol.groupingRender",q=function(a){return base.getGuiStyles.call(e,"gridRow",a)},r=q("jqgroup ui-row-"+f.direction),s=q("jqfoot ui-row-"+f.direction);return $.each(m,function(a,b){var c;for(c=0;c<k;c++)if(i.groupField[c]===b.name){h[c]=a;break}}),j.reverse(),$.each(l,function(p,q){var t,u,v,w,x,y,z,A,B=f.id+"ghead_"+q.idx,C=B+"_"+p,D=$.isFunction(i.groupCollapse)?i.groupCollapse.call(e,{group:q,rowid:C}):i.groupCollapse,E=1,F=0,G=k-1===q.idx,H=null!=q.parentGroup&&q.parentGroup.collapsed,I="<span style='cursor:pointer;margin-"+("rtl"===f.direction?"right:":"left:")+12*q.idx+"px;' class='"+i.commonIconClass+" "+(D?i.plusicon:i.minusicon)+" tree-wrap' onclick=\"jQuery('#"+jgrid.jqID(f.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+C+"', this);return false;\"></span>";if(i._locgr&&!(q.startRow+q.cnt>(o-1)*b&&q.startRow<o*b))return!0;H&&(D=!0),void 0!==D&&(q.collapsed=D),g++;try{$.isArray(i.formatDisplayField)&&$.isFunction(i.formatDisplayField[q.idx])?(q.displayValue=i.formatDisplayField[q.idx].call(e,q.displayValue,q.value,m[h[q.idx]],q.idx,i),t=q.displayValue):t=e.formatter(C,q.displayValue,h[q.idx],q.value)}catch(a){t=q.displayValue}if(d+="<tr id='"+C+"' data-jqgrouplevel='"+q.idx+"' "+(D&&H?"style='display:none;' ":"")+"role='row' class='"+r+" "+B+"'>",A=$.isFunction(i.groupText[q.idx])?i.groupText[q.idx].call(e,t,q.cnt,q.summary):jgrid.template(i.groupText[q.idx],t,q.cnt,q.summary),"string"!=typeof A&&"number"!=typeof A&&(A=t),"header"===i.groupSummaryPos[q.idx]?(E=1,"cb"!==m[0].name&&"cb"!==m[1].name||E++,"subgrid"!==m[0].name&&"subgrid"!==m[1].name||E++,d+=c(p,0,q,E,I+"<span class='cell-wrapper'>"+A+"</span>")):d+="<td role='gridcell' style='padding-left:"+12*q.idx+"px;' colspan='"+n+"'>"+I+A+"</td>",d+="</tr>",G){for(y=l[p+1],x=q.startRow,z=void 0!==y?y.startRow:l[p].startRow+l[p].cnt,i._locgr&&(F=(o-1)*b,F>q.startRow&&(x=F)),v=x;v<z&&a[v-F];v++)d+=a[v-F].join("");if("header"!==i.groupSummaryPos[q.idx]){if(void 0!==y){for(u=0;u<i.groupField.length&&y.dataIndex!==i.groupField[u];u++);g=i.groupField.length-u}for(w=0;w<g;w++)j[w]&&(d+="<tr data-jqfootlevel='"+(q.idx-w)+(D&&(q.idx-w>0||!i.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+s+"'>",d+=c(p,w,l[q.idx-w],0),d+="</tr>");g=u}}}),this.off(p).on(p,function(){var a,b,c,d,g=f.iColByName[i.iconColumnName];if($.inArray("header",i.groupSummaryPos)>=0){for(d=0;d<m.length;d++)if(!m[d].hidden){c=d;break}if(void 0===c||g===c)return;for(a=0;a<e.rows.length;a++)b=e.rows[a],$(b).hasClass("jqgroup")&&($(b.cells[c]).html(b.cells[g].innerHTML),$(b.cells[g]).html("&nbsp;"));i.iconColumnName=m[c].name}}),d},groupingGroupBy:function(a,b){return this.each(function(){var c,d,e=this,f=e.p,g=f.groupingView;for("string"==typeof a&&(a=[a]),f.grouping=!0,g._locgr=!1,void 0===g.visibiltyOnNextGrouping&&(g.visibiltyOnNextGrouping=[]),c=0;c<g.groupField.length;c++)d=f.colModel[f.iColByName[g.groupField[c]]],!g.groupColumnShow[c]&&g.visibiltyOnNextGrouping[c]&&null!=d&&d.hidden===!0&&base.showCol.call($(e),g.groupField[c]);for(c=0;c<a.length;c++)g.visibiltyOnNextGrouping[c]=$(f.idSel+"_"+jgrid.jqID(a[c])).is(":visible");f.groupingView=$.extend(f.groupingView,b||{}),g.groupField=a,$(e).trigger("reloadGrid")})},groupingRemove:function(a){return this.each(function(){var b,c=this,d=c.p,e=c.tBodies[0],f=d.groupingView;if(void 0===a&&(a=!0),d.grouping=!1,a===!0){for(b=0;b<f.groupField.length;b++)!f.groupColumnShow[b]&&f.visibiltyOnNextGrouping[b]&&base.showCol.call($(c),f.groupField);$("tr.jqgroup, tr.jqfoot",e).remove(),$("tr.jqgrow",e).filter(":hidden").show()}else $(c).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,b,c,d,e,f){var g,h,i={sum:function(){return parseFloat(b||0)+parseFloat(f[c]||0)},min:function(){return""===b?parseFloat(f[c]||0):Math.min(parseFloat(b),parseFloat(f[c]||0))},max:function(){return""===b?parseFloat(f[c]||0):Math.max(parseFloat(b),parseFloat(f[c]||0))},count:function(){return""===b&&(b=0),f.hasOwnProperty(c)?b+1:0},avg:function(){return i.sum()}};if(!i[a])throw"jqGrid Grouping No such method: "+a;return g=i[a](),null!=d&&("fixed"===e?g=g.toFixed(d):(h=Math.pow(10,d),g=Math.round(g*h)/h)),g}}}),$.jgrid.extend({jqGridImport:function(a){return a=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},a||{}),this.each(function(){var b,c=this,d=function(a,b){var d,e,f,g,h=$(b.xmlGrid.config,a)[0],i=$(b.xmlGrid.data,a)[0];if(xmlJsonClass.xml2json){d=xmlJsonClass.xml2json(h," "),d=$.parseJSON(d);for(f in d)d.hasOwnProperty(f)&&(e=d[f]);void 0!==e&&(i?(g=d.grid.datatype,d.grid.datatype="xmlstring",d.grid.datastr=a,$(c).jqGrid(e).jqGrid("setGridParam",{datatype:g})):$(c).jqGrid(e))}else(null!=jgrid.defaults&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("xml2json or parse are not present")},e=function(a,b){if(a&&"string"==typeof a){var d,e=$.parseJSON(a),f=e[b.jsonGrid.config],g=e[b.jsonGrid.data];g?(d=f.datatype,f.datatype="jsonstring",f.datastr=g,$(c).jqGrid(f).jqGrid("setGridParam",{datatype:d})):$(c).jqGrid(f)}};switch(a.imptype){case"xml":$.ajax($.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"xml",context:a,complete:function(a){!(a.status<300||304===a.status)||0===a.status&&4===a.readyState||(d(a.responseXML,this),$(c).triggerHandler("jqGridImportComplete",[a,this]),$.isFunction(this.importComplete)&&this.importComplete(a))}},a.ajaxOptions));break;case"xmlstring":a.impstring&&"string"==typeof a.impstring&&(b=$.parseXML(a.impstring),b&&(d(b,a),$(c).triggerHandler("jqGridImportComplete",[b,a]),$.isFunction(a.importComplete)&&a.importComplete(b),a.impstring=null));break;case"json":$.ajax($.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"json",context:a,complete:function(a){try{!(a.status<300||304===a.status)||0===a.status&&4===a.readyState||(e(a.responseText,this),$(c).triggerHandler("jqGridImportComplete",[a,this]),$.isFunction(this.importComplete)&&this.importComplete(a))}catch(a){}}},a.ajaxOptions));break;case"jsonstring":a.impstring&&"string"==typeof a.impstring&&(e(a.impstring,a),$(c).triggerHandler("jqGridImportComplete",[a.impstring,a]),$.isFunction(a.importComplete)&&a.importComplete(a.impstring),a.impstring=null)}})},jqGridExport:function(a){a=$.extend({exptype:"xmlstring",root:"grid",ident:"\t"},a||{});var b=null;return this.each(function(){if(this.grid){var c,d=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(d.rownumbers&&(d.colNames.splice(0,1),d.colModel.splice(0,1)),d.multiselect&&(d.colNames.splice(0,1),d.colModel.splice(0,1)),d.subGrid&&(d.colNames.splice(0,1),d.colModel.splice(0,1)),d.knv=null,d.treeGrid)for(c in d.treeReader)d.treeReader.hasOwnProperty(c)&&(d.colNames.splice(d.colNames.length-1),d.colModel.splice(d.colModel.length-1));switch(a.exptype){case"xmlstring":b="<"+a.root+">"+xmlJsonClass.json2xml(d,a.ident)+"</"+a.root+">";break;case"jsonstring":b="{"+xmlJsonClass.toJson(d,a.root,a.ident,!1)+"}",void 0!==d.postData.filters&&(b=b.replace(/filters":"/,'filters":'),b=b.replace(/\}\]\}"/,"}]}"))}}}),b},excelExport:function(a){return a=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},a||{}),this.each(function(){var b;this.grid&&"remote"===a.exptype&&(b=$.extend({},this.p.postData,a.exportOptions),b[a.oper]=a.tag,window.location=a.url+(null!=a.url&&a.url.indexOf("?")>=0?"&":"?")+$.param(b))})}});var editFeedback=function(a){var b=$.makeArray(arguments).slice(1);return b.unshift(""),b.unshift("Inline"),b.unshift(a),jgrid.feedback.apply(this,b)};jgrid.inlineEdit=jgrid.inlineEdit||{},jgrid.extend({editRow:function(a,b,c,d,e,f,g,h,i,j){var k={},l=$.makeArray(arguments).slice(1);return"object"===$.type(l[0])?k=l[0]:(void 0!==b&&(k.keys=b),$.isFunction(c)&&(k.oneditfunc=c),$.isFunction(d)&&(k.successfunc=d),void 0!==e&&(k.url=e),null!=f&&(k.extraparam=f),$.isFunction(g)&&(k.aftersavefunc=g),$.isFunction(h)&&(k.errorfunc=h),$.isFunction(i)&&(k.afterrestorefunc=i),$.isFunction(j)&&(k.beforeEditRow=j)),this.each(function(){var b=this,c=$(b),d=b.p,e=0,f=null,g={},h=d.colModel,i=d.prmNames;if(b.grid){var j=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},jgrid.inlineEdit,d.inlineEditing||{},k),l=c.jqGrid("getInd",a,!0),m=j.focusField,n="object"==typeof m&&null!=m?$(m.target||m).closest("tr.jqgrow>td")[0]:null;if(l!==!1&&(j.extraparam[i.oper]===i.addoper||editFeedback.call(b,j,"beforeEditRow",j,a))&&"0"===($(l).attr("editable")||"0")&&!$(l).hasClass("not-editable-row")){var o=jgrid.detectRowEditing.call(b,a);if(null!=o&&"cellEditing"===o.mode){var p=o.savedRow,q=b.rows[p.id],r=getGuiStateStyles.call(b,"select");c.jqGrid("restoreCell",p.id,p.ic),$(q.cells[p.ic]).removeClass("edit-cell "+r),$(q).addClass(r).attr({"aria-selected":"true",tabindex:"0"})}if(jgrid.enumEditableCells.call(b,l,$(l).hasClass("jqgrid-new-row")?"add":"edit",function(c){var h,i,j,k=c.cm,l=$(c.dataElement),m=c.dataWidth,n=k.name,o=k.edittype,p=c.iCol,q=k.editoptions||{};if("hidden"!==c.editable){try{h=$.unformat.call(this,c.td,{rowId:a,colModel:k},p)}catch(a){h="textarea"===o?l.text():l.html()}g[n]=h,l.html(""),i=$.extend({},q,{id:a+"_"+n,name:n,rowId:a,mode:c.mode,cm:k,iCol:p}),("&nbsp;"===h||"&#160;"===h||1===h.length&&160===h.charCodeAt(0))&&(h=""),j=jgrid.createEl.call(b,o,i,h,!0,$.extend({},jgrid.ajaxOptions,d.ajaxSelectOptions||{})),$(j).addClass("editable"),l.append(j),m&&$(j).width(c.dataWidth),jgrid.bindEv.call(b,j,i),"select"===o&&q.multiple===!0&&void 0===q.dataUrl&&jgrid.msie&&$(j).width($(j).width()),null===f&&(f=p),e++}}),e>0){if(g.id=a,d.savedRow.push(g),$(l).attr("editable","1"),m&&("number"==typeof m&&parseInt(m,10)<=h.length?f=m:"string"==typeof m?f=d.iColByName[m]:null!=n&&(f=n.cellIndex),setTimeout(function(){var a=c.jqGrid("getNumberOfFrozenColumns"),e=function(c){return d.frozenColumns&&a>0&&f<a?b.grid.fbRows[l.rowIndex].cells[c]:l.cells[c]},g=function(a){return $(a).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},h=function(){return g(d.frozenColumns&&a>0?b.grid.fbRows[l.rowIndex]:l).first()},i=g(e(f));i.length>0?i.first().focus():"number"==typeof j.defaultFocusField||"string"==typeof j.defaultFocusField?(i=g(e("number"==typeof j.defaultFocusField?j.defaultFocusField:d.iColByName[j.defaultFocusField])),0===i.length&&(i=h()),i.first().focus()):h().focus()},0)),j.keys===!0){var s=$(l);d.frozenColumns&&(s=s.add(b.grid.fbRows[l.rowIndex])),s.on("keydown",function(b){if(27===b.keyCode)return c.jqGrid("restoreRow",a,j.afterrestorefunc),!1;if(13===b.keyCode){var d=b.target;return"TEXTAREA"===d.tagName||(c.jqGrid("saveRow",a,j),!1)}})}fullBoolFeedback.call(b,j.oneditfunc,"jqGridInlineEditRow",a,j)}}}})},saveRow:function(a,b,c,d,e,f,g,h){var i,j=$.makeArray(arguments).slice(1),k={},l=this[0],m=$(l),n=null!=l?l.p:null,o=jgrid.info_dialog,p=$.isFunction,q=null!=jgrid.defaults&&p(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert;if(l.grid&&null!=n){"object"===$.type(j[0])?k=j[0]:(p(b)&&(k.successfunc=b),void 0!==c&&(k.url=c),void 0!==d&&(k.extraparam=d),p(e)&&(k.aftersavefunc=e),p(f)&&(k.errorfunc=f),p(g)&&(k.afterrestorefunc=g),p(h)&&(k.beforeSaveRow=h));var r=function(a){return m.jqGrid("getGridRes",a)};k=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:r("defaults.savetext")||"Saving..."},jgrid.inlineEdit,n.inlineEditing||{},k);var s,t,u,v,w,x,y,z,A={},B={},C={},D=m.jqGrid("getInd",a,!0),E=$(D),F=n.prmNames,G=r("errors.errcap"),H=r("edit.bClose"),I=function(a,b){try{var c=jgrid.getRelativeRect.call(l,b);o.call(l,G,a,H,{top:c.top,left:c.left+$(l).closest(".ui-jqgrid").offset().left})}catch(b){q(a)}};if(D!==!1&&(i=k.extraparam[F.oper]===F.addoper?"add":"edit",editFeedback.call(l,k,"beforeSaveRow",k,a,i)&&(s=E.attr("editable"),k.url=k.url||n.editurl,y="clientArray"!==k.url,"1"===s))){if(x=($.jgrid.detectRowEditing.call(l,a)||{}).savedRow,jgrid.enumEditableCells.call(l,D,E.hasClass("jqgrid-new-row")?"add":"edit",function(a){var b=a.cm,c=b.formatter,d=b.editoptions||{},e=b.formatoptions||{},f={},g=jgrid.getEditedValue.call(l,$(a.dataElement),b,f,a.editable);return"select"===b.edittype&&"select"!==b.formatter&&(B[b.name]=f.text),w=jgrid.checkValues.call(l,g,a.iCol,void 0,void 0,$.extend(a,{oldValue:null!=x?x[b.name]:null,newValue:g,oldRowData:x})),null!=w&&w[0]===!1?(z=!0,I(w[1],a.td),!1):("date"===c&&e.sendFormatted!==!0&&(g=$.unformat.date.call(l,g,b)),y&&d.NullIfEmpty===!0&&""===g&&(g="null"),void(A[b.name]=g))}),z)return;var J;F=n.prmNames,J=n.keyName===!1?F.id:n.keyName,A&&(A[F.oper]=F.editoper,void 0!==A[J]&&""!==A[J]||(A[J]=jgrid.stripPref(n.idPrefix,a)),A=$.extend({},A,n.inlineData||{},k.extraparam));var K={options:k,rowid:a,tr:D,iRow:D.rowIndex,savedRow:x,newData:A,mode:i};if(!editFeedback.call(l,k,"saveRowValidation",K))return void(K.errorText&&I(K.errorText,D));if(y)m.jqGrid("progressBar",{method:"show",loadtype:k.saveui,htmlcontent:k.savetext}),C=$.extend({},A,C),C[J]=jgrid.stripPref(n.idPrefix,C[J]),n.autoEncodeOnEdit&&$.each(C,function(a,b){p(b)||(C[a]=jgrid.oldEncodePostedData(b))}),D.id===n.idPrefix+C[J]||null==F.idold||C.hasOwnProperty(F.idold)||(C[F.idold]=jgrid.stripPref(n.idPrefix,D.id)),$.ajax($.extend({url:p(k.url)?k.url.call(l,C[J],i,C,k):k.url,data:jgrid.serializeFeedback.call(l,p(k.serializeSaveData)?k.serializeSaveData:n.serializeRowData,"jqGridInlineSerializeSaveData",C),type:p(k.mtype)?k.mtype.call(l,i,k,C[J],C):k.mtype,complete:function(b,c){if(m.jqGrid("progressBar",{method:"hide",loadtype:k.saveui}),(b.status<300||304===b.status)&&(0!==b.status||4!==b.readyState)){var d,e,f;if(e=m.triggerHandler("jqGridInlineSuccessSaveRow",[b,a,k,i,C]),null!=e&&e!==!0||(e=[!0,A]),e[0]&&p(k.successfunc)&&(e=k.successfunc.call(l,b,a,k,i,C)),$.isArray(e)?(d=e[0],A=e[1]||A):d=e,d===!0){for(n.autoEncodeOnEdit&&$.each(A,function(a,b){A[a]=jgrid.oldDecodePostedData(b)}),A=$.extend({},A,B),m.jqGrid("setRowData",a,A),E.attr("editable","0"),f=0;f<n.savedRow.length;f++)if(String(n.savedRow[f].id)===String(a)){u=f;break}u>=0&&n.savedRow.splice(u,1),fullBoolFeedback.call(l,k.aftersavefunc,"jqGridInlineAfterSaveRow",a,b,A,k),null!=e[2]?m.jqGrid("changeRowid",a,n.idPrefix+e[2]):D.id!==n.idPrefix+A[J]&&m.jqGrid("changeRowid",D.id,n.idPrefix+A[J]),E.removeClass("jqgrid-new-row").off("keydown")}else fullBoolFeedback.call(l,k.errorfunc,"jqGridInlineErrorSaveRow",a,b,c,null,k),k.restoreAfterError===!0&&m.jqGrid("restoreRow",a,k.afterrestorefunc)}},error:function(b,c,d){if(m.triggerHandler("jqGridInlineErrorSaveRow",[a,b,c,d,k]),p(k.errorfunc))k.errorfunc.call(l,a,b,c,d);else{var e=b.responseText||b.statusText;try{o.call(l,G,'<div class="'+getGuiStateStyles.call(l,"error")+'">'+e+"</div>",H,{buttonalign:"right"})}catch(a){q(e)}}k.restoreAfterError===!0&&m.jqGrid("restoreRow",a,k.afterrestorefunc)}},jgrid.ajaxOptions,n.ajaxRowOptions,k.ajaxSaveOptions||{}));else{for(A=$.extend({},A,B),v=m.jqGrid("setRowData",a,A),E.attr("editable","0"),t=0;t<n.savedRow.length;t++)if(String(n.savedRow[t].id)===String(a)){u=t;break}u>=0&&n.savedRow.splice(u,1),fullBoolFeedback.call(l,k.aftersavefunc,"jqGridInlineAfterSaveRow",a,v,A,k),E.removeClass("jqgrid-new-row").off("keydown"),D.id!==n.idPrefix+A[J]&&m.jqGrid("changeRowid",D.id,n.idPrefix+A[J])}}}},restoreRow:function(a,b){var c=$.makeArray(arguments).slice(1),d={};return"object"===$.type(c[0])?d=c[0]:$.isFunction(b)&&(d.afterrestorefunc=b),this.each(function(){var b,c=this,e=$(c),f=c.p,g=-1,h={};if(c.grid){var i=$.extend(!0,{},jgrid.inlineEdit,f.inlineEditing||{},d),j=e.jqGrid("getInd",a,!0);if(j!==!1&&editFeedback.call(c,i,"beforeCancelRow",i,a)){for(b=0;b<f.savedRow.length;b++)if(String(f.savedRow[b].id)===String(a)){g=b;break}if(g>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+jgrid.jqID(j.id)).datepicker("hide")}catch(a){}$.each(f.colModel,function(){var a=this.name;f.savedRow[g].hasOwnProperty(a)&&(h[a]=f.savedRow[g][a],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&this.formatoptions.sendFormatted===!0||(h[a]=$.unformat.date.call(c,h[a],this)))}),e.jqGrid("setRowData",a,h),$(j).attr("editable","0").off("keydown"),f.savedRow.splice(g,1),$("#"+jgrid.jqID(a),c).hasClass("jqgrid-new-row")&&setTimeout(function(){e.jqGrid("delRowData",a),e.jqGrid("showAddEditButtons",!1)},0)}fullBoolFeedback.call(c,i.afterrestorefunc,"jqGridInlineAfterRestoreRow",a)}}})},addRow:function(a){return this.each(function(){if(this.grid){var b=this,c=$(b),d=b.p,e=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},jgrid.inlineEdit,d.inlineEditing||{},a||{});if(editFeedback.call(b,e,"beforeAddRow",e.addRowParams))if(e.rowID=$.isFunction(e.rowID)?e.rowID.call(b,e):null!=e.rowID?e.rowID:jgrid.randId(),e.useDefValues===!0&&$(d.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var a=this.editoptions.defaultValue;e.initdata[this.name]=$.isFunction(a)?a.call(b):a}}),e.rowID=d.idPrefix+e.rowID,c.jqGrid("addRowData",e.rowID,e.initdata,e.position),$("#"+jgrid.jqID(e.rowID),b).addClass("jqgrid-new-row"),e.useFormatter)$("#"+jgrid.jqID(e.rowID)+" .ui-inline-edit",b).click();else{var f=d.prmNames,g=f.oper;e.addRowParams.extraparam[g]=f.addoper,c.jqGrid("editRow",e.rowID,e.addRowParams),c.jqGrid("setSelection",e.rowID)}}})},inlineNav:function(a,b){return"object"==typeof a&&(b=a,a=void 0),this.each(function(){var c=this,d=$(c),e=c.p;if(this.grid&&null!=e){var f,g=a===e.toppager?e.idSel+"_top":e.idSel,h=a===e.toppager?e.id+"_top":e.id,i=getGuiStateStyles.call(c,"disabled"),j=$.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},d.jqGrid("getGridRes","nav"),jgrid.nav||{},e.navOptions||{},jgrid.inlineNav||{},e.inlineNavOptions||{},b||{}),k=function(){c.modalAlert()};if(void 0===a)if(e.pager){if(d.jqGrid("inlineNav",e.pager,j),!e.toppager)return;a=e.toppager,g=e.idSel+"_top",h=e.id+"_top"}else e.toppager&&(a=e.toppager,g=e.idSel+"_top",h=e.id+"_top");if(void 0!==a&&(f=$(a),!(f.length<=0))){if(f.find(".navtable").length<=0&&d.jqGrid("navGrid",a,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),e._inlinenav=!0,j.addParams.useFormatter===!0){var l,m,n,o=e.colModel;for(l=0;l<o.length;l++)if(o[l].formatter&&"actions"===o[l].formatter){o[l].formatoptions&&(m={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},n=$.extend(m,o[l].formatoptions),j.addParams.addRowParams={keys:n.keys,oneditfunc:n.onEdit,successfunc:n.onSuccess,url:n.url,extraparam:n.extraparam,aftersavefunc:n.afterSave,errorfunc:n.onError,afterrestorefunc:n.afterRestore});break}}j.add&&d.jqGrid("navButtonAdd",a,{caption:j.addtext,title:j.addtitle,commonIconClass:j.commonIconClass,buttonicon:j.addicon,iconsOverText:j.iconsOverText,id:h+"_iladd",onClickButton:function(){hasOneFromClasses(this,i)||d.jqGrid("addRow",j.addParams)}}),j.edit&&d.jqGrid("navButtonAdd",a,{caption:j.edittext,title:j.edittitle,commonIconClass:j.commonIconClass,buttonicon:j.editicon,iconsOverText:j.iconsOverText,id:h+"_iledit",onClickButton:function(){if(!hasOneFromClasses(this,i)){var a=e.selrow;a?d.jqGrid("editRow",a,j.editParams):k()}}}),j.save&&(d.jqGrid("navButtonAdd",a,{caption:j.savetext,title:j.savetitle,commonIconClass:j.commonIconClass,buttonicon:j.saveicon,iconsOverText:j.iconsOverText,id:h+"_ilsave",onClickButton:function(){if(!hasOneFromClasses(this,i)){var a=e.savedRow[0].id;if(a){var b=e.prmNames,f=b.oper,g=j.editParams;$("#"+jgrid.jqID(a),c).hasClass("jqgrid-new-row")?(j.addParams.addRowParams.extraparam[f]=b.addoper,g=j.addParams.addRowParams):(j.editParams.extraparam||(j.editParams.extraparam={}),j.editParams.extraparam[f]=b.editoper),d.jqGrid("saveRow",a,g)}else k()}}}),$(g+"_ilsave").addClass(i)),j.cancel&&(d.jqGrid("navButtonAdd",a,{caption:j.canceltext,title:j.canceltitle,commonIconClass:j.commonIconClass,buttonicon:j.cancelicon,iconsOverText:j.iconsOverText,id:h+"_ilcancel",onClickButton:function(){if(!hasOneFromClasses(this,i)){var a=e.savedRow[0].id,b=j.editParams;a?($("#"+jgrid.jqID(a),c).hasClass("jqgrid-new-row")&&(b=j.addParams.addRowParams),d.jqGrid("restoreRow",a,b)):k()}}}),$(g+"_ilcancel").addClass(i)),j.restoreAfterSelect===!0&&d.on("jqGridSelectRow",function(a,b){if(e.savedRow.length>0&&e._inlinenav===!0){var c=e.savedRow[0].id;b!==c&&"number"!=typeof c&&d.jqGrid("restoreRow",c,j.editParams)}}),d.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){d.jqGrid("showAddEditButtons",!1)}),d.on("jqGridInlineEditRow",function(a,b){d.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(a){return this.each(function(){var b=this;if(b.grid){var c=b.p,d=c.idSel,e=getGuiStateStyles.call(b,"disabled"),f=d+"_ilsave,"+d+"_ilcancel"+(c.toppager?","+d+"_top_ilsave,"+d+"_top_ilcancel":""),g=d+"_iladd,"+d+"_iledit"+(c.toppager?","+d+"_top_iladd,"+d+"_top_iledit":"");$(a?g:f).addClass(e),$(a?f:g).removeClass(e)}})}});var $UiMultiselect=null!=$.ui?$.ui.multiselect:null,reorderSelectedColumns=function(a){if(null!=this.grid&&null!=this.grid.p){var b,c,d,e,f,g=this,h=this.grid.p,i=this.gh,j=this.selectedList,k=this.inGroup,l=j.find("li"),m=l.length-1,n=function(a,b,c){var d,e,f=j.find("li");for(void 0===b&&(b=c?f.length-1:0),d=b;c?d>=0:d<f.length;c?d--:d++)if(e=$(f[d]).data("optionLink"),e&&a.call(f[d],parseInt(e.val(),10),d))return d},o=function(){c=$.inArray(h.colModel[a].name,g.newColOrder),c>=0&&g.newColOrder.splice(c,1),l=j.find("li"),b=0,n(function(c,d){if(c===a){for(m=d;b>=0&&b<h.colModel.length&&(h.colModel[b].hidden||h.colModel[b].hidedlg)&&null!=k&&k[b]===k[a];)b++;return g.newColOrder.splice(b,0,h.colModel[a].name),!0}b=$.inArray(h.colModel[c].name,g.newColOrder,b),b<0&&(b=$.inArray(h.colModel[c].name,g.newColOrder)),b++})},p=function(b){if(k[b]===k[a])return $(this).after(l[m]),o(),!0},q=function(b){if(k[b]===k[a])return $(this).before(l[m]),o(),!0},r=function(b){if(k[b]===k[a]&&void 0!==k[b])return i[k[b]].startColumnName=h.colModel[b].name,!0};if(o(),i&&void 0!==i[k[a]]){for(e=i[k[a]],c=0;c<e.numberOfColumns;c++)if(b=h.iColByName[e.startColumnName]+c,!h.colModel[b].hidden&&!h.colModel[b].hidedlg){n(p,m-1,!0),n(q,m+1),n(r);break}}else if(i){if(l=j.find("li"),c=n(function(b){if(b===a)return!0}),c+1>=l.length||c<0)return;if(f=$(l[c+1]).data("optionLink"),f&&(d=k[parseInt(f.val(),10)],void 0!==d&&(f=$(l[c-1]).data("optionLink"),f&&k[parseInt(f.val(),10)]===d))){var s=n(function(a){if(k[a]!==d)return!0},c+1);$(l[void 0===s||s>=l.length?l.length-1:s-1]).after(l[m]),o()}}}};if(jgrid.msie&&8===jgrid.msiever()&&($.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display}),jgrid._multiselect=!1,$UiMultiselect){if($UiMultiselect.prototype._setSelected){var setSelected=$UiMultiselect.prototype._setSelected;$UiMultiselect.prototype._setSelected=function(a,b){var c=setSelected.call(this,a,b),d=this.element,e=parseInt(a.data("optionLink").val(),10);return b&&this.selectedList&&(reorderSelectedColumns.call(this,e),this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(d)})),c}}$UiMultiselect.prototype.destroy&&($UiMultiselect.prototype.destroy=function(){var a=this;a.element.show(),a.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(a,arguments):$.Widget.prototype.destroy.apply(a,arguments)}),jgrid._multiselect=!0}jgrid.extend({sortableColumns:function(a){return this.each(function(){function b(){d.disableClick=!0}var c=this,d=c.p,e=jqID(d.id);if(d&&d.sortable&&$.isFunction($.fn.sortable)){var f={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(a){var b=$(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return b},update:function(a,b){
b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},start:function(){c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft},update:function(a,b){var e=$(">th",$(b.item).parent()),f=d.id+"_",g=[];e.each(function(){var a=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(f,""),b=d.iColByName[a];void 0!==b&&g.push(b)}),$(c).jqGrid("remapColumns",g,!0,!0),$.isFunction(d.sortable.update)&&d.sortable.update(g),setTimeout(function(){d.disableClick=!1},50)}};if(d.sortable.options?$.extend(f,d.sortable.options):$.isFunction(d.sortable)&&(d.sortable={update:d.sortable}),f.start){var g=f.start;f.start=function(a,c){b(),g.call(this,a,c)}}else f.start=b;d.sortable.exclude&&(f.items+=":not("+d.sortable.exclude+")");var h=a.sortable(f),i=h.data("sortable")||h.data("uiSortable")||h.data("ui-sortable");null!=i&&(i.floating=!0)}})},columnChooser:function(a){function b(a,b){a&&("string"==typeof a?$.fn[a]&&$.fn[a].apply(b,$.makeArray(arguments).slice(2)):$.isFunction(a)&&a.apply(b,$.makeArray(arguments).slice(2)))}var c,d,e,f,g,h,i,j=this,k=j[0],l=k.p,m=l.colModel,n=m.length,o=l.colNames,p=function(a){return $UiMultiselect&&$UiMultiselect.prototype&&a.data($UiMultiselect.prototype.widgetFullName||$UiMultiselect.prototype.widgetName)||a.data("ui-multiselect")||a.data("multiselect")};if(!$("#colchooser_"+jqID(l.id)).length){if(c=$('<div id="colchooser_'+l.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),d=$("select",c),a=$.extend({width:400,height:240,classname:null,done:function(a){a&&j.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(a){var b={};return b[a.bSubmit]=function(){a.apply_perm(),a.cleanup(!1)},b[a.bCancel]=function(){a.cleanup(!0)},$.extend(!0,{buttons:b,close:function(){a.cleanup(!0)},modal:a.modal||!1,resizable:a.resizable||!0,width:a.width+70,resize:function(){var a=p(d),b=a.container.closest(".ui-dialog-content");b.length>0&&"object"==typeof b[0].style?b[0].style.width="":b.css("width",""),a.selectedList.height(Math.max(a.selectedContainer.height()-a.selectedActions.outerHeight()-1,1)),a.availableList.height(Math.max(a.availableContainer.height()-a.availableActions.outerHeight()-1,1))}},a.dialog_opts||{})},apply_perm:function(){var b,c,e=new Array(l.colModel.length),f={notSkipFrozen:void 0!==a.notSkipFrozen&&a.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(b=0;b<l.colModel.length;b++)e[b]=l.iColByName[h.newColOrder[b]];if($("option",d).each(function(){$(this).is(":selected")?j.jqGrid("showCol",m[this.value].name,f):j.jqGrid("hideCol",m[this.value].name,f)}),a.done&&a.done.call(j,e),l.groupHeader&&("object"==typeof l.groupHeader||$.isFunction(l.groupHeader)))if(j.jqGrid("destroyGroupHeader",!1),l.groupHeader.groupHeaders=h.gh,null!=l.pivotOptions&&null!=l.pivotOptions.colHeaders&&l.pivotOptions.colHeaders.length>1)for(c=l.pivotOptions.colHeaders,b=0;b<c.length;b++)c[b]&&c[b].groupHeaders.length&&j.jqGrid("setGroupHeaders",c[b]);else j.jqGrid("setGroupHeaders",l.groupHeader);var g=l.autowidth||void 0!==l.widthOrg&&"auto"!==l.widthOrg&&"100%"!==l.widthOrg?l.width:l.tblwidth;g!==l.width&&j.jqGrid("setGridWidth",g,l.shrinkToFit)},cleanup:function(e){b(a.dlog,c,"destroy"),b(a.msel,d,"destroy"),c.remove(),e&&a.done&&a.done.call(j)},msel_opts:{}},j.jqGrid("getGridRes","col"),jgrid.col,a||{}),$.ui&&$UiMultiselect&&$UiMultiselect.defaults){if(!jgrid._multiselect)return void(null!=jgrid.defaults&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");a.msel_opts=$.extend($UiMultiselect.defaults,a.msel_opts)}a.caption&&c.attr("title",a.caption),a.classname&&(c.addClass(a.classname),d.addClass(a.classname)),a.width&&($(">div",c).css({width:a.width,margin:"0 auto"}),d.css("width",a.width)),a.height&&($(">div",c).css("height",a.height),d.css("height",a.height-10)),d.empty();var q,r,s,t,u=null!=l.groupHeader?l.groupHeader.groupHeaders:0,v={};if(u)for(q=0;q<u.length;q++)for(t=u[q],r=0;r<t.numberOfColumns;r++)s=l.iColByName[t.startColumnName]+r,v[s]=$.isFunction(a.buildItemText)?a.buildItemText.call(j[0],{iCol:s,cm:m[s],cmName:m[s].name,colName:o[s],groupTitleText:t.titleText}):$.jgrid.stripHtml(t.titleText)+": "+$.jgrid.stripHtml(""===o[s]?m[s].name:o[s]);for(s=0;s<n;s++)void 0===v[s]&&(v[s]=$.isFunction(a.buildItemText)?a.buildItemText.call(j[0],{iCol:s,cm:m[s],cmName:m[s].name,colName:o[s],groupTitleText:null}):$.jgrid.stripHtml(o[s]));if($.each(m,function(a){this.hidedlg||d.append("<option value='"+a+"'"+(l.headertitles||this.headerTitle?" title='"+jgrid.stripHtml("string"==typeof this.headerTitle?this.headerTitle:v[a])+"'":"")+(this.hidden?"":" selected='selected'")+">"+v[a]+"</option>")}),e=$.isFunction(a.dlog_opts)?a.dlog_opts.call(j,a):a.dlog_opts,b(a.dlog,c,e),f=$.isFunction(a.msel_opts)?a.msel_opts.call(j,a):a.msel_opts,b(a.msel,d,f),g=$("#colchooser_"+jqID(l.id)),g.css({margin:"auto"}),g.find(">div").css({width:"100%",height:"100%",margin:"auto"}),h=p(d)){if(h.grid=k,u){h.gh=$.extend(!0,[],u),h.inGroup=new Array(l.colModel.length);var w,x;for(w=0;w<u.length;w++)for(x=u[w],s=0;s<x.numberOfColumns;s++)h.inGroup[l.iColByName[x.startColumnName]+s]=w}h.newColOrder=$.map(m,function(a){return a.name}),h.container.css({width:"100%",height:"100%",margin:"auto"}),h.selectedContainer.css({width:100*h.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),h.availableContainer.css({width:100-100*h.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),h.selectedList.css("height","auto"),h.availableList.css("height","auto"),i=Math.max(h.selectedList.height(),h.availableList.height()),i=Math.min(i,$(window).height()),h.selectedList.css("height",i),h.availableList.css("height",i),null!=h.options&&h.options.sortable&&h.selectedList.on("sortupdate",function(b,c){reorderSelectedColumns.call(h,parseInt(c.item.data("optionLink").val(),10)),c.item.css({width:"",height:""}),$.isFunction(a.sortUpdate)&&a.sortUpdate.call(k,b,c)}),$.isFunction(a.init)&&a.init.call(k,h)}}},sortableRows:function(a){return this.each(function(){var b=this,c=b.grid,d=b.p;c&&(d.treeGrid||$.fn.sortable&&(a=$.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},a||{}),a.start&&$.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&$.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(e,f){if($(f.item).css("border-width","0"),$("td",f.item).each(function(a){this.style.width=c.cols[a].style.width}),d.subGrid){var g=$(f.item).attr("id");try{$(b).jqGrid("collapseSubGridRow",g)}catch(a){}}a._start_&&a._start_.apply(this,[e,f])},a.update=function(c,e){$(e.item).css("border-width",""),d.rownumbers===!0&&$("td.jqgrid-rownum",b.rows).each(function(a){$(this).html(a+1+(parseInt(d.page,10)-1)*parseInt(d.rowNum,10))}),a._update_&&a._update_.apply(this,[c,e])},$(b).sortable(a)))})},gridDnD:function(a){return this.each(function(){function b(){var a=$.data(e,"dnd");$("tr.jqgrow:not(.ui-draggable)",e).draggable($.isFunction(a.drag)?a.drag.call($(e),a):a.drag)}var c,d,e=this;if(e.grid&&!e.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var f="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(f),"string"==typeof a&&"updateDnD"===a&&e.p.jqgdnd===!0)return void b();if(a=$.extend({drag:function(a){return $.extend({start:function(b,c){var d,f;if(e.p.subGrid){f=$(c.helper).attr("id");try{$(e).jqGrid("collapseSubGridRow",f)}catch(a){}}for(d=0;d<$.data(e,"dnd").connectWith.length;d++)0===$($.data(e,"dnd").connectWith[d]).jqGrid("getGridParam","reccount")&&$($.data(e,"dnd").connectWith[d]).jqGrid("addRowData","jqg_empty_row",{});c.helper.addClass("ui-state-highlight"),$("td",c.helper).each(function(a){this.style.width=e.grid.headers[a].width+"px"}),a.onstart&&$.isFunction(a.onstart)&&a.onstart.call($(e),b,c)},stop:function(b,c){var d,f;for(c.helper.dropped&&!a.dragcopy&&(f=$(c.helper).attr("id"),void 0===f&&(f=$(this).attr("id")),$(e).jqGrid("delRowData",f)),d=0;d<$.data(e,"dnd").connectWith.length;d++)$($.data(e,"dnd").connectWith[d]).jqGrid("delRowData","jqg_empty_row");a.onstop&&$.isFunction(a.onstop)&&a.onstop.call($(e),b,c)}},a.drag_opts||{})},drop:function(a){return $.extend({accept:function(a){if(!$(a).hasClass("jqgrow"))return a;var b=$(a).closest("table.ui-jqgrid-btable");if(b.length>0&&void 0!==$.data(b[0],"dnd")){var c=$.data(b[0],"dnd").connectWith;return $.inArray("#"+jqID(this.id),c)!==-1}return!1},drop:function(b,c){if($(c.draggable).hasClass("jqgrow")){var d=$(c.draggable).attr("id"),f=c.draggable.parent().parent().jqGrid("getRowData",d);if(!a.dropbyname){var g,h,i=0,j={},k=$("#"+jqID(this.id)).jqGrid("getGridParam","colModel");try{for(h in f)f.hasOwnProperty(h)&&(g=k[i].name,"cb"!==g&&"rn"!==g&&"subgrid"!==g&&f.hasOwnProperty(h)&&k[i]&&(j[g]=f[h]),i++);f=j}catch(a){}}if(c.helper.dropped=!0,a.beforedrop&&$.isFunction(a.beforedrop)){var l=a.beforedrop.call(this,b,c,f,$("#"+jqID(e.p.id)),$(this));void 0!==l&&null!==l&&"object"==typeof l&&(f=l)}if(c.helper.dropped){var m;a.autoid&&($.isFunction(a.autoid)?m=a.autoid.call(this,f):(m=Math.ceil(1e3*Math.random()),m=a.autoidprefix+m)),$("#"+jqID(this.id)).jqGrid("addRowData",m,f,a.droppos),f[e.p.localReader.id]=m}a.ondrop&&$.isFunction(a.ondrop)&&a.ondrop.call(this,b,c,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith)for(a.connectWith=a.connectWith.split(","),a.connectWith=$.map(a.connectWith,function(a){return $.trim(a)}),$.data(e,"dnd",a),0===e.p.reccount||e.p.jqgdnd||b(),e.p.jqgdnd=!0,c=0;c<a.connectWith.length;c++)d=a.connectWith[c],$(d).droppable($.isFunction(a.drop)?a.drop.call($(e),a):a.drop)}})},gridResize:function(a){return this.each(function(){var b,c=this,d=c.grid,e=c.p,f=e.gView+">.ui-jqgrid-bdiv",g=!1,h=e.height;if(d&&$.fn.resizable){if(a=$.extend({},a||{}),a.alsoResize?(a._alsoResize_=a.alsoResize,delete a.alsoResize):a._alsoResize_=!1,a.stop&&$.isFunction(a.stop)?(a._stop_=a.stop,delete a.stop):a._stop_=!1,a.stop=function(i,j){$(c).jqGrid("setGridWidth",j.size.width,a.shrinkToFit),$(e.gView+">.ui-jqgrid-titlebar").css("width",""),g?($(b).each(function(){$(this).css("height","")}),"auto"!==h&&"100%"!==h||$(d.bDiv).css("height",h)):$(c).jqGrid("setGridParam",{height:$(f).height()}),c.fixScrollOffsetAndhBoxPadding&&c.fixScrollOffsetAndhBoxPadding(),a._stop_&&a._stop_.call(c,i,j)},b=f,"auto"!==h&&"100%"!==h||void 0!==a.handles||(a.handles="e,w"),a.handles){var i=$.map(String(a.handles).split(","),function(a){return $.trim(a)});2===i.length&&("e"===i[0]&&"w"===i[1]||"e"===i[1]&&"w"===i[1])&&(b=e.gView+">div:not(.frozen-div)",g=!0,e.pager&&(b+=","+e.pager))}a._alsoResize_?a.alsoResize=b+","+a._alsoResize_:a.alsoResize=b,delete a._alsoResize_,$(e.gBox).resizable(a)}})}}),Aggregation.prototype.calc=function(a,b,c,d,e){var f=this;if(void 0!==a)switch(f.result=f.result||0,a=parseFloat(a),f.aggregator){case"sum":f.result+=a;break;case"count":f.result++;break;case"avg":f.finilized?(f.count=f.count||0,f.result=(f.result*f.count+a)/(f.count+1),f.count++):(f.result+=a,f.count=f.count||0,f.count++);break;case"min":f.result=Math.min(f.result,a);break;case"max":f.result=Math.max(f.result,a);break;default:$.isFunction(f.aggregator)&&(f.result=f.aggregator.call(f.context,{previousResult:f.result,value:a,fieldName:b,item:c,iItem:d,items:e}))}},Aggregation.prototype.getResult=function(a,b,c){var d=this;(void 0!==d.result||c)&&(c&&void 0!==d.result&&(d.result=0,d.count=0),void 0===d.result||d.finilized||"avg"!==d.aggregator||(d.result=d.result/d.count,d.finilized=!0),a[b]=d.result)},ArrayOfFieldsets.prototype.compareVectorsEx=function(a,b){var c,d,e=this,f=e.fieldLength;for(c=0;c<f;c++)if(d=e.fieldCompare[c](a[c],b[c]),0!==d)return{index:c,result:d};return{index:-1,result:0}},ArrayOfFieldsets.prototype.getIndexOfDifferences=function(a,b){return null===b||null===a?0:this.compareVectorsEx(a,b).index},ArrayOfFieldsets.prototype.compareVectors=function(a,b){var c=this.compareVectorsEx(a,b),d=c.index>=0?this.fieldSortDirection[c.index]:1;return d>0?c.result:-c.result},ArrayOfFieldsets.prototype.getItem=function(a){return this.items[a]},ArrayOfFieldsets.prototype.getIndexLength=function(){return this.items.length},ArrayOfFieldsets.prototype.getIndexesOfSourceData=function(a){return this.indexesOfSourceData[a]},ArrayOfFieldsets.prototype.createDataIndex=function(a){var b,c,d,e,f,g,h,i,j,k=this,l=a.length,m=k.fieldLength,n=k.fieldNames,o=k.indexesOfSourceData,p=k.items;for(b=0;b<l;b++){for(h=a[b],c=new Array(m),e=0;e<m;e++)d=h[n[e]],void 0!==d&&("string"==typeof d&&k.trimByCollect&&(d=$.trim(d)),c[e]=d);if(i=0,j=p.length-1,j<0)p.push(c),o.push([b]);else if(f=k.compareVectors(c,p[j]),0!==f)if(1===f||k.skipSort)p.push(c),o.push([b]);else if(f=k.compareVectors(p[0],c),1!==f)if(0!==f)for(;;){if(j-i<2){p.splice(j,0,c),o.splice(j,0,[b]);break}if(g=Math.floor((i+j)/2),f=k.compareVectors(p[g],c),0===f){o[g].push(b);break}1===f?j=g:i=g}else o[0].push(b);else p.unshift(c),o.unshift([b]);else o[j].push(b)}},jgrid.extend({pivotSetup:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=this[0],G=$.isArray,H={},I={groupField:[],groupSummary:[],groupSummaryPos:[]},J={grouping:!0,groupingView:I},K=$.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:a},b||{}),L=a.length,M=K.xDimension,N=K.yDimension,O=K.aggregates,P=K.totalText||K.totals||K.rowTotals||K.totalHeader,Q=G(M)?M.length:0,R=G(N)?N.length:0,S=G(O)?O.length:0,T=R-(1===S?1:0),U=[],V=[],W=[],X=[],Y=["pivotInfos"],Z=new Array(S),_=new Array(R),aa=function(b,c,d){var e=new ArrayOfFieldsets(K.trimByCollect,K.caseSensitive,c,b);return $.isFunction(d)&&(e.compareVectorsEx=d),e.createDataIndex(a),e},ba=function(a,b,c,d,e){var f,g,h;switch(a){case 1:f=N[d].totalText||"{0} {1} {2}",g="y"+e+"t"+d;break;case 2:f=K.totalText||"{0}",g="t";break;default:f=S>1?b.label||"{0}":$.isFunction(N[d].label)?N[d].label:D.getItem(e)[d],g="y"+e}return h=$.extend({},b,{name:g+(S>1?"a"+c:""),label:$.isFunction(f)?f.call(F,2===a?{aggregate:b,iAggregate:c,pivotOptions:K}:1===a?{yIndex:D.getItem(e),aggregate:b,iAggregate:c,yLevel:d,pivotOptions:K}:{yData:D.getItem(e)[d],yIndex:D.getItem(e),yLevel:d,pivotOptions:K}):jgrid.template.apply(F,2===a?[String(f),b.aggregator,b.member,c]:[String(f),b.aggregator,b.member,D.getItem(e)[d],d])}),delete h.member,delete h.aggregator,h},ca=function(a,b,c){var d,e;for(d=0;d<S;d++)e=O[d],void 0===e.template&&void 0===e.formatter&&K.defaultFormatting&&(e.template="count"===e.aggregator?"integer":"number"),W.push(ba(a,e,d,b,c))},da=function(a,b,c){var d,e,f,h;for(d=T-1;d>=b;d--)if(V[d]){for(e=0;e<=d;e++)A=U[e].groupHeaders,A[A.length-1].numberOfColumns+=S;for(g=N[d],f=g.totalHeader,h=g.headerOnTop,e=d+1;e<=T-1;e++)U[e].groupHeaders.push({titleText:h&&e===d+1||!h&&e===T-1?$.isFunction(f)?f.call(F,c,d):jgrid.template.call(F,String(f||""),c[d],d):"",startColumnName:"y"+(a-1)+"t"+d+(1===S?"":"a0"),numberOfColumns:S})}},ea=function(a){var c=new Aggregation("count"===O[a].aggregator?"sum":O[a].aggregator,F,b);return c.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},c},fa=function(){var a,b;for(a=T-1;a>=0;a--)if(V[a])for(null==_[a]&&(_[a]=new Array(S)),b=0;b<S;b++)_[a][b]=ea(b)},ga=function(a,b,c,d){var e,f,g,h=D.getIndexOfDifferences(b,c);if(null!==c)for(h=Math.max(h,0),e=T-1;e>=h;e--)f="y"+a+"t"+e+(S>1?"a"+d:""),V[e]&&void 0===y[f]&&(g=_[e][d],g.getResult(y,f),y.pivotInfos[f]={colType:1,iA:d,a:O[d],level:e,iRows:g.groupInfo.iRows,rows:g.groupInfo.rows,ys:g.groupInfo.ys,iYs:g.groupInfo.iYs},b!==c&&(_[e][d]=ea(d)))},ha=function(b,c,d,e,f,g,h){var i,j,k;if(b!==c)for(i=T-1;i>=0;i--)V[i]&&(j=_[i][e],j.calc(f[d.member],d.member,f,g,a),k=j.groupInfo,$.inArray(h,k.iYs)<0&&(k.iYs.push(h),k.ys.push(b)),$.inArray(g,k.iRows)<0&&(k.iRows.push(g),k.rows.push(f)))};if(0===Q||0===S)throw"xDimension or aggregates options are not set!";for(C=aa(M,K.skipSortByX,K.compareVectorsByX),D=aa(N,K.skipSortByY,K.compareVectorsByY),b.xIndex=C,b.yIndex=D,d=0;d<Q;d++)f=M[d],h={name:"x"+d,label:null!=f.label?$.isFunction(f.label)?f.label.call(F,f,d,K):f.label:f.dataName,frozen:K.frozenStaticCols},d<Q-1&&!f.skipGrouping&&!f.additionalProperty&&(I.groupField.push(h.name),I.groupSummary.push(K.groupSummary),I.groupSummaryPos.push(K.groupSummaryPos)),h=$.extend(h,f),delete h.dataName,delete h.footerText,f.additionalProperty?Y.push(h.name):(W.push(h),J.sortname=h.name);for(Q<2&&(J.grouping=!1),I.hideFirstGroupCol=!0,d=0;d<R;d++)g=N[d],V.push(!!(g.totals||g.rowTotals||g.totalText||g.totalHeader));for(z=D.getItem(0),ca(0,R-1,0),E=D.getIndexLength(),t=1;t<E;t++){for(u=D.getItem(t),d=D.getIndexOfDifferences(u,z),e=T-1;e>=d;e--)V[e]&&ca(1,e,t-1);z=u,ca(0,R-1,t)}for(d=T-1;d>=0;d--)V[d]&&ca(1,d,E-1);for(P&&ca(2),z=D.getItem(0),e=0;e<T;e++)U.push({useColSpanStyle:K.useColSpanStyle,groupHeaders:[{titleText:$.isFunction(N[e].label)?N[e].label.call(F,{yData:z[e],yIndex:z,yLevel:e,pivotOptions:K}):z[e],startColumnName:1===S?"y0":"y0a0",numberOfColumns:S}]});for(t=1;t<E;t++){for(u=D.getItem(t),d=D.getIndexOfDifferences(u,z),da(t,d,z),e=T-1;e>=d;e--)U[e].groupHeaders.push({titleText:$.isFunction(N[e].label)?N[e].label.call(F,{yData:u[e],yIndex:u,yLevel:e,pivotOptions:K}):u[e],startColumnName:"y"+t+(1===S?"":"a0"),numberOfColumns:S});for(e=0;e<d;e++)A=U[e].groupHeaders,A[A.length-1].numberOfColumns+=S;z=u}if(da(E,0,z),P)for(d=0;d<T;d++)U[d].groupHeaders.push({titleText:d<T-1?"":K.totalHeader||"",startColumnName:"t"+(1===S?"":"a0"),numberOfColumns:S});for(r=C.getIndexLength(),k=0;k<r;k++){for(l=C.getItem(k),m={iX:k,x:l},y={pivotInfos:m},d=0;d<Q;d++)y["x"+d]=l[d];if(s=C.getIndexesOfSourceData(k),P)for(e=0;e<S;e++)Z[e]=ea(e);for(z=null,fa(),t=0;t<E;t++){for(u=D.getItem(t),v=D.getIndexesOfSourceData(t),e=0;e<S;e++){for(null!==z&&ga(t-1,u,z,e),w=[],d=0;d<v.length;d++)B=v[d],$.inArray(B,s)>=0&&w.push(B);if(w.length>0){for(n=new Array(w.length),x=O[e],o=new Aggregation(x.aggregator,F,b),i=0;i<w.length;i++)d=w[i],c=a[d],n[i]=c,o.calc(c[x.member],x.member,c,d,a),P&&(p=Z[e],p.calc(c[x.member],x.member,c,d,a),q=p.groupInfo,$.inArray(d,q.iYs)<0&&(q.iYs.push(t),q.ys.push(u)),$.inArray(d,q.iRows)<0&&(q.iRows.push(d),q.rows.push(c))),ha(u,z,x,e,c,d,t);j="y"+t+(1===S?"":"a"+e),o.getResult(y,j),m[j]={colType:0,iY:t,y:u,iA:e,a:x,iRows:w,rows:n}}}z=u}if(null!==z)for(e=0;e<S;e++)ga(E-1,z,z,e);if(P)for(e=0;e<S;e++)j="t"+(1===S?"":"a"+e),p=Z[e],p.getResult(y,j),q=p.groupInfo,m[j]={colType:2,iA:e,a:O[e],iRows:q.iRows,rows:q.rows,iYs:q.iYs,ys:q.ys};X.push(y)}if(K.footerTotals||K.colTotals){for(L=X.length,d=0;d<Q;d++)H["x"+d]=M[d].footerText||"";for(d=Q;d<W.length;d++){for(j=W[d].name,o=new Aggregation(K.footerAggregator||"sum",F,b),i=0;i<L;i++)y=X[i],o.calc(y[j],j,y,i,X);o.getResult(H,j)}}return b.colHeaders=U,{colModel:W,additionalProperties:Y,options:b,rows:X,groupOptions:J,groupHeaders:U,summary:H}},jqPivot:function(a,b,c,d){return this.each(function(){function e(){var d,e=h.pivotSetup.call(g,a,b),i=e.groupHeaders,j=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},k=j(e.summary)>0,l=e.groupOptions.groupingView,m=jgrid.from.call(f,e.rows);if(!b.skipSortByX)for(d=0;d<l.groupField.length;d++)m.orderBy(l.groupField[d],null!=c&&c.groupingView&&null!=c.groupingView.groupOrder&&"desc"===c.groupingView.groupOrder[d]?"d":"a","text","");if(b.data=a,h.call(g,$.extend(!0,{datastr:$.extend(m.select(),k?{userdata:e.summary}:{}),datatype:"jsonstring",footerrow:k,userDataOnFooter:k,colModel:e.colModel,additionalProperties:e.additionalProperties,pivotOptions:e.options,viewrecords:!0,sortname:b.xDimension[0].dataName},e.groupOptions,c||{})),i.length)for(d=0;d<i.length;d++)i[d]&&i[d].groupHeaders.length&&h.setGroupHeaders.call(g,i[d]);b.frozenStaticCols&&h.setFrozenColumns.call(g)}var f=this,g=$(f),h=$.fn.jqGrid;"string"==typeof a?$.ajax($.extend({url:a,dataType:"json",success:function(b){a=jgrid.getAccessor(b,d&&d.reader?d.reader:"rows"),e()}},d||{})):e()})}});var subGridFeedback=function(){var a=$.makeArray(arguments);return a[0]="subGrid"+a[0].charAt(0).toUpperCase()+a[0].substring(1),a.unshift(""),a.unshift(""),a.unshift(this.p),jgrid.feedback.apply(this,a)},collapseOrExpand=function(a,b){return this.each(function(){if(this.grid&&null!=a&&this.p.subGrid===!0){var c=$(this).jqGrid("getInd",a,!0);$(c).find(">td."+b).trigger("click")}})};jgrid.extend({setSubGrid:function(){return this.each(function(){var a,b=this.p,c=$(this),d=b.subGridModel[0],e=function(a){return c.jqGrid("getIconRes",a)};if(b.subGridOptions=$.extend({commonIconClass:e("subgrid.common"),plusicon:e("subgrid.plus"),minusicon:e("subgrid.minus"),openicon:e("rtl"===b.direction?"subgrid.openRtl":"subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},b.subGridOptions||{}),b.colNames.unshift(""),b.colModel.unshift({name:"subgrid",width:jgrid.cell_width?b.subGridWidth+b.cellLayout:b.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),d)for(d.align=$.extend([],d.align||[]),a=0;a<d.name.length;a++)d.align[a]=d.align[a]||"left"})},addSubGridCell:function(a,b,c,d){var e=this[0],f=e.p.subGridOptions,g=!$.isFunction(f.hasSubgrid)||f.hasSubgrid.call(e,{rowid:c,iRow:b,iCol:a,data:d});return null==e.p?"":"<td role='gridcell' class='"+base.getGuiStyles.call(this,"subgrid.tdStart",g?"ui-sgcollapsed sgcollapsed":"")+"' "+e.formatCol(a,b)+">"+(g?"<div class='"+base.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+jgrid.mergeCssClasses(f.commonIconClass,f.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(a,b){return this.each(function(){var c,d,e,f=this,g=f.p,h=g.subGridModel[0],i=function(a,b){return base.getGuiStyles.call(f,"subgrid."+a,b||"")},j=i("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+g.direction),k=i("rowSubTable","ui-subtblcell"),l=i("row","ui-subgrid ui-row-"+g.direction),m=i("tdWithIcon","subgrid-cell"),n=i("tdData","subgrid-data"),o=function(a,b,c){var d=h.align[c],e=$("<td"+(d?" style='text-align:"+d+";'":"")+"></td>").html(b);a.append(e)},p=function(a,b){var c=g.xmlReader.subgrid;$(c.root+" "+c.row,a).each(function(){var a,d,e=$("<tr class='"+k+"'></tr>");if(c.repeatitems===!0)$(c.cell,this).each(function(a){o(e,$(this).text()||"&#160;",a)});else if(a=h.mapping||h.name)for(d=0;d<a.length;d++)o(e,$(a[d],this).text()||"&#160;",d);b.append(e)})},q=function(a,b){var c,d,e,f,i,j=g.jsonReader.subgrid,l=jgrid.getAccessor(a,j.root);if(null!=l)for(d=0;d<l.length;d++){if(i=l[d],c=$("<tr class='"+k+"'></tr>"),j.repeatitems===!0)for(j.cell&&(i=i[j.cell]),e=0;e<i.length;e++)o(c,i[e]||"&#160;",e);else if(f=h.mapping||h.name,f.length)for(e=0;e<f.length;e++)o(c,i[f[e]]||"&#160;",e);b.append(c)}},r=function(a,b,c){var d,e,k=i("legacyTable","ui-jqgrid-legacy-subgrid"+(g.altRows===!0&&$(f).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),l=$("<table"+(k?" style='width:1px' role='presentation' class='"+k+"'":"")+"><thead></thead><tbody></tbody></table>"),m=$("<tr></tr>");for(f.grid.endReq.call(f),e=0;e<h.name.length;e++)d=$("<th class='"+j+"'></th>").html(h.name[e]).width(h.width[e]),m.append(d);return m.appendTo(l[0].tHead),c(a,$(l[0].tBodies[0])),$("#"+jqID(g.id+"_"+b)).append(l),!1},s=function(a){var b,c,d=$(a).attr("id"),e={nd_:(new Date).getTime()};if(e[g.prmNames.subgridid]=d,!h)return!1;if(h.params)for(c=0;c<h.params.length;c++)b=g.iColByName[h.params[c]],void 0!==b&&(e[g.colModel[b].name]=$(a.cells[b]).text().replace(/\&#160\;/gi,""));if(!f.grid.hDiv.loading)switch(f.grid.beginReq.call(f),g.subgridtype||(g.subgridtype=g.datatype),$.isFunction(g.subgridtype)?g.subgridtype.call(f,e):g.subgridtype=g.subgridtype.toLowerCase(),g.subgridtype){case"xml":case"json":$.ajax($.extend({type:g.mtype,url:$.isFunction(g.subGridUrl)?g.subGridUrl.call(f,e):g.subGridUrl,dataType:g.subgridtype,context:d,data:jgrid.serializeFeedback.call(f,g.serializeSubGridData,"jqGridSerializeSubGridData",e),success:function(a){r(a,this,"xml"===g.subgridtype?p:q)},error:function(a,b,c){var d=void 0===g.loadSubgridError?g.loadError:g.loadSubgridError;f.grid.endReq.call(f),$.isFunction(d)&&d.call(f,a,b,c),g.subGridOptions.noEmptySubgridOnError||r(null,this,"xml"===g.subgridtype?p:q)}},jgrid.ajaxOptions,g.ajaxSubgridOptions||{}))}return!1},t=function(){var b,c=$(this).parent("tr")[0],d=c.nextSibling,e=c.id,h=g.id+"_"+e,i=function(a){return jgrid.mergeCssClasses(g.subGridOptions.commonIconClass,g.subGridOptions[a])},j=1;if($.each(g.colModel,function(){this.hidden!==!0&&"rn"!==this.name&&"cb"!==this.name||j++}),$(this).hasClass("sgcollapsed")){if(g.subGridOptions.reloadOnExpand===!0||g.subGridOptions.reloadOnExpand===!1&&!$(d).hasClass("ui-subgrid")){if(b=a>=1?"<td colspan='"+a+"'>&#160;</td>":"",!subGridFeedback.call(f,"beforeExpand",h,e))return;$(c).after("<tr role='row' class='"+l+"'>"+b+"<td class='"+m+"'><span class='"+i("openicon")+"'></span></td><td colspan='"+parseInt(g.colNames.length-j,10)+"' class='"+n+"'><div id='"+h+"' class='tablediv'></div></td></tr>"),$(f).triggerHandler("jqGridSubGridRowExpanded",[h,e]),$.isFunction(g.subGridRowExpanded)?g.subGridRowExpanded.call(f,h,e):s(c)}else $(d).show();$(this).html("<div class='"+base.getGuiStyles.call(f,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(f,"subgrid.button","sgbutton")+"'><span class='"+i("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),g.subGridOptions.selectOnExpand&&$(f).jqGrid("setSelection",e)}else if($(this).hasClass("sgexpanded")){if(!subGridFeedback.call(f,"beforeCollapse",h,e))return;g.subGridOptions.reloadOnExpand===!0?$(d).remove(".ui-subgrid"):$(d).hasClass("ui-subgrid")&&$(d).hide(),$(this).html("<div class='"+base.getGuiStyles.call(f,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(f,"subgrid.button","sgbutton")+"'><span class='"+i("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),g.subGridOptions.selectOnCollapse&&$(f).jqGrid("setSelection",e)}return!1},u=1;if(f.grid){for(c=f.rows.length,void 0!==b&&b>0&&(u=b,c=b+1);u<c;)d=f.rows[u],$(d).hasClass("jqgrow")&&(e=$(d.cells[a]),e.hasClass("ui-sgcollapsed")&&(g.scroll&&e.off("click"),e.on("click",t))),u++;g.subGridOptions.expandOnLoad===!0&&$(f.rows).filter(".jqgrow").each(function(a,b){$(b.cells[0]).click()}),f.subGridXml=function(a,b){return r(a,b,p)},f.subGridJson=function(a,b){return r(a,b,q)}}})},expandSubGridRow:function(a){return collapseOrExpand.call(this,a,"sgcollapsed")},collapseSubGridRow:function(a){return collapseOrExpand.call(this,a,"sgexpanded")},toggleSubGridRow:function(a){return collapseOrExpand.call(this,a,"ui-sgcollapsed")}}),window.tableToGrid=function(a,b){$(a).each(function(){var a,c,d,e,f,g,h,i,j=this,k=$(this),l=[],m=[],n=[],o=[],p=[];if(!j.grid){for(k.width("99%"),a=k.width(),c=$("tr td:first-child input[type=checkbox]:first",k),d=$("tr td:first-child input[type=radio]:first",k),e=c.length>0,f=!e&&d.length>0,g=e||f,$("th",k).each(function(){0===l.length&&g?(l.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),m.push("__selection__")):(l.push({name:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),index:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),width:$(this).width()||150}),m.push($(this).html()))}),$("tbody > tr",k).each(function(){var a={},b=0;$("td",$(this)).each(function(){if(0===b&&g){var c=$("input",$(this)),d=c.attr("value");o.push(d||n.length),c.is(":checked")&&p.push(d),a[l[b].name]=c.attr("value")}else a[l[b].name]=$(this).html();b++}),b>0&&n.push(a)}),k.empty(),k.jqGrid($.extend({datatype:"local",width:a,colNames:m,colModel:l,multiselect:e},b||{})),h=0;h<n.length;h++)i=null,o.length>0&&(i=o[h],i&&i.replace&&(i=encodeURIComponent(i).replace(/[.\-%]/g,"_"))),null===i&&(i=$.jgrid.randId()),k.jqGrid("addRowData",i,n[h]);for(h=0;h<p.length;h++)k.jqGrid("setSelection",p[h])}})};var treeGridFeedback=function(){var a=$.makeArray(arguments);return a[0]="treeGrid"+a[0].charAt(0).toUpperCase()+a[0].substring(1),a.unshift(""),a.unshift(""),a.unshift(this.p),jgrid.feedback.apply(this,a)};jgrid.extend({setTreeNode:function(){return this.each(function(){var a=this,b=$(a),c=a.p;if(a.grid&&c.treeGrid){var d=c.treeReader.expanded_field,e=c.treeReader.leaf_field,f=function(a,f,g){if(null!=g){var h=$(g.target),i=h.closest("tr.jqgrow>td"),j=i.parent(),k=function(){var a=c.data[c._index[stripPref(c.idPrefix,f)]],g=a[d]?"collapse":"expand";a[e]||(base[g+"Row"].call(b,a,j),base[g+"Node"].call(b,a,j))};return h.is("div.treeclick")?k():c.ExpandColClick&&i.length>0&&h.closest("span.cell-wrapper",i).length>0&&k(),!0}};b.off("jqGridBeforeSelectRow.setTreeNode"),b.on("jqGridBeforeSelectRow.setTreeNode",f)}})},setTreeGrid:function(){return this.each(function(){var a,b,c,d=this,e=d.p,f=[],g=["leaf_field","expanded_field","loaded"];if(e.treeGrid){e.treedatatype||$.extend(d.p,{treedatatype:e.datatype}),e.subGrid=!1,e.altRows=!1,e.pgbuttons=!1,e.pginput=!1,e.gridview=!0,null===e.rowTotal&&(e.rowNum=e.maxRowNum),e.rowList=[],e.treeIcons.plus="rtl"===e.direction?e.treeIcons.plusRtl:e.treeIcons.plusLtr,"nested"===e.treeGridModel?e.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},e.treeReader):"adjacency"===e.treeGridModel&&(e.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},e.treeReader));for(b in e.colModel)if(e.colModel.hasOwnProperty(b)){a=e.colModel[b].name;for(c in e.treeReader)e.treeReader.hasOwnProperty(c)&&e.treeReader[c]===a&&f.push(a)}$.each(e.treeReader,function(a){var b=String(this);b&&$.inArray(b,f)===-1&&($.inArray(a,g)>=0?e.additionalProperties.push({name:b,search:!1,convert:function(a){return a===!0||"true"===String(a).toLowerCase()||"1"===String(a)||a}}):e.additionalProperties.push(b))})}})},expandRow:function(a){this.each(function(){var b=this,c=$(b),d=b.p;if(b.grid&&d.treeGrid){var e=d.treeReader.expanded_field,f=a[d.localReader.id];if(treeGridFeedback.call(b,"beforeExpandRow",{rowid:f,item:a})){var g=base.getNodeChildren.call(c,a);$(g).each(function(){var a=d.idPrefix+getAccessor(this,d.localReader.id);$(base.getGridRowById.call(c,a)).css("display",""),this[e]&&base.expandRow.call(c,this)}),treeGridFeedback.call(b,"afterExpandRow",{rowid:f,item:a})}}})},collapseRow:function(a){this.each(function(){var b=this,c=$(b),d=b.p;if(b.grid&&d.treeGrid){var e=d.treeReader.expanded_field,f=a[d.localReader.id];if(treeGridFeedback.call(b,"beforeCollapseRow",{rowid:f,item:a})){var g=base.getNodeChildren.call(c,a);$(g).each(function(){var a=d.idPrefix+getAccessor(this,d.localReader.id);$(base.getGridRowById.call(c,a)).css("display","none"),this[e]&&base.collapseRow.call(c,this)}),treeGridFeedback.call(b,"afterCollapseRow",{rowid:f,item:a})}}})},getRootNodes:function(){var a=[];return this.each(function(){var b=this,c=b.p;if(b.grid&&c.treeGrid)switch(c.treeGridModel){case"nested":var d=c.treeReader.level_field;$(c.data).each(function(){parseInt(this[d],10)===parseInt(c.tree_root_level,10)&&a.push(this)});break;
case"adjacency":var e=c.treeReader.parent_id_field;$(c.data).each(function(){null!==this[e]&&"null"!==String(this[e]).toLowerCase()||a.push(this)})}}),a},getNodeDepth:function(a){var b=null;return this.each(function(){var c=this,d=c.p;if(c.grid&&d.treeGrid)switch(d.treeGridModel){case"nested":var e=d.treeReader.level_field;b=parseInt(a[e],10)-parseInt(d.tree_root_level,10);break;case"adjacency":b=base.getNodeAncestors.call($(c),a).length}}),b},getNodeParent:function(a){var b=this[0];if(!b||!b.grid||null==b.p||!b.p.treeGrid||null==a)return null;var c=b.p,d=c.treeReader,e=d.parent_id_field,f=a[e];if("nested"===c.treeGridModel){var g=null,h=d.left_field,i=d.right_field,j=d.level_field,k=parseInt(a[h],10),l=parseInt(a[i],10),m=parseInt(a[j],10);return $(c.data).each(function(){if(parseInt(this[j],10)===m-1&&parseInt(this[h],10)<k&&parseInt(this[i],10)>l)return g=this,!1}),g}if(null===f||"null"===f)return null;var n=c._index[f];return void 0!==n?c.data[n]:null},getNodeChildren:function(a){var b=[];return this.each(function(){var c=this,d=c.p;if(c.grid&&d.treeGrid)switch(d.treeGridModel){case"nested":var e=d.treeReader.left_field,f=d.treeReader.right_field,g=d.treeReader.level_field,h=parseInt(a[e],10),i=parseInt(a[f],10),j=parseInt(a[g],10);$(d.data).each(function(){parseInt(this[g],10)===j+1&&parseInt(this[e],10)>h&&parseInt(this[f],10)<i&&b.push(this)});break;case"adjacency":var k=d.treeReader.parent_id_field,l=d.localReader.id;$(d.data).each(function(){String(this[k])===String(a[l])&&b.push(this)})}}),b},getFullTreeNode:function(a){var b=[];return this.each(function(){var c,d=this,e=d.p;if(d.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var f=e.treeReader.left_field,g=e.treeReader.right_field,h=e.treeReader.level_field,i=parseInt(a[f],10),j=parseInt(a[g],10),k=parseInt(a[h],10);$(e.data).each(function(){parseInt(this[h],10)>=k&&parseInt(this[f],10)>=i&&parseInt(this[f],10)<=j&&b.push(this)});break;case"adjacency":if(a){b.push(a);var l=e.treeReader.parent_id_field,m=e.localReader.id;$(e.data).each(function(){var a;for(c=b.length,a=0;a<c;a++)if(String(b[a][m])===String(this[l])){b.push(this);break}})}}}),b},getNodeAncestors:function(a){var b=[];return this.each(function(){var c=this,d=$(c),e=base.getNodeParent;if(c.grid&&c.p.treeGrid)for(var f=e.call(d,a);f;)b.push(f),f=e.call(d,f)}),b},isVisibleNode:function(a){var b=!0;return this.each(function(){var c=this,d=c.p;if(c.grid&&d.treeGrid){var e=base.getNodeAncestors.call($(c),a),f=d.treeReader.expanded_field;$(e).each(function(){if(b=b&&this[f],!b)return!1})}}),b},isNodeLoaded:function(a){var b;return this.each(function(){var c=this,d=c.p;if(c.grid&&d.treeGrid){var e=d.treeReader.leaf_field,f=d.treeReader.loaded;b=void 0!==a&&(void 0!==a[f]?a[f]:!!(a[e]||base.getNodeChildren.call($(c),a).length>0))}}),b},expandNode:function(a){return this.each(function(){var b=this,c=b.p;if(b.grid&&c.treeGrid){var d=c.treeReader.expanded_field,e=c.treeReader.parent_id_field,f=c.treeReader.loaded,g=c.treeReader.level_field,h=c.treeReader.left_field,i=c.treeReader.right_field;if(!a[d]){var j=getAccessor(a,c.localReader.id);if(!treeGridFeedback.call(b,"beforeExpandNode",{rowid:j,item:a}))return;var k=$("#"+c.idPrefix+jqID(j),b.grid.bDiv)[0],l=c._index[j];"local"===c.treedatatype||base.isNodeLoaded.call($(b),c.data[l])?(a[d]=!0,$("div.treeclick",k).removeClass(c.treeIcons.plus+" tree-plus").addClass(c.treeIcons.commonIconClass).addClass(c.treeIcons.minus+" tree-minus")):b.grid.hDiv.loading||(a[d]=!0,$("div.treeclick",k).removeClass(c.treeIcons.plus+" tree-plus").addClass(c.treeIcons.commonIconClass).addClass(c.treeIcons.minus+" tree-minus"),c.treeANode=k.rowIndex,c.datatype=c.treedatatype,base.setGridParam.call($(b),{postData:"nested"===c.treeGridModel?{nodeid:j,n_level:a[g],n_left:a[h],n_right:a[i]}:{nodeid:j,n_level:a[g],parentid:a[e]}}),$(b).trigger("reloadGrid"),a[f]=!0,base.setGridParam.call($(b),{postData:"nested"===c.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),treeGridFeedback.call(b,"afterExpandNode",{rowid:j,item:a})}}})},collapseNode:function(a){return this.each(function(){var b=this,c=b.p;if(b.grid&&c.treeGrid){var d=c.treeReader.expanded_field;if(a[d]){var e=getAccessor(a,c.localReader.id);if(!treeGridFeedback.call(b,"beforeCollapseNode",{rowid:e,item:a}))return;a[d]=!1,$("#"+c.idPrefix+jqID(e),b.grid.bDiv).find("div.treeclick").removeClass(c.treeIcons.minus+" tree-minus").addClass(c.treeIcons.commonIconClass).addClass(c.treeIcons.plus+" tree-plus"),(c.unloadNodeOnCollapse===!0||$.isFunction(c.unloadNodeOnCollapse)&&c.unloadNodeOnCollapse.call(b,a))&&(a[c.treeReader.loaded]=!1,$(b).jqGrid("delTreeNode",e,!0)),treeGridFeedback.call(b,"afterCollapseNode",{rowid:e,item:a})}}})},SortTree:function(a,b,c,d){return this.each(function(){var e=this,f=e.p,g=$(e);if(e.grid&&f.treeGrid){var h,i,j,k=[],l=base.getRootNodes.call(g),m=jgrid.from.call(e,l);m.orderBy(a,b,c,d);var n=m.select();for(h=0,i=n.length;h<i;h++)j=n[h],k.push(j),base.collectChildrenSortTree.call(g,k,j,a,b,c,d);$.each(k,function(a){var b=getAccessor(this,f.localReader.id);$(e.rows[a]).after(g.find(">tbody>tr#"+jqID(b)))})}})},collectChildrenSortTree:function(a,b,c,d,e,f){return this.each(function(){var g=this,h=$(g);if(g.grid&&g.p.treeGrid){var i,j,k,l=base.getNodeChildren.call(h,b),m=jgrid.from.call(g,l);m.orderBy(c,d,e,f);var n=m.select();for(i=0,j=n.length;i<j;i++)k=n[i],a.push(k),base.collectChildrenSortTree.call(h,a,k,c,d,e,f)}})},setTreeRow:function(a,b){var c=!1;return this.each(function(){var d=this;d.grid&&d.p.treeGrid&&(c=base.setRowData.call($(d),a,b))}),c},delTreeNode:function(a,b){return this.each(function(){var c,d,e,f,g,h=this,i=h.p,j=i.localReader.id,k=$(h),l=i.treeReader.left_field,m=i.treeReader.right_field;if(h.grid&&i.treeGrid){var n=i._index[a];if(void 0!==n){c=parseInt(i.data[n][m],10),d=c-parseInt(i.data[n][l],10)+1;var o=base.getFullTreeNode.call(k,i.data[n]);if(o.length>0)for(g=0;g<o.length;g++)b&&a===o[g][j]||base.delRowData.call(k,o[g][j]);if("nested"===i.treeGridModel){if(e=jgrid.from.call(h,i.data).greater(l,c,{stype:"integer"}).select(),e.length)for(f in e)e.hasOwnProperty(f)&&(e[f][l]=parseInt(e[f][l],10)-d);if(e=jgrid.from.call(h,i.data).greater(m,c,{stype:"integer"}).select(),e.length)for(f in e)e.hasOwnProperty(f)&&(e[f][m]=parseInt(e[f][m],10)-d)}}}})},addChildNode:function(a,b,c,d){return this.each(function(){if(c){var e,f,g,h,i,j,k,l=this,m=l.p,n=$(l),o=base.getInd,p=b,q=m.treeReader.expanded_field,r=m.treeReader.leaf_field,s=m.treeReader.level_field,t=m.treeReader.parent_id_field,u=m.treeReader.left_field,v=m.treeReader.right_field,w=m.treeReader.loaded;void 0===d&&(d=!1),null==a&&(a=jgrid.randId());var x=o.call(n,b);if(j=!1,void 0===b||null===b||""===b)b=null,p=null,e="last",h=m.tree_root_level;else{e="after",f=m._index[b],g=m.data[f],b=g[m.localReader.id],i=o.call(n,b),h=parseInt(g[s],10)+1;var y=base.getFullTreeNode.call(n,g);if(y.length){var z,A,B;for(z=0;z<y.length;z++)B=y[z][m.localReader.id],A=o.call(n,B),A>i&&(i=A,p=B)}g[r]&&(j=!0,g[q]=!0,$(l.rows[x]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(m.treeIcons.leaf+" tree-leaf").addClass(m.treeIcons.commonIconClass).addClass(m.treeIcons.minus+" tree-minus"),m.data[f][r]=!1,g[w]=!0)}if(void 0===c[q]&&(c[q]=!1),void 0===c[w]&&(c[w]=!1),c[s]=h,void 0===c[r]&&(c[r]=!0),"adjacency"===m.treeGridModel&&(c[t]=b),"nested"===m.treeGridModel){var C,D,E;if(null!==b){if(k=parseInt(g[v],10),C=jgrid.from.call(l,m.data),C=C.greaterOrEquals(v,k,{stype:"integer"}),D=C.select(),D.length)for(E in D)D.hasOwnProperty(E)&&(D[E][u]=D[E][u]>k?parseInt(D[E][u],10)+2:D[E][u],D[E][v]=D[E][v]>=k?parseInt(D[E][v],10)+2:D[E][v]);c[u]=k,c[v]=k+1}else{if(k=parseInt(base.getCol.call(n,v,!1,"max"),10),D=jgrid.from.call(l,m.data).greater(u,k,{stype:"integer"}).select(),D.length)for(E in D)D.hasOwnProperty(E)&&(D[E][u]=parseInt(D[E][u],10)+2);if(D=jgrid.from.call(l,m.data).greater(v,k,{stype:"integer"}).select(),D.length)for(E in D)D.hasOwnProperty(E)&&(D[E][v]=parseInt(D[E][v],10)+2);c[u]=k+1,c[v]=k+2}}(null===b||base.isNodeLoaded.call(n,g)||j)&&base.addRowData.call(n,a,c,e,p),g&&!g[q]&&d&&$(l.rows[x]).find("div.treeclick").click()}})}});var namespace=".jqGrid",mouseDown="mousedown",mouseMove="mousemove",mouseUp="mouseup",getMouseCoordinates=function(a){var b=a.originalEvent,c=b.targetTouches;return c?(c=c[0],{x:c.pageX,y:c.pageY}):{x:a.pageX,y:a.pageY}},jqDnR={drag:function(a){var b=a.data,c=b.e,d=b.dnr,e=b.ar,f=b.dnrAr,g=getMouseCoordinates(a);return"move"===d.k?c.css({left:d.X+g.x-d.pX,top:d.Y+g.y-d.pY}):(c.css({width:Math.max(g.x-d.pX+d.W,0),height:Math.max(g.y-d.pY+d.H,0)}),f&&e.css({width:Math.max(g.x-f.pX+f.W,0),height:Math.max(g.y-f.pY+f.H,0)})),!1},stop:function(){$(document).off(mouseMove,jqDnR.drag).off(mouseUp,jqDnR.stop)}},init=function(a,b,c,d){return a.each(function(){b=b?$(b,a):a,b.on(mouseDown,{e:a,k:c},function(a){var b,c,e,f,g,h,i=a.data,j={},k=function(a,b){return parseInt(a.css(b),10)||!1},l=function(a){return k(c,a)},m=function(a){return k(f,a)},n=getMouseCoordinates(a);if(!$(a.target).hasClass("ui-jqdialog-titlebar-close")&&!$(a.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(c=i.e,f=!!d&&$(d),"relative"!==c.css("position"))try{c.position(j)}catch(a){}if(e={X:j.left||l("left")||0,Y:j.top||l("top")||0,W:l("width")||c[0].scrollWidth||0,H:l("height")||c[0].scrollHeight||0,pX:n.x,pY:n.y,k:i.k},g=!(!f||"move"===i.k)&&{X:j.left||m("left")||0,Y:j.top||m("top")||0,W:f[0].offsetWidth||m("width")||0,H:f[0].offsetHeight||m("height")||0,pX:n.x,pY:n.y,k:i.k},b=c.find("input.hasDatepicker"),b.length>0)try{b.datepicker("hide")}catch(a){}return h={e:c,dnr:e,ar:f,dnrAr:g},$(document).on(mouseMove,h,jqDnR.drag),$(document).on(mouseUp,h,jqDnR.stop),!1}})})};window.PointerEvent?(mouseDown+=namespace+" pointerdown"+namespace,mouseMove+=namespace+" pointermove"+namespace,mouseUp+=namespace+" pointerup"+namespace):window.MSPointerEvent?(mouseDown+=namespace+" mspointerdown"+namespace,mouseMove+=namespace+" mspointermove"+namespace,mouseUp+=namespace+" mspointerup"):(mouseDown+=namespace+" touchstart"+namespace,mouseMove+=namespace+" touchmove"+namespace,mouseUp+=namespace+" touchend"+namespace),$.jqDnR=jqDnR,$.fn.jqDrag=function(a){return init(this,a,"move")},$.fn.jqResize=function(a,b){return init(this,a,"resize",b)};var jqmHashLength=0,jqmHash,createdModals=[],setFocusOnFirstVisibleInput=function(a){try{$(":input:visible",a.w).first().focus()}catch(a){}},setFocus=function(a){setFocusOnFirstVisibleInput(a)},keyOrMouseEventHandler=function(a){var b=jqmHash[createdModals[createdModals.length-1]],c=!$(a.target).parents(".jqmID"+b.s)[0],d=$(a.target).offset(),e=void 0!==a.pageX?a.pageX:d.left,f=void 0!==a.pageY?a.pageY:d.top,g=function(){var a=!1;return $(".jqmID"+b.s).each(function(){var b=$(this),c=b.offset();if(c.top<=f&&f<=c.top+b.height()&&c.left<=e&&e<=c.left+b.width())return a=!0,!1}),a};return!("mousedown"===a.type||!g())||("mousedown"===a.type&&c&&(g()&&(c=!1),c&&!$(a.target).is(":input")&&setFocusOnFirstVisibleInput(b)),!c)},bindOrUnbindEvents=function(a){$(document)[a]("keypress keydown mousedown",keyOrMouseEventHandler)},registerHideOrShow=function(a,b,c){return a.each(function(){var a=this._jqm;$(b).each(function(){this[c]||(this[c]=[],$(this).click(function(){var a,b,c,d=["jqmShow","jqmHide"];for(a=0;a<d.length;a++){b=d[a];for(c in this[b])this[b].hasOwnProperty(c)&&jqmHash[this[b][c]]&&jqmHash[this[b][c]].w[b](this)}return!1})),this[c].push(a)})})};$.fn.jqm=function(a){var b={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){return this._jqm?(jqmHash[this._jqm].c=$.extend({},jqmHash[this._jqm].c,a),jqmHash[this._jqm].c):(jqmHashLength++,this._jqm=jqmHashLength,jqmHash[jqmHashLength]={c:$.extend(b,$.jqm.params,a),a:!1,w:$(this).addClass("jqmID"+jqmHashLength),s:jqmHashLength},void(b.trigger&&$(this).jqmAddTrigger(b.trigger)))})},$.fn.jqmAddClose=function(a){return registerHideOrShow(this,a,"jqmHide")},$.fn.jqmAddTrigger=function(a){return registerHideOrShow(this,a,"jqmShow")},$.fn.jqmShow=function(a){return this.each(function(){$.jqm.open(this._jqm,a)})},$.fn.jqmHide=function(a){return this.each(function(){$.jqm.close(this._jqm,a)})},$.jqm={hash:{},open:function(a,b){var c,d,e,f,g,h=jqmHash[a],i=h.c,j=h.w.parent().offset(),k="."+i.closeClass,l=parseInt(h.w.css("z-index"),10);return l=l>0?l:3e3,c=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":l-1,opacity:i.overlay/100}),!h.a&&(h.t=b,h.a=!0,h.w.css("z-index",l),$(h.w[0].ownerDocument).data("ui-dialog-overlays")&&h.w.addClass("ui-dialog"),i.modal?(createdModals[0]||setTimeout(function(){bindOrUnbindEvents("bind")},1),createdModals.push(a)):i.overlay>0?i.closeoverlay&&h.w.jqmAddClose(c):c=!1,h.o=!!c&&c.addClass(i.overlayClass).prependTo("body"),i.ajax?(d=i.target||h.w,e=i.ajax,d="string"==typeof d?$(d,h.w):$(d),e="@"===e.substr(0,1)?$(b).attr(e.substring(1)):e,d.html(i.ajaxText).load(e,function(){i.onLoad&&i.onLoad.call(this,h),k&&h.w.jqmAddClose($(k,h.w)),setFocus(h)})):k&&h.w.jqmAddClose($(k,h.w)),i.toTop&&h.o&&(j=h.w.parent().offset(),f=parseFloat(h.w.css("left")||0),g=parseFloat(h.w.css("top")||0),h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o),h.w.css({top:j.top+g,left:j.left+f})),i.onShow?i.onShow(h):h.w.show(),setFocus(h),!1)},close:function(a){var b=jqmHash[a];return!!b.a&&(b.a=!1,createdModals[0]&&(createdModals.pop(),createdModals[0]||bindOrUnbindEvents("unbind")),b.c.toTop&&b.o&&$("#jqmP"+b.w[0]._jqm).after(b.w).remove(),b.c.onHide?b.c.onHide(b):(b.w.hide(),b.o&&b.o.remove()),!1)},params:{}},jqmHash=$.jqm.hash,$.fmatter=$.fmatter||{};var fmatter=$.fmatter,getOptionByName=function(a,b){var c=a.formatoptions||{};return c.hasOwnProperty(b)?c[b]:(a.editoptions||{})[b]},encodeAttr=function(a){return String(a).replace(/\'/g,"&#39;")},parseCheckboxOptions=function(a){var b,c,d=a.colModel||a.cm,e=d.title!==!1?" title='"+encodeAttr(a.colName||d.name)+"'":"",f=function(a){return getOptionByName(d,a)},g=f("checkedClass"),h=f("uncheckedClass"),i=f("value"),j="string"==typeof i?i.split(":")[0]||"Yes":"Yes",k="string"==typeof i?i.split(":")[1]||"No":"No",l=function(a){return"<i class='"+encodeAttr(a)+"'"+e+"></i>"},m=f("disabled");return void 0===m&&(m=jgrid.formatter.checkbox.disabled),m===!0&&base.isInCommonIconClass.call(this,"fa")?(g=g||"fa fa-check-square-o fa-lg",b=l(g),c=l(h||"fa fa-square-o fa-lg")):m===!0&&base.isInCommonIconClass.call(this,"glyphicon")?(g=g||"glyphicon glyphicon-check",b=l(g),c=l(h||"glyphicon glyphicon-unchecked")):(g="",e+=m===!0?" disabled='disabled'":"",b="<input type='checkbox' checked='checked'"+e+" />",c="<input type='checkbox'"+e+" />"),{checkedClasses:g,checked:b,unchecked:c,yes:j,no:k}},yesObject={1:1,x:1,true:1,yes:1,y:1,on:1},noObject={0:1,false:1,no:1,n:1,off:1};$.extend(!0,jgrid,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(a){var b=a.newValue;return isNaN(b)?b:parseInt(b,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(a){var b=a.newValue;return isNaN(b)?b:parseFloat(b)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(a){var b=a.newValue,c=parseCheckboxOptions.call(this,a),d=String(b).toLowerCase();return yesObject[d]||d===c.yes.toLowerCase()?b=!0:(noObject[d]||d===c.no.toLowerCase())&&(b=!1),b},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){var a=this.p;return{formatter:"actions",width:(null!=a&&(base.isInCommonIconClass.call(this,"fa")||base.isInCommonIconClass.call(this,"glyphicon"))?$(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(jgrid.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),jgrid.cmTemplate.booleanCheckboxFa=jgrid.cmTemplate.booleanCheckbox,$.extend(fmatter,{isObject:function(a){return a&&("object"==typeof a||$.isFunction(a))||!1},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||"string"==typeof a||this.isNumber(a)||"boolean"==typeof a},isEmpty:function(a){return("string"==typeof a||!this.isValue(a))&&(!this.isValue(a)||(a=$.trim(a).replace(/&nbsp;/gi,"").replace(/&#160;/gi,""),""===a))},NumberFormat:function(a,b){var c=fmatter.isNumber;if(c(a)||(a*=1),c(a)){var d,e=a<0,f=String(a),g=b.decimalSeparator||".";if(c(b.decimalPlaces)){var h=b.decimalPlaces,i=Math.pow(10,h);if(f=String(Math.round(a*i)/i),d=f.lastIndexOf("."),h>0)for(d<0?(f+=g,d=f.length-1):"."!==g&&(f=f.replace(".",g));f.length-1-d<h;)f+="0"}if(b.thousandsSeparator){var j=b.thousandsSeparator;d=f.lastIndexOf(g),d=d>-1?d:f.length;var k,l=void 0===b.decimalSeparator?"":f.substring(d),m=-1;for(k=d;k>0;k--)m++,m%3===0&&k!==d&&(!e||k>1)&&(l=j+l),l=f.charAt(k-1)+l;f=l}return f}return a}});var $FnFmatter=function(a,b,c,d,e){var f=b;c=$.extend({},getGridRes.call($(this),"formatter"),c);try{f=$.fn.fmatter[a].call(this,b,c,d,e)}catch(a){}return f};$.fn.fmatter=$FnFmatter,$FnFmatter.getCellBuilder=function(a,b,c){var d=null!=$.fn.fmatter[a]?$.fn.fmatter[a].getCellBuilder:null;return $.isFunction(d)?d.call(this,$.extend({},getGridRes.call($(this),"formatter"),b),c):null},$FnFmatter.defaultFormat=function(a,b){return fmatter.isValue(a)&&""!==a?a:b.defaultValue||"&#160;"};var defaultFormat=$FnFmatter.defaultFormat,formatCheckboxValue=function(a,b,c){if(void 0===a||fmatter.isEmpty(a)){var d=getOptionByName(c,"defaultValue");void 0===d&&(d=b.no),a=d}return a=String(a).toLowerCase(),yesObject[a]||a===b.yes.toLowerCase()?b.checked:b.unchecked};$FnFmatter.email=function(a,b){return fmatter.isEmpty(a)?defaultFormat(a,b):"<a href='mailto:"+encodeAttr(a)+"'>"+a+"</a>"},$FnFmatter.checkbox=function(a,b){var c=parseCheckboxOptions.call(this,b);return formatCheckboxValue(a,c,b.colModel)},$FnFmatter.checkbox.getCellBuilder=function(a){var b,c=a.colModel;return a.colName=a.colName||this.p.colNames[a.pos],b=parseCheckboxOptions.call(this,a),function(a){return formatCheckboxValue(a,b,c)}},$FnFmatter.checkbox.unformat=function(a,b,c){var d=parseCheckboxOptions.call(this,b),e=$(c);return(d.checkedClasses?jgrid.hasAllClasses(e.children("i"),d.checkedClasses):e.children("input").is(":checked"))?d.yes:d.no},$FnFmatter.checkboxFontAwesome4=$FnFmatter.checkbox,$FnFmatter.checkboxFontAwesome4.getCellBuilder=$FnFmatter.checkbox.getCellBuilder,$FnFmatter.checkboxFontAwesome4.unformat=$FnFmatter.checkbox.unformat,$FnFmatter.link=function(a,b){var c=b.colModel,d="",e={target:b.target};return null!=c&&(e=$.extend({},e,c.formatoptions||{})),e.target&&(d="target="+e.target),fmatter.isEmpty(a)?defaultFormat(a,e):"<a "+d+" href='"+encodeAttr(a)+"'>"+a+"</a>"},$FnFmatter.showlink=function(a,b,c){var d,e,f,g=this,h=b.colModel,i={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName,hrefDefaultValue:"#"},j="",k=function(d){return $.isFunction(d)?d.call(g,{cellValue:a,rowid:b.rowId,rowData:c,options:i}):d||""};return null!=h&&(i=$.extend({},i,h.formatoptions||{})),i.target&&(j="target="+k(i.target)),d=k(i.baseLinkUrl)+k(i.showAction),e=i.idName?encodeURIComponent(k(i.idName))+"="+encodeURIComponent(k(i.rowId)||b.rowId):"",f=k(i.addParam),"object"==typeof f&&null!==f&&(f=(""!==e?"&":"")+$.param(f)),d+=e||f?"?"+e+f:"",""===d&&(d=k(i.hrefDefaultValue)),"string"==typeof a||fmatter.isNumber(a)||$.isFunction(i.cellValue)?"<a "+j+" href='"+encodeAttr(d)+"'>"+($.isFunction(i.cellValue)?k(i.cellValue):a)+"</a>":defaultFormat(a,i)},$FnFmatter.showlink.getCellBuilder=function(a){var b={baseLinkUrl:a.baseLinkUrl,showAction:a.showAction,addParam:a.addParam||"",target:a.target,idName:a.idName,hrefDefaultValue:"#"},c=a.colModel;return null!=c&&(b=$.extend({},b,c.formatoptions||{})),function(a,c,d){var e,f,g,h=this,i=c.rowId,j="",k=function(c){return $.isFunction(c)?c.call(h,{cellValue:a,rowid:i,rowData:d,options:b}):c||""};return b.target&&(j="target="+k(b.target)),e=k(b.baseLinkUrl)+k(b.showAction),f=b.idName?encodeURIComponent(k(b.idName))+"="+encodeURIComponent(k(i)||c.rowId):"",g=k(b.addParam),"object"==typeof g&&null!==g&&(g=(""!==f?"&":"")+$.param(g)),e+=f||g?"?"+f+g:"",""===e&&(e=k(b.hrefDefaultValue)),"string"==typeof a||fmatter.isNumber(a)||$.isFunction(b.cellValue)?"<a "+j+" href='"+encodeAttr(e)+"'>"+($.isFunction(b.cellValue)?k(b.cellValue):a)+"</a>":defaultFormat(a,b)}},$FnFmatter.showlink.pageFinalization=function(a){var b,c,d,e=$(this),f=this.p,g=f.colModel,h=g[a],i=this.rows,j=i.length,k=function(b){var c=$(this).closest(".jqgrow");if(c.length>0)return h.formatoptions.onClick.call(e[0],{iCol:a,iRow:c[0].rowIndex,rowid:c.attr("id"),cm:h,cmName:h.name,cellValue:$(this).text(),a:this,event:b})};if(null!=h.formatoptions&&$.isFunction(h.formatoptions.onClick))for(b=0;b<j;b++)c=i[b],$(c).hasClass("jqgrow")&&(d=c.cells[a],h.autoResizable&&null!=d&&$(d.firstChild).hasClass(f.autoResizing.wrapperClassName)&&(d=d.firstChild),null!=d&&$(d.firstChild).on("click",k))};var insertPrefixAndSuffix=function(a,b){return a=b.prefix?b.prefix+a:a,b.suffix?a+b.suffix:a},numberHelper=function(a,b,c){var d=b.colModel,e=$.extend({},b[c]);return null!=d&&(e=$.extend({},e,d.formatoptions||{})),fmatter.isEmpty(a)?insertPrefixAndSuffix(e.defaultValue,e):insertPrefixAndSuffix(fmatter.NumberFormat(a,e),e)};$FnFmatter.integer=function(a,b){return numberHelper(a,b,"integer")},$FnFmatter.number=function(a,b){return numberHelper(a,b,"number")},$FnFmatter.currency=function(a,b){return numberHelper(a,b,"currency")};var numberCellBuilder=function(a,b){var c=a.colModel,d=$.extend({},a[b]);null!=c&&(d=$.extend({},d,c.formatoptions||{}));var e=fmatter.NumberFormat,f=d.defaultValue?insertPrefixAndSuffix(d.defaultValue,d):"";return function(a){return fmatter.isEmpty(a)?f:insertPrefixAndSuffix(e(a,d),d)}};$FnFmatter.integer.getCellBuilder=function(a){return numberCellBuilder(a,"integer")},$FnFmatter.number.getCellBuilder=function(a){return numberCellBuilder(a,"number")},$FnFmatter.currency.getCellBuilder=function(a){return numberCellBuilder(a,"currency")},$FnFmatter.date=function(a,b,c,d){var e=b.colModel,f=$.extend({},b.date);return null!=e&&(f=$.extend({},f,e.formatoptions||{})),f.reformatAfterEdit||"edit"!==d?fmatter.isEmpty(a)?defaultFormat(a,f):jgrid.parseDate.call(this,f.srcformat,a,f.newformat,f):defaultFormat(a,f)},$FnFmatter.date.getCellBuilder=function(a,b){var c=$.extend({},a.date);null!=a.colModel&&(c=$.extend({},c,a.colModel.formatoptions||{}));var d=jgrid.parseDate,e=c.srcformat,f=c.newformat;return c.reformatAfterEdit||"edit"!==b?function(a){return fmatter.isEmpty(a)?defaultFormat(a,c):d.call(this,e,a,f,c)}:function(a){return defaultFormat(a,c)}},$FnFmatter.select=function(a,b){var c,d=[],e=b.colModel,f=$.extend({},e.editoptions||{},e.formatoptions||{}),g=f.value,h=f.separator||":",i=f.delimiter||";";if(g){var j,k=f.multiple===!0,l=[],m=function(a,b){if(b>0)return a};if(k&&(l=$.map(String(a).split(","),function(a){return $.trim(a)})),"string"==typeof g){var n,o,p=g.split(i);for(n=0;n<p.length;n++)if(j=p[n].split(h),j.length>2&&(j[1]=$.map(j,m).join(h)),o=$.trim(j[0]),f.defaultValue===o&&(c=j[1]),k)$.inArray(o,l)>-1&&d.push(j[1]);else if(o===$.trim(a)){d=[j[1]];break}}else fmatter.isObject(g)&&(c=g[f.defaultValue],d=k?$.map(l,function(a){return g[a]}):[void 0===g[a]?"":g[a]])}return a=d.join(", "),""!==a?a:void 0!==f.defaultValue?c:defaultFormat(a,f)},$FnFmatter.select.getCellBuilder=function(a){var b,c,d,e,f,g=a.colModel,h=$FnFmatter.defaultFormat,i=$.extend({},g.editoptions||{},g.formatoptions||{}),j=i.value,k=i.separator||":",l=i.delimiter||";",m=void 0!==i.defaultValue,n=i.multiple===!0,o={},p=function(a,b){if(b>0)return a};if("string"==typeof j)for(d=j.split(l),f=d.length,e=f-1;e>=0;e--)c=d[e].split(k),c.length>2&&(c[1]=$.map(c,p).join(k)),o[$.trim(c[0])]=c[1];else{if(!fmatter.isObject(j))return function(a){return a?String(a):h(a,i)};o=j}return m&&(b=o[i.defaultValue]),n?function(a){var c,d=[],e=$.map(String(a).split(","),function(a){return $.trim(a)});for(c=0;c<e.length;c++)a=e[c],o.hasOwnProperty(a)&&d.push(o[a]);return a=d.join(", "),""!==a?a:m?b:h(a,i)}:function(a){var c=o[String(a)];return""!==c&&void 0!==c?c:m?b:h(a,i)}},$FnFmatter.rowactions=function(a,b){var c,d,e,f,g=$(this).closest("tr.jqgrow"),h=g.attr("id"),i=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),j=$("#"+jgrid.jqID(i)),k=j[0],l=k.p,m=jgrid.getRelativeRect.call(k,g).top,n=l.colModel[jgrid.getCellIndex(this)],o=$.extend(!0,{extraparam:{}},jgrid.actionsNav||{},l.actionsNavOptions||{},n.formatoptions||{});switch(void 0!==l.editOptions&&(o.editOptions=$.extend(!0,o.editOptions||{},l.editOptions)),void 0!==l.delOptions&&(o.delOptions=l.delOptions),g.hasClass("jqgrid-new-row")&&(o.extraparam[l.prmNames.oper]=l.prmNames.addoper),f={keys:o.keys,oneditfunc:o.onEdit,successfunc:o.onSuccess,url:o.url,extraparam:o.extraparam,aftersavefunc:o.afterSave,errorfunc:o.onError,afterrestorefunc:o.afterRestore,restoreAfterError:o.restoreAfterError,mtype:o.mtype},!l.multiselect&&h!==l.selrow||l.multiselect&&$.inArray(h,l.selarrrow)<0?j.jqGrid("setSelection",h,!0,a):jgrid.fullBoolFeedback.call(k,"onSelectRow","jqGridSelectRow",h,!0,a),b){case"edit":j.jqGrid("editRow",h,f);break;case"save":j.jqGrid("saveRow",h,f);break;case"cancel":j.jqGrid("restoreRow",h,o.afterRestore);break;case"del":o.delOptions=o.delOptions||{},void 0===o.delOptions.top&&(o.delOptions.top=m),j.jqGrid("delGridRow",h,o.delOptions);break;case"formedit":o.editOptions=o.editOptions||{},void 0===o.editOptions.top&&(o.editOptions.top=m,o.editOptions.recreateForm=!0),j.jqGrid("editGridRow",h,o.editOptions);break;default:if(null!=o.custom&&o.custom.length>0)for(d=o.custom.length,c=0;c<d;c++)e=o.custom[c],e.action===b&&$.isFunction(e.onClick)&&e.onClick.call(k,{rowid:h,event:a,action:b,options:e})}return a.stopPropagation&&a.stopPropagation(),!1},$FnFmatter.actions=function(a,b,c,d){var e,f,g,h=b.rowId,i="",j=this,k=j.p,l=$(j),m={},n=getGridRes.call(l,"edit")||{},o=$.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:n.bSubmit||"",canceltitle:n.bCancel||""},getGridRes.call(l,"nav")||{},jgrid.nav||{},k.navOptions||{},getGridRes.call(l,"actionsNav")||{},jgrid.actionsNav||{},k.actionsNavOptions||{},b.colModel.formatoptions||{}),p=function(a){return jgrid.mergeCssClasses(o.commonIconClass,o[a+"icon"])},q=l.jqGrid("getGuiStyles","states.hover"),r="onmouseover=\"jQuery(this).addClass('"+q+"');\" onmouseout=\"jQuery(this).removeClass('"+q+"');\"",s=[{action:"edit",actionName:"formedit",display:o.editformbutton},{action:"edit",display:!o.editformbutton&&o.editbutton},{action:"del",idPrefix:"Delete",display:o.delbutton},{action:"save",display:o.editformbutton||o.editbutton,hidden:!0},{action:"cancel",display:o.editformbutton||o.editbutton,hidden:!0}],t=function(a){var b=a.action,c=a.actionName||b,d=void 0!==a.idPrefix?a.idPrefix:b.charAt(0).toUpperCase()+b.substring(1);return"<div title='"+encodeAttr(o[b+"title"])+(a.hidden?"' style='display:none;":"")+"' class='"+encodeAttr(l.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+b))+"' "+(null!==d?"id='j"+encodeAttr(d+"Button_"+h):"")+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'"+c+"');\" "+(a.noHovering?"":r)+"><span class='"+encodeAttr(p(b))+"'></span></div>"},u=null!=o.custom?o.custom.length-1:-1;if(void 0===h||fmatter.isEmpty(h))return"";if($.isFunction(o.isDisplayButtons))try{m=o.isDisplayButtons.call(j,b,c,d)||{}}catch(a){}for(;u>=0;)f=o.custom[u--],s["first"===f.position?"unshift":"push"](f);for(e=0,u=s.length;e<u;e++)g=$.extend({},s[e],m[s[e].action]||{}),g.display!==!1&&(i+=t(g));return"<div class='"+encodeAttr(l.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+i+"</div>"},$FnFmatter.actions.pageFinalization=function(a){var b=$(this),c=this.p,d=c.colModel,e=d[a],f=function(f,g){var h,i,j,k=0,l=d.length;for(j=0;j<l&&d[j].frozen===!0;j++)k=j;h=b.jqGrid("getGridRowById",g),null!=h&&null!=h.cells&&(a=c.iColByName[e.name],i=$(h.cells[a]).children(".ui-jqgrid-actions"),e.frozen&&c.frozenColumns&&a<=k&&(i=i.add($(b[0].grid.fbRows[h.rowIndex].cells[a]).children(".ui-jqgrid-actions"))),f?(i.find(">.ui-inline-edit,>.ui-inline-del").show(),i.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(i.find(">.ui-inline-edit,>.ui-inline-del").hide(),i.find(">.ui-inline-save,>.ui-inline-cancel").show()))},g=function(a,b){return f(!0,b),!1},h=function(a,b){return f(!1,b),!1};null!=e.formatoptions&&e.formatoptions.editformbutton||(b.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",g),b.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",g),b.off("jqGridInlineEditRow.jqGridFormatter",h),b.on("jqGridInlineEditRow.jqGridFormatter",h))},$.unformat=function(a,b,c,d){var e,f=b.colModel,g=f.formatter,h=this.p,i=f.formatoptions||{},j=f.unformat||$FnFmatter[g]&&$FnFmatter[g].unformat;if(a instanceof jQuery&&a.length>0&&(a=a[0]),h.treeGrid&&null!=a&&$(a.firstChild).hasClass("tree-wrap")&&($(a.lastChild).hasClass("cell-wrapper")||$(a.lastChild).hasClass("cell-wrapperleaf"))&&(a=a.lastChild),f.autoResizable&&null!=a&&$(a.firstChild).hasClass(h.autoResizing.wrapperClassName)&&(a=a.firstChild),void 0!==j&&$.isFunction(j))e=j.call(this,$(a).text(),b,a);else if(void 0!==g&&"string"==typeof g){var k=$(this),l=function(a,b){return void 0!==i[b]?i[b]:getGridRes.call(k,"formatter."+a+"."+b)},m=function(a,b){var c=l(a,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return b.replace(new RegExp(c,"g"),"")};switch(g){case"integer":e=m("integer",$(a).text());break;case"number":e=m("number",$(a).text()).replace(l("number","decimalSeparator"),".");break;case"currency":e=$(a).text();var n=l("currency","prefix"),o=l("currency","suffix");n&&n.length&&(e=e.substr(n.length)),o&&o.length&&(e=e.substr(0,e.length-o.length)),e=m("number",e).replace(l("number","decimalSeparator"),".");break;case"checkbox":e=$FnFmatter.checkbox.unformat(a,b,a);break;case"select":e=$.unformat.select(a,b,c,d);break;case"actions":return"";default:e=$(a).text()}}return e=void 0!==e?e:d===!0?$(a).text():jgrid.htmlDecode($(a).html())},$.unformat.select=function(a,b,c,d){var e=[],f=$(a).text(),g=b.colModel;if(d===!0)return f;var h=$.extend({},g.editoptions||{},g.formatoptions||{}),i=void 0===h.separator?":":h.separator,j=void 0===h.delimiter?";":h.delimiter;if(h.value){var k,l=h.value,m=h.multiple===!0,n=[],o=function(a,b){if(b>0)return a};if(m&&(n=f.split(","),n=$.map(n,function(a){return $.trim(a)})),"string"==typeof l){var p,q=l.split(j),r=0;for(p=0;p<q.length;p++)if(k=q[p].split(i),k.length>2&&(k[1]=$.map(k,o).join(i)),m)$.inArray($.trim(k[1]),n)>-1&&(e[r]=k[0],r++);else if($.trim(k[1])===$.trim(f)){e[0]=k[0];break}}else(fmatter.isObject(l)||$.isArray(l))&&(m||(n[0]=f),e=$.map(n,function(a){
var b;if($.each(l,function(c,d){if(d===a)return b=c,!1}),void 0!==b)return b}));return e.join(", ")}return f||""},$.unformat.date=function(a,b){var c=$.extend(!0,{},getGridRes.call($(this),"formatter.date"),jgrid.formatter.date||{},b.formatoptions||{});return fmatter.isEmpty(a)?"":jgrid.parseDate.call(this,c.newformat,a,c.srcformat,c)}});
//# sourceMappingURL=jquery.jqgrid.min.js.map